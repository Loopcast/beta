(function(){(function(e){if("function"==typeof bootstrap)bootstrap("jade",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeJade=e}else"undefined"!=typeof window?window.jade=e():global.jade=e()})(function(){var define,ses,bootstrap,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){if(!Array.isArray){Array.isArray=function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}}if(!Object.keys){Object.keys=function(obj){var arr=[];for(var key in obj){if(obj.hasOwnProperty(key)){arr.push(key)}}return arr}}exports.merge=function merge(a,b){var ac=a["class"];var bc=b["class"];if(ac||bc){ac=ac||[];bc=bc||[];if(!Array.isArray(ac))ac=[ac];if(!Array.isArray(bc))bc=[bc];a["class"]=ac.concat(bc).filter(nulls)}for(var key in b){if(key!="class"){a[key]=b[key]}}return a};function nulls(val){return val!=null&&val!==""}function joinClasses(val){return Array.isArray(val)?val.map(joinClasses).filter(nulls).join(" "):val}exports.attrs=function attrs(obj,escaped){var buf=[],terse=obj.terse;delete obj.terse;var keys=Object.keys(obj),len=keys.length;if(len){buf.push("");for(var i=0;i<len;++i){var key=keys[i],val=obj[key];if("boolean"==typeof val||null==val){if(val){terse?buf.push(key):buf.push(key+'="'+key+'"')}}else if(0==key.indexOf("data")&&"string"!=typeof val){buf.push(key+"='"+JSON.stringify(val)+"'")}else if("class"==key){if(escaped&&escaped[key]){if(val=exports.escape(joinClasses(val))){buf.push(key+'="'+val+'"')}}else{if(val=joinClasses(val)){buf.push(key+'="'+val+'"')}}}else if(escaped&&escaped[key]){buf.push(key+'="'+exports.escape(val)+'"')}else{buf.push(key+'="'+val+'"')}}}return buf.join(" ")};exports.escape=function escape(html){return String(html).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};exports.rethrow=function rethrow(err,filename,lineno,str){if(!(err instanceof Error))throw err;if((typeof window!="undefined"||!filename)&&!str){err.message+=" on line "+lineno;throw err}try{str=str||require("fs").readFileSync(filename,"utf8")}catch(ex){rethrow(err,null,lineno)}var context=3,lines=str.split("\n"),start=Math.max(lineno-context,0),end=Math.min(lines.length,lineno+context);var context=lines.slice(start,end).map(function(line,i){var curr=i+start+1;return(curr==lineno?"  > ":"    ")+curr+"| "+line}).join("\n");err.path=filename;err.message=(filename||"Jade")+":"+lineno+"\n"+context+"\n\n"+err.message;throw err}},{fs:2}],2:[function(require,module,exports){},{}]},{},[1])(1)});function require(path,parent){var realpath=require.resolve(path,parent),m=require.mods[realpath];if(!m.init){m.factory.call(this,require.local(realpath),m.module,m.module.exports);m.init=true}return m.module.exports}require.mods={};require.local=function(path){var r=function(id){return require(id,path)};r.resolve=function(id){return require.resolve(id,path)};return r};require.register=function(path,mod,aliases){require.mods[path]={factory:mod,aliases:aliases,module:{exports:{}}}};require.aliases={app:"src/frontend/scripts",templates:"src/frontend/templates"};require.alias=function(path){for(var alias in require.aliases)if(path.indexOf(alias)==0)return require.aliases[alias]+path.match(/\/(.+)/)[0];return null};require.resolve=function(path,parent){var realpath;if(parent)if(!(realpath=require.mods[parent].aliases[path]))realpath=require.alias(path);if(!require.mods[realpath||path])throw new Error("Module not found: "+path);return realpath||path};window.require=require;require.register("node_modules/aware/index",function(require,module,exports){var happens=require("happens");module.exports=function(target){target=target||{};for(var prop in Aware)target[prop]=Aware[prop];target.__init();return target};var Aware={__init:function(){this.__store={};this.__handlers={};this.__happens=happens()},on:function(key,fn,bypass){if(!(fn&&fn instanceof Function))throw new Error(fn+" is not a Function");this.__happens.on(key,fn);if(this.__store.hasOwnProperty(key)&&!bypass)fn(this.get(key))},off:function(key,fn){this.__happens.off(key,fn)},get:function(key){return interpolate(this,this.__store[key])},set:function(key,value){if(arguments.length==2){if(this.__store[key]!==value){this.__store[key]=value;emit(this,key);toogle(this,key,value)}return value}else if(key instanceof Object){for(var p in key)this.set(p,key[p]);return key}throw new Error("Cannot set property, it must be a dictionary")}};function interpolate(aw,value){if(value===undefined)return null;var t,token,tokens=tokenize(value);for(t in tokens){token=tokens[t];value=value.replace(token,aw.get(clean(token)))}return value}function toogle(aw,key,value){var parent,t,tokens=tokenize(value);for(t in tokens)bind(aw,key,tokens[t]=clean(tokens[t]));for(parent in aw.__handlers[key])if(tokens.indexOf(parent)===-1)unbind(aw,key,parent)}function bind(aw,key,parent){if(!aw.__handlers[key]||!aw.__handlers[key][parent]){if(!aw.__handlers[key])aw.__handlers[key]={};aw.on(parent,aw.__handlers[key][parent]=function(value){emit(aw,key)},true)}}function unbind(aw,key,parent){aw.off(parent,aw.__handlers[key][parent]);aw.__handlers[key][parent]=null;delete aw.__handlers[key][parent]}function emit(aw,key){aw.__happens.emit(key,aw.get(key))}function tokenize(str){if(typeof str==="string")return str.match(/#\{[^\}]+\}/g)||[];return[]}function clean(str){return str.replace(/#\{([^\}]+)\}/g,"$1")}},{happens:"node_modules/happens/index"});require.register("node_modules/happens/index",function(require,module,exports){module.exports=function(target){target=target||{};for(var prop in Happens)target[prop]=Happens[prop];return target};var Happens={__init:function(event){var tmp=this.__listeners||(this.__listeners=[]);return tmp[event]||(tmp[event]=[])},on:function(event,fn){validate(fn);this.__init(event).push(fn)},off:function(event,fn){var pool=this.__init(event);pool.splice(pool.indexOf(fn),1)},once:function(event,fn){validate(fn);var self=this,wrapper=function(){self.off(event,wrapper);fn.apply(this,arguments)};this.on(event,wrapper)},emit:function(event){var i,pool=this.__init(event).slice(0);for(i in pool)pool[i].apply(this,[].slice.call(arguments,1))}};function validate(fn){if(!(fn&&fn instanceof Function))throw new Error(fn+" is not a Function")}},{});require.register("node_modules/ways-browser/lib/hash",function(require,module,exports){var Event,Hash,PseudoHistory,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");PseudoHistory=function(_super){__extends(PseudoHistory,_super);function PseudoHistory(){_ref=PseudoHistory.__super__.constructor.apply(this,arguments);return _ref}PseudoHistory.prototype.state=null;return PseudoHistory}(Array);module.exports=Hash=function(_super){__extends(Hash,_super);Hash.prototype.history=null;function Hash(){var hash,pathname,_this=this;this.history=new PseudoHistory;hash=window.location.hash;pathname=window.location.pathname;if(hash===""){if(pathname.length>1){window.location.href="/#"+pathname}else{window.location.href="#/"}}window.attachEvent("onhashchange",function(){return _this.emit("url:change",_this.pathname())},false)}Hash.prototype.pathname=function(){return window.location.hash};Hash.prototype.push=function(url,title,state){this.history.push(this.history.state=state);window.location.hash=url;if(title!=null){document.title=title}return this.emit("url:change",this.pathname())};Hash.prototype.replace=function(url,title,state){this.history[this.history.length-1]=this.history.state=state;if(title!=null){document.title=title}return window.location.hash.replace(url)};return Hash}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens"});require.register("node_modules/ways-browser/lib/history",function(require,module,exports){var Event,History,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");module.exports=History=function(_super){__extends(History,_super);History.prototype.history=window.history;function History(){var _ref,_this=this;if((_ref=window.location.hash)!=null?_ref.length:void 0){this.replace(window.location.hash.substr(1))}window.addEventListener("popstate",function(){var popped;if(initial===_this.pathname()&&!popped){return popped=true}return _this.emit("url:change",window.location.pathname)},false)}History.prototype.pathname=function(){return window.location.pathname};History.prototype.push=function(url,title,state){window.history.pushState(state,title,url);if(title!=null){document.title=title}return this.emit("url:change",window.location.pathname)};History.prototype.replace=function(url,title,state){window.history.replaceState(state,title,url);if(title!=null){return document.title=title}};return History}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens"});require.register("node_modules/ways-browser/lib/index",function(require,module,exports){var Event,Hash,History,Index,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");History=require("./history");Hash=require("./hash");module.exports=Index=function(_super){__extends(Index,_super);Index.prototype.api=null;function Index(){var _this=this;if(window.history.pushState!=null){this.api=new History}else{this.api=new Hash}this.api.on("url:change",function(pathname){return _this.emit("url:change",pathname)});this.history=this.api.history}Index.prototype.pathname=function(){return this.api.pathname()};Index.prototype.push=function(url,title,state){return this.api.push(url,title,state)};Index.prototype.replace=function(url,title,state){return this.api.replace(url,title,state)};return Index}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens","./history":"node_modules/ways-browser/lib/history","./hash":"node_modules/ways-browser/lib/hash"});require.register("node_modules/ways-browser/node_modules/happens/lib/happens",function(require,module,exports){var Happens,__slice=[].slice;module.exports=Happens=function(){function Happens(){}Happens.prototype.on=function(key,callback){var pool;pool=this.__listeners||(this.__listeners=[]);return(pool[key]||(pool[key]=[])).push(callback)};Happens.prototype.off=function(key,callback){var pool,_ref;if((pool=(_ref=this.__listeners)!=null?_ref[key]:void 0)!=null){return pool.splice(pool.indexOf(callback),1)}};Happens.prototype.once=function(key,callback){var wrapper,_this=this;return this.on(key,wrapper=function(){_this.off(key,wrapper);return callback.apply(_this,arguments)})};Happens.prototype.emit=function(){var args,key,listener,pool,_i,_len,_ref,_ref1,_results;key=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((pool=(_ref=this.__listeners)!=null?_ref[key]:void 0)!=null){_ref1=pool.slice(0);_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){listener=_ref1[_i];_results.push(listener.apply(this,args))}return _results}};Happens.mixin=function(target){var prop,_results;_results=[];for(prop in this.prototype){_results.push(target[prop]=this.prototype[prop])}return _results};return Happens}()},{});require.register("node_modules/ways/lib/flow",function(require,module,exports){var happens=require("happens"),fluid=require("./fluid");var find=function(arr,filter){for(var item,i=0,len=arr.length;i<len;i++){if(filter(item=arr[i])){return item}}};var reject=function(arr,filter){for(var item,copy=[],i=0,len=arr.length;i<len;i++){if(!filter(item=arr[i])){copy.push(item)}}return copy};module.exports=function(routes,mode){return new Flow(routes,mode)};function Flow(routes,mode){happens(this);this.routes=routes;this.mode=mode;this.deads=[];this.actives=[];this.pendings=[];this.status="free"}Flow.prototype.run=function(url,route){var flu,self=this;if(this.status=="busy")this.actives.splice(-1,1);this.emit("status:busy");this.deads=[];this.pendings=[];flu=fluid(route,url);this.filter_pendings(flu);this.filter_deads();this.status="busy";if(this.mode==="run+destroy"){this.run_pendings(function(){self.destroy_deads(function(){self.status="free";self.emit("status:free",self.mode)})})}else if(this.mode==="destroy+run"){this.destroy_deads(function(){self.run_pendings(function(){self.status="free";self.emit("status:free",self.mode)})})}};Flow.prototype.find_dependency=function(parent){var route,flu;flu=find(this.actives,function(f){return f.url===parent.dependency});if(flu!=null)return flu;route=find(this.routes,function(r){return r.matcher.test(parent.route.dependency)});if(route!=null)return fluid(route,parent.dependency);return null};Flow.prototype.filter_pendings=function(parent){var err,flu,route,dep;this.pendings.unshift(parent);if(parent.dependency==null)return;if((flu=this.find_dependency(parent))!=null)return this.filter_pendings(flu);route=parent.route.pattern;dep=parent.dependency;err="Dependency '"+dep+"' not found for route '"+route+"'";throw new Error(err)};Flow.prototype.filter_deads=function(){var flu,is_pending,i,len;for(i=0,len=this.actives.length;i<len;i++){flu=this.actives[i];is_pending=find(this.pendings,function(f){return f.url===flu.url});if(!is_pending){this.deads.push(flu)}}};Flow.prototype.run_pendings=function(done){var flu,is_active,self=this;if(this.pendings.length===0)return done();flu=this.pendings.shift();is_active=find(this.actives,function(f){return f.url===flu.url});if(is_active)return this.run_pendings(done);this.actives.push(flu);this.emit("run:pending",flu.url);flu.run(function(){self.run_pendings(done)})};Flow.prototype.destroy_deads=function(done){var flu,self=this;if(this.deads.length===0)return done();flu=this.deads.pop();this.actives=reject(this.actives,function(f){return f.url===flu.url});flu.destroy(function(){self.destroy_deads(done)})}},{happens:"node_modules/ways/node_modules/happens/lib/happens","./fluid":"node_modules/ways/lib/fluid"});require.register("node_modules/ways/lib/fluid",function(require,module,exports){module.exports=function(route,url){return new Fluid(route,url)};function Fluid(route,url){this.route=route;this.url=url;if(route.dependency)this.dependency=route.computed_dependency(url)}Fluid.prototype.run=function(done){this.req=this.route.run(this.url,done)};Fluid.prototype.destroy=function(done){if(this.req)this.route.destroy(this.req,done)}},{});require.register("node_modules/ways/lib/way",function(require,module,exports){var _params_regex={named:/:\w+/g,splat:/\*\w+/g,optional:/\/(?:\:|\*)(\w+)\?/g};module.exports=function(pattern,runner,destroyer,dependency){return new Way(pattern,runner,destroyer,dependency)};function Way(pattern,runner,destroyer,dependency){this.matcher=null;this.pattern=pattern;this.runner=runner;this.destroyer=destroyer;this.dependency=dependency;var _params_regex={named:/:\w+/g,splat:/\*\w+/g,optional:/\/(\:|\*)(\w+)\?/g};if(pattern==="*"){this.matcher=/.*/}else{this.matcher=pattern.replace(_params_regex.optional,"(?:/)?$1$2?");this.matcher=this.matcher.replace(_params_regex.named,"([^/]+)");this.matcher=this.matcher.replace(_params_regex.splat,"(.*?)");this.matcher=new RegExp("^"+this.matcher+"$","m")}}Way.prototype.extract_params=function(url){var name,names,params,vals,i,len;names=this.pattern.match(/(?::|\*)(\w+)/g);if(names==null)return{};vals=url.match(this.matcher);params={};for(i=0,len=names.length;i<len;i++){name=names[i];params[name.substr(1)]=vals[i+1]}return params};Way.prototype.rewrite_pattern=function(pattern,url){var key,value,reg,params;params=this.extract_params(url);for(key in params){value=params[key];reg=new RegExp("[:*]+"+key,"g");pattern=pattern.replace(reg,value)}return pattern};Way.prototype.computed_dependency=function(url){return this.rewrite_pattern(this.dependency,url)};Way.prototype.run=function(url,done){var req={url:url,pattern:this.pattern,params:this.extract_params(url)};this.runner(req,done);return req};Way.prototype.destroy=function(req,done){this.destroyer(req,done)}},{});require.register("node_modules/ways/lib/ways",function(require,module,exports){var way=require("./way"),flow=require("./flow");var mode,flo,middleware,routes=[];dispatch=function(url){var i,route;url="/"+url.replace(/^[\/]+|[\/]+$/gm,"");for(i in routes){route=routes[i];if(routes[i].matcher.test(url))return run(url,routes[i])}throw new Error("Route not found for url '"+url+"'")};run=function(url,route){if(flo){flo.run(url,route)}else{route.run(url)}return route};module.exports=function(pattern,runner,destroyer,dependency){if(flo&&arguments.length<3)throw new Error("In `flow` mode you must to pass at least 3 args.");var route=way(pattern,runner,destroyer,dependency);routes.push(route);return route};exports=module.exports;exports.init=function(){dispatch(this.pathname())};exports.mode=function(m){routes=[];if((mode=m)!=null)flo=flow(routes,mode)};exports.use=function(mid){middleware=new mid;middleware.on("url:change",function(){dispatch(middleware.pathname())})};exports.pathname=function(){if(middleware)return middleware.pathname()};exports.go=function(url,title,state){if(middleware)middleware.push(url,title,state);else dispatch(url)};exports.go.silent=function(url,title,state){if(middleware)middleware.replace(url,title,state)};exports.reset=function(){flo=null;mode=null;routes=[];middleware=null}},{"./way":"node_modules/ways/lib/way","./flow":"node_modules/ways/lib/flow"});require.register("node_modules/ways/node_modules/happens/lib/happens",function(require,module,exports){module.exports=function(target){for(var prop in Happens)target[prop]=Happens[prop];return target};function validate(fn){if(!(fn&&fn instanceof Function))throw new Error(fn+"is not a function")}var Happens={__init:function(event){var tmp=this.__listeners||(this.__listeners=[]);return tmp[event]||(tmp[event]=[])},on:function(event,fn){validate(fn);this.__init(event).push(fn)},off:function(event,fn){var pool=this.__init(event);pool.splice(pool.indexOf(fn),1)},once:function(event,fn){validate(fn);var self=this,wrapper=function(){self.off(event,wrapper);fn.apply(this,arguments)};this.on(event,wrapper)},emit:function(event){var i,pool=this.__init(event).slice(0);for(i in pool)pool[i].apply(this,[].slice.call(arguments,1))}}},{});require.register("src/frontend/scripts/app",function(require,module,exports){var App,app,navigation,user_controller,views,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};require("./globals");require("./vendors");require("../vendors/parallax.min.js");views=require("./controllers/views");navigation=require("./controllers/navigation");user_controller=require("./controllers/user");App=function(){App.prototype.window=null;App.prototype.settings=null;App.prototype.local=null;function App(){this.after_render=__bind(this.after_render,this);happens(this);this.on("ready",this.after_render)}App.prototype.start=function(){var _this=this;this.local=require("app/controllers/local_connection");this.window=require("app/controllers/window");this.body=$("body");this.settings=require("app/utils/settings");this.settings.bind(this.body);views.bind();navigation.bind();navigation.on("before_destroy",function(){log("--------- BEFORE DESTROY");return views.unbind("#content")});return navigation.on("after_render",function(){views.bind("#content");navigation.bind("#content");return user_controller.check_user()})};App.prototype.login=function(user){return user_controller.login(user)};App.prototype.logout=function(){return log("[logged out]",user)};App.prototype.after_render=function(){var _this=this;log("after_render");return delay(10,function(){return _this.body.addClass("loaded")})};return App}();app=new App;$(function(){return app.start()});module.exports=window.app=app},{"./globals":"src/frontend/scripts/globals","./vendors":"src/frontend/scripts/vendors","../vendors/parallax.min.js":"src/frontend/vendors/parallax.min","./controllers/views":"src/frontend/scripts/controllers/views","./controllers/navigation":"src/frontend/scripts/controllers/navigation","./controllers/user":"src/frontend/scripts/controllers/user","app/controllers/local_connection":"src/frontend/scripts/controllers/local_connection","app/controllers/window":"src/frontend/scripts/controllers/window","app/utils/settings":"src/frontend/scripts/utils/settings"});require.register("src/frontend/scripts/controllers/appcast",function(require,module,exports){var WebSocket,appcast,aware,v;aware=require("aware");v=require("app/vendors");appcast=aware({});WebSocket=window.WebSocket||null;appcast.messages={};appcast.vu={};appcast.set("connected",false);appcast.connect=function(){var messages_socket,vu_socket;if(!WebSocket){return console.info("+ socket controller wont connect")}messages_socket="ws://localhost:51234/loopcast/messages";appcast.messages=new v.ReconnectingWebsocket(messages_socket);appcast.messages.onopen=function(){console.info("- socket controller connection opened");appcast.set("connected",true);return appcast.messages.send(JSON.stringify(["get_input_devices"]))};appcast.messages.onclose=function(){console.info("- AppCast isnt OPEN, will retry to connect");return appcast.set("connected",false)};appcast.messages.onmessage=function(e){var args,error,from_json,json,method;json=e.data;try{from_json=JSON.parse(json)}catch(_error){error=_error;console.error("- socket controller error parsing json");console.error(error);return error}method=from_json[0];args=from_json[1];if("error"===method){return console.log("error",args)}if(typeof appcast.callbacks[method]==="function"){return appcast.callbacks[method](args)}else{return console.log(" + socket controller has no callback for:",method)}};vu_socket="ws://localhost:51234/loopcast/vu";appcast.vu=new v.ReconnectingWebsocket(vu_socket);appcast.vu.onopen=function(){console.info("- socket VU connection opened");return appcast.set("vu:connected",true)};appcast.vu.onclose=function(){console.info("- socket VU connection closed");return appcast.set("vu:connected",false)};return appcast.vu.onmessage=function(e){var reader;reader=new FileReader;reader.onload=function(e){var buffer;buffer=new Float32Array(e.target.result);return appcast.set("stream:vu",buffer)};return reader.readAsArrayBuffer(e.data)}};appcast.start_stream=function(device_name){var mount_point,password,payload;mount_point="hems";password="loopcast2015";payload={device_name:device_name,mount_point:mount_point,password:password};appcast.set("stream:starting",true);return appcast.messages.send(JSON.stringify(["start_stream",payload]))};appcast.stop_stream=function(){appcast.set("stream:stopping",true);return appcast.messages.send(JSON.stringify(["stop_stream"]))};appcast.callbacks={input_devices:function(args){return appcast.set("input_devices",args.devices)},stream_started:function(args){if(args!=null&&args.error!=null){console.error("- stream_started error:",args.error);appcast.set("stream:error",args.error);return}appcast.set("stream:online",true);appcast.set("stream:starting",null);return appcast.set("stream:error",null)},stream_stopped:function(){appcast.set("stream:online",false);return appcast.set("stream:stopping",null)}};appcast.on("input_device",function(){if(appcast.get("stream:online")){console.error("- input device changed while stream:online");return console.error("? what should we do")}});appcast.connect();module.exports=appcast},{aware:"node_modules/aware/index","app/vendors":"src/frontend/scripts/vendors"});require.register("src/frontend/scripts/controllers/local_connection",function(require,module,exports){var app,connection;app=require("app/app");connection=new LocalConnection("beta.loopcast.fm");connection.listen();connection.addCallback("login",function(user){console.info(" + location connection, user logged in:",user);return app.login(user)});connection.addCallback("logout",function(){console.info(" + location connection, user logged out");return app.logout()});module.exports=connection},{"app/app":"src/frontend/scripts/app"});require.register("src/frontend/scripts/controllers/navigation",function(require,module,exports){var Navigation,happens,settings,ways,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};settings=require("app/utils/settings");happens=require("happens");ways=require("ways");ways.use(require("ways-browser"));Navigation=function(){var instance;instance=null;Navigation.prototype.first_loading=true;function Navigation(){this.url_changed=__bind(this.url_changed,this);var _this=this;if(Navigation.instance){console.error("You can't instantiate this Navigation twice");return}Navigation.instance=this;this.content_selector="#content .inner_content";this.content_div=$(this.content_selector);happens(this);window.ways=ways;ways("*",this.url_changed);delay(200,function(){if(_this.first_loading){return _this.emit("after_render")}})}Navigation.prototype.url_changed=function(req){var div,_this=this;log("url_changed",req.url);req.url=req.url.replace("/#","");div=$("<div>");this.emit("before_load");return div.load(req.url,function(){_this.emit("on_load");if(app.body.scrollTop()>0){app.body.animate({scrollTop:0})}_this.emit("before_destroy");return delay(400,function(){var new_content;new_content=div.find(_this.content_selector).children();_this.content_div=$(_this.content_selector);_this.content_div.children().remove();_this.content_div.append(new_content);return delay(10,function(){log("[Navigation] after_render",req.url);return _this.emit("after_render")})})})};Navigation.prototype.go=function(url){this.first_loading=false;ways.go(url);return false};Navigation.prototype.bind=function(scope){if(scope==null){scope="body"}return $(scope).find("a").each(function(index,item){var $item,href;$item=$(item);href=$item.attr("href");if(href==null){return}if(href.indexOf("http")>=0&&href.indexOf(document.domain)<0){return}if(href.indexOf("#")===0){return $item.click(function(){return false})}else if(href.indexOf("javascript")===0||href.indexOf("tel:")===0){return true}else{return $item.click(function(){return Navigation.instance.go($(this).attr("href"))})}})};return Navigation}();module.exports=new Navigation},{"app/utils/settings":"src/frontend/scripts/utils/settings",happens:"node_modules/happens/index",ways:"node_modules/ways/lib/ways","ways-browser":"node_modules/ways-browser/lib/index"});require.register("src/frontend/scripts/controllers/user",function(require,module,exports){var happens;happens=require("happens");module.exports=happens({logout:function(callback){var _this=this;if(!this.is_logged()){return}log("[User] trying to logout...");return $.post("/logout",{},function(data){log("[User] logout ~ success",data);_this.emit("user:unlogged");app.body.removeClass("logged");log("[User Controller] deleting user variable");delete loopcast.user;return typeof callback==="function"?callback():void 0})},login:function(user){loopcast.user=user;app.body.addClass("logged");this.emit("user:logged",loopcast.user);return log("[User Controller] login",loopcast.user)},check_user:function(){if(this.is_logged()){return this.login(loopcast.user)}else{return this.logout()}},is_logged:function(){return loopcast.user!=null}})},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/controllers/views",function(require,module,exports){var View,happens,view,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");View=function(){var UNIQUE_ID;function View(){this.get_by_dom=__bind(this.get_by_dom,this);this.get_by_uid=__bind(this.get_by_uid,this);this.get=__bind(this.get,this)}UNIQUE_ID=0;View.prototype.hash_model={};View.prototype.uid_map={};View.prototype.get=function(id,index){if(index==null){index=0}if(this.hash_model[id]==null){return false}return this.hash_model[id][index]};View.prototype.get_by_uid=function(uid){var index,name;if(this.uid_map[uid]!=null){name=this.uid_map[uid].name;index=this.uid_map[uid].index;return this.get(name,index)}return false};View.prototype.get_by_dom=function(selector){return this.get_by_uid($(selector).data("uid"))};View.prototype.bind=function(scope,tolog){var _this=this;if(scope==null){scope="body"}if(tolog==null){tolog=false}return $(scope).find("[data-view]").each(function(index,item){var $item,name,names,view_name,_i,_len;$item=$(item);view_name=$item.data("view");$item.removeAttr("data-view");if(view_name.substring(0,1)==="["){names=view_name.substring(1,view_name.length-1).split(",")}else{names=[view_name]}for(_i=0,_len=names.length;_i<_len;_i++){name=names[_i];_this._add_view($item,name)}return $item.removeAttr("data-view")}).promise().done(function(){return _this.emit("binded")})};View.prototype.unbind=function(scope){var _this=this;if(scope==null){scope="body"}return $(scope).find("[data-uid]").each(function(index,item){var $item,id,v;$item=$(item);id=$item.data("uid");v=view.get_by_uid(id);if(v){if(typeof v.destroy==="function"){v.destroy()}return view.on_view_destroyed(id)}}).promise().done(function(){return _this.emit("unbinded")})};View.prototype._add_view=function($item,view_name){var e,l,view,_base;try{view=require("app/views/"+view_name)}catch(_error){e=_error;console.warn("e ->",e.message);console.error("app/views/"+view+" not found for ",$item)}view=new view($item);if((_base=this.hash_model)[view_name]==null){_base[view_name]=[]}l=this.hash_model[view_name].length;this.hash_model[view_name][l]=view;view.uid=UNIQUE_ID;view.view_name=view_name;$item.attr("data-uid",UNIQUE_ID);this.uid_map[UNIQUE_ID]={name:view_name,index:this.hash_model[view_name].length-1};return UNIQUE_ID++};View.prototype.on_view_destroyed=function(uid){var i,index,item,name,_i,_len,_ref,_results;if(this.uid_map[uid]!=null){name=this.uid_map[uid].name;index=this.uid_map[uid].index;if(this.hash_model[name][index]!=null){delete this.uid_map[uid];this.hash_model[name].splice(index,1);_ref=this.hash_model[name];_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){item=_ref[i];_results.push(this.uid_map[item.uid].index=i)}return _results}}};return View}();view=new View;happens(view);module.exports=window.view=view;window.View=view},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/controllers/window",function(require,module,exports){var happens,on_resize,win;happens=require("happens");module.exports=happens(win={});win.obj=$(window);win.obj.on("resize",on_resize=function(){win.w=win.obj.width();win.h=win.obj.height();return win.emit("resize")});delay(100,on_resize);$("html,body").on("click",function(){return win.emit("body:clicked")})},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/globals",function(require,module,exports){window.delay=require("./globals/delay");window.interval=require("./globals/interval");window.log=require("./globals/log");window.mover=require("./globals/mover");window.happens=require("happens");module.exports=window},{"./globals/delay":"src/frontend/scripts/globals/delay","./globals/interval":"src/frontend/scripts/globals/interval","./globals/log":"src/frontend/scripts/globals/log","./globals/mover":"src/frontend/scripts/globals/mover",happens:"node_modules/happens/index"});
require.register("src/frontend/scripts/globals/delay",function(require,module,exports){module.exports=function(delay,funk){return setTimeout(funk,delay)}},{});require.register("src/frontend/scripts/globals/interval",function(require,module,exports){module.exports=function(interval,funk){return setInterval(funk,interval)}},{});require.register("src/frontend/scripts/globals/log",function(require,module,exports){module.exports=function(){log.history=log.history||[];log.history.push(arguments);if(typeof console!=="undefined"&&console!==null){return console.log(Array.prototype.slice.call(arguments))}}},{});require.register("src/frontend/scripts/globals/mover",function(require,module,exports){module.exports={scroll_to:function(el,with_topbar,speed){var y;if(with_topbar==null){with_topbar=false}if(speed==null){speed=300}y=el.position().top;log("[Mover] scroll_to",y);return this.scroll_to_y(y,with_topbar,speed)},scroll_to_y:function(y,with_topbar,speed){if(with_topbar==null){with_topbar=true}if(speed==null){speed=300}if(with_topbar){y-=app.settings.header_height}log("[mover] scroll_to_y",y);return $("html, body").animate({scrollTop:y},speed)}}},{});require.register("src/frontend/scripts/utils/browser",function(require,module,exports){var BrowserDetect;BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";return this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){var dataProp,dataString,i;i=0;while(i<data.length){dataString=data[i].string;dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!==-1){return data[i].identity}}else{if(dataProp){return data[i].identity}}i++}},searchVersion:function(dataString){var index;index=dataString.indexOf(this.versionSearchString);if(index===-1){return}return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();module.exports=BrowserDetect},{});require.register("src/frontend/scripts/utils/opacity",function(require,module,exports){var Opacity;Opacity={show:function(el,time){if(time==null){time=500}return el.fadeIn(time)},hide:function(el,time){if(time==null){time=500}return el.fadeOut(time)},get_time:function(time){return time/1e3+"s"}};module.exports=Opacity},{});require.register("src/frontend/scripts/utils/preload",function(require,module,exports){module.exports=function(images,callback){var count,images_loaded,item,load,loaded,_i,_len,_results;count=0;images_loaded=[];load=function(src,callback){var img;img=new Image;img.onload=callback;img.src=src;return images_loaded.push(img)};loaded=function(){count++;log("[Preloader] load_multiple - loaded",""+count+" / "+images.length);if(count===images.length){log("[Preloader] load_multiple - loaded ALL");return callback(images_loaded)}};_results=[];for(_i=0,_len=images.length;_i<_len;_i++){item=images[_i];_results.push(load(item,loaded))}return _results}},{});require.register("src/frontend/scripts/utils/settings",function(require,module,exports){var BrowserDetect,has3d,platform,ratio,settings;BrowserDetect=require("app/utils/browser");settings={browser:{id:BrowserDetect.browser,version:BrowserDetect.version,OS:BrowserDetect.OS,chrome:navigator.userAgent.toLowerCase().indexOf("chrome")>-1,firefox:/Firefox/i.test(navigator.userAgent),ie8:false,device_ratio:window.devicePixelRatio,handheld:false,tablet:false,mobile:false,desktop:false,device:false,debug:false,css_cover_supported:Modernizr.backgroundsize,min_size:{w:900,h:400}},webp:false};settings.theme="desktop";settings.threshold_theme=900;settings.browser.retina=settings.browser.device_ratio===2;if(settings.browser.chrome&&settings.browser.version>=30){settings.webp=true}if(settings.browser.id==="Explorer"){settings.browser.ie=true;if(settings.browser.version===8){settings.browser.ie8=true}if(settings.browser.version===9){settings.browser.ie9=true}}settings.video_active=settings.browser.id!=="Explorer";if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){settings.browser.handheld=true;ratio=$(window).width()/$(window).height();settings.browser.orientation=ratio>1?"landscape":"portrait";if($(window).width()<610||settings.browser.orientation==="landscape"&&ratio>2.1){settings.browser.mobile=true;settings.browser.tablet=false}else{settings.browser.mobile=false;settings.browser.tablet=true}}settings.browser.device=settings.browser.tablet||settings.browser.mobile;if(settings.browser.tablet===false&&settings.browser.mobile===false){settings.browser.desktop=true}settings.browser.windows_phone=false;if(settings.browser.mobile&&settings.browser.id==="Explorer"){settings.browser.windows_phone=true}settings.touch_device=settings.browser.handheld;settings.events_map={down:"mousedown",up:"mouseup",move:"mousemove"};if(settings.browser.device){if(settings.browser.windows_phone){settings.events_map={down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove"}}else{settings.events_map={down:"touchstart",up:"touchend",move:"touchmove"}}}if(settings.browser.desktop){platform="desktop"}else if(settings.browser.tablet){platform="tablet"}else{platform="mobile"}settings.browser_class=settings.browser.id+"_"+settings.browser.version;has3d=function(){var el,t,transforms;el=document.createElement("p");has3d=void 0;transforms={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(el,null);for(t in transforms){if(el.style[t]!==undefined){el.style[t]="translate3d(1px,1px,1px)";has3d=window.getComputedStyle(el).getPropertyValue(transforms[t])}}document.body.removeChild(el);return has3d!==undefined&&has3d.length>0&&has3d!=="none"};settings.bind=function(body){var klasses;klasses=[];klasses.push(settings.browser_class);klasses.push(settings.browser.OS.replace("/","_"));klasses.push(settings.browser.id);if(settings.touch_device){klasses.push("touch_device")}else{klasses.push("no_touch_device")}if(settings.browser.css_cover_supported){klasses.push("css_cover_supported")}body.addClass(klasses.join(" ").toLowerCase());return settings.header_height=$("header").height()};module.exports=settings},{"app/utils/browser":"src/frontend/scripts/utils/browser"});require.register("src/frontend/scripts/vendors",function(require,module,exports){var vendors;vendors={Modernizr:require("../vendors/modernizr.custom.js"),LocalConnection:require("../vendors/LocalConnection.js"),ReconnectingWebsocket:require("../vendors/reconnecting-websocket.js")};module.exports=vendors},{"../vendors/modernizr.custom.js":"src/frontend/vendors/modernizr.custom","../vendors/LocalConnection.js":"src/frontend/vendors/LocalConnection","../vendors/reconnecting-websocket.js":"src/frontend/vendors/reconnecting-websocket"});require.register("src/frontend/scripts/views/buttons/start_recording",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){return dom.click(function(){var done,fail,url;if(!appcast.get("streaming:online")){console.error("- cant start recording if not streaming");return}console.log("+ start recording",appcast.get("input_device"));url="/tape/start/recording";done=function(){console.info("+ recording post done ->",arguments);return appcast.set("recording",true)};fail=function(){return console.error("- failing trying to start recording ->",arguments)};return $.post(url).done(done).fail(fail)})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/buttons/start_stream",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){return dom.click(function(){if(!appcast.get("input_device")){console.error("- cant start stream before selecting input device");return}console.log("starting streaming with",appcast.get("input_device"));return appcast.start_stream(appcast.get("input_device"))})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/buttons/stop_recording",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){return dom.click(function(){var done,fail,url;if(!appcast.get("stream:recording")){console.error("- cant stop recording if not recording");return}console.log("+ stopping to record with ",appcast.get("input_device"));url="/tape/stop/recording";done=function(){return console.info("+ /tape/stop/recording post done ->",arguments)};fail=function(){return console.error("- /tape/stop/recording post failed ->",arguments)};return $.post(url).done(done).fail(fail)})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/buttons/stop_stream",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){return dom.click(function(){if(!appcast.get("streaming:online")){console.error("- cant stop stream if not streaming");return}console.log("+ stoping streaming with",appcast.get("input_device"));return appcast.stop_stream()})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/components/click_trigger",function(require,module,exports){var ClickTrigger,HoverTrigger,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};HoverTrigger=require("app/views/components/hover_trigger");module.exports=ClickTrigger=function(_super){__extends(ClickTrigger,_super);function ClickTrigger(){_ref=ClickTrigger.__super__.constructor.apply(this,arguments);return _ref}ClickTrigger.prototype.set_listeners=function(){this.dom.on("click",this.toggle);return app.window.on("body:clicked",this.close)};return ClickTrigger}(HoverTrigger)},{"app/views/components/hover_trigger":"src/frontend/scripts/views/components/hover_trigger"});require.register("src/frontend/scripts/views/components/fullscreen",function(require,module,exports){var Fullscreen,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=Fullscreen=function(){Fullscreen.prototype.factor=1;function Fullscreen(dom){this.dom=dom;this.on_resize=__bind(this.on_resize,this);this.dom.addClass("fullscreen");if(this.dom.data("factor")){this.factor=this.dom.data("factor")}app.window.on("resize",this.on_resize);this.on_resize()}Fullscreen.prototype.on_resize=function(){return this.dom.css({width:"100%",height:(app.window.h-app.settings.header_height)*this.factor})};return Fullscreen}()},{});require.register("src/frontend/scripts/views/components/hover",function(require,module,exports){var Hover,happens,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");module.exports=Hover=function(){function Hover(dom){this.dom=dom;this.on_mouse_leave=__bind(this.on_mouse_leave,this);this.on_mouse_over=__bind(this.on_mouse_over,this);if(app.settings.touch_device){return}happens(this);this.dom.on("mouseover",this.on_mouse_over);this.dom.on("mouseleave",this.on_mouse_leave);this.dom.addClass("hover_object")}Hover.prototype.on_mouse_over=function(){return this.dom.addClass("hovered")};Hover.prototype.on_mouse_leave=function(){return this.dom.removeClass("hovered")};return Hover}()},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/hover_trigger",function(require,module,exports){var HoverTrigger,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=HoverTrigger=function(){HoverTrigger.prototype.opened=false;HoverTrigger.prototype.klass="hovered";function HoverTrigger(dom){this.dom=dom;this.on_dropdown_closed=__bind(this.on_dropdown_closed,this);this.on_dropdown_opened=__bind(this.on_dropdown_opened,this);this.close=__bind(this.close,this);this.open=__bind(this.open,this);this.toggle=__bind(this.toggle,this);this.target=$(this.dom.data("target"));if(this.target.length<=0){log("[HoverTrigger] error. target not found",this.dom.data("target"));return}this.dom.addClass("hover_dropdown_trigger");this.set_listeners();app.on("dropdown:opened",this.on_dropdown_opened);app.on("dropdown:closed",this.on_dropdown_closed)}HoverTrigger.prototype.set_listeners=function(){if(app.settings.touch_device){this.dom.on("click",this.toggle)}else{this.dom.on("mouseover",this.open);this.target.on("mouseleave",this.close)}return app.window.on("body:clicked",this.close)};HoverTrigger.prototype.toggle=function(e){if(this.opened){this.close()}else{this.open()}return e.stopPropagation()};HoverTrigger.prototype.open=function(){if(this.opened){return}this.opened=true;this.dom.addClass(this.klass);this.target.addClass(this.klass);return app.emit("dropdown:opened",this.uid)};HoverTrigger.prototype.close=function(){if(!this.opened){return}this.opened=false;this.dom.removeClass(this.klass);this.target.removeClass(this.klass);return app.emit("dropdown:closed",this.uid)};HoverTrigger.prototype.on_dropdown_opened=function(data){if(data!==this.uid){return this.close()}};HoverTrigger.prototype.on_dropdown_closed=function(data){};return HoverTrigger}()},{});require.register("src/frontend/scripts/views/components/input_devices",function(require,module,exports){var appcast,happens;appcast=require("app/controllers/appcast");happens=require("happens");module.exports=function(dom){happens(this);dom.on("change",function(){return appcast.set("input_device",dom.val())});return appcast.on("input_devices",function(devices){var device,_i,_len,_results;dom.html(" ");_results=[];for(_i=0,_len=devices.length;_i<_len;_i++){device=devices[_i];_results.push(dom.append("<option value='"+device+"'>"+device+"</option>"))}return _results})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast",happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/logout_link",function(require,module,exports){var LogoutLink,user_controller;user_controller=require("app/controllers/user");module.exports=LogoutLink=function(){function LogoutLink(dom){this.dom=dom;this.dom.on("click",function(e){e.preventDefault();e.stopPropagation();return user_controller.logout(function(){return log("[LogoutLink] logout succedeed.")})})}return LogoutLink}()},{"app/controllers/user":"src/frontend/scripts/controllers/user"});require.register("src/frontend/scripts/views/components/modal",function(require,module,exports){var Modal,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=Modal=function(){Modal.prototype.opened=false;function Modal(dom){this.dom=dom;this.close=__bind(this.close,this);this.overlay=$(".md_overlay")}Modal.prototype.open=function(){if(this.opened){return}this.opened=true;this.dom.addClass("md_show");return this.overlay.off("click").on("click",this.close)};Modal.prototype.close=function(){if(!this.opened){return}this.opened=false;return this.dom.removeClass("md_show")};return Modal}()},{});require.register("src/frontend/scripts/views/components/modal_handler",function(require,module,exports){var ModalHandler,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=ModalHandler=function(){function ModalHandler(dom){this.dom=dom;this.on_ready=__bind(this.on_ready,this);view.once("binded",this.on_ready)}ModalHandler.prototype.on_ready=function(){var modal_target;modal_target=view.get_by_dom(this.dom.data("modal"));return this.dom.on("click",function(){return modal_target.open()})};return ModalHandler}()},{});require.register("src/frontend/scripts/views/components/player",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){var audio,check_stream,start_audio,stop_audio,stream,vu;audio=dom.find("audio");vu=dom.find(".vu");stream=audio.data("src");audio.hide();appcast.on("connected",function(status){if(status){return dom.find(".status").html("... waiting stream to start ...")}else{return dom.find(".status").html("... waiting AppCast to start ...")}});appcast.on("stream:error",function(error){if(!error){return}return dom.find(".status").html("... "+error+" ...")});check_stream=function(){return $.get(stream,function(error,response){if(error){delay(100,check_stream);return console.error("- error loading streaming")}return console.warn("+ all good!")})};start_audio=function(){audio.attr("src",audio.data("src"));return audio.show()};stop_audio=function(){audio.stop();return audio.hide()};appcast.on("stream:online",function(status){if(status){return start_audio()}else{return stop_audio()}});return appcast.on("stream:vu",function(meter){vu.find(".meter_left").width(meter[0]*1e3);return vu.find(".meter_right").width(meter[1]*1e3)})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/components/popup_handler",function(require,module,exports){var PopupHandler,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=PopupHandler=function(){function PopupHandler(dom){this.dom=dom;this.open=__bind(this.open,this);this.url=this.dom.data("url");this.title=this.dom.data("title");this.w=this.dom.data("w");this.h=this.dom.data("h");this.dom.on("click",this.open)}PopupHandler.prototype.open=function(){var left,params,top;left=app.window.w/2-this.w/2;top=app.window.h/2-this.h/2;params="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+this.w+", height="+this.h+", top="+top+", left="+left;log("params",params);log("url",this.url);log("title",this.title);return window.open(this.url,this.title,params).focus()};return PopupHandler}()},{});require.register("src/frontend/scripts/views/components/scroll_handler",function(require,module,exports){var ScrollHandler;module.exports=ScrollHandler=function(){function ScrollHandler(dom){var target;this.dom=dom;target=$(this.dom.data("target"));if(target.length<=0){return}this.dom.addClass("scroll_handler");this.dom.on("click",function(){return mover.scroll_to(target)})}return ScrollHandler}()},{});require.register("src/frontend/scripts/views/explore",function(require,module,exports){var Explore;module.exports=Explore=function(){function Explore(dom){this.dom=dom}return Explore}()},{});require.register("src/frontend/scripts/views/header",function(require,module,exports){var Header,navigation,user_controller,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};navigation=require("app/controllers/navigation");user_controller=require("app/controllers/user");module.exports=Header=function(){Header.prototype.current_page="";function Header(dom){this.dom=dom;this.on_user_unlogged=__bind(this.on_user_unlogged,this);this.on_user_logged=__bind(this.on_user_logged,this);this.check_menu=__bind(this.check_menu,this);user_controller.on("user:logged",this.on_user_logged);user_controller.on("user:unlogged",this.on_user_unlogged);navigation.on("after_render",this.check_menu)}Header.prototype.check_menu=function(){var obj,page;obj=$("[data-menu]");if(obj.length>0){page=obj.data("menu");log("[Header] check_menu",page);if(this.current_page.length>0){this.dom.find("."+this.current_page+"_item").removeClass("selected");app.body.removeClass(""+this.current_page+"_page")}this.dom.find("."+page+"_item").addClass("selected");app.body.addClass(""+page+"_page");return this.current_page=page}};Header.prototype.on_user_logged=function(data){var html,tmpl,wrapper;wrapper=this.dom.find(".user_logged");tmpl=require("templates/shared/header_user_logged");html=tmpl(data);log("[Header] on_user_logged",data,html);log("wrapper",wrapper.length,wrapper);wrapper.empty().append(html);return view.bind(wrapper)};Header.prototype.on_user_unlogged=function(data){return log("[Header] on_user_unlogged",data)};return Header}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation","app/controllers/user":"src/frontend/scripts/controllers/user","templates/shared/header_user_logged":"src/frontend/templates/shared/header_user_logged"});require.register("src/frontend/scripts/views/homepage",function(require,module,exports){var Homepage,preload;preload=require("app/utils/preload");module.exports=Homepage=function(){function Homepage(dom){var elements,images;this.dom=dom;elements=[];images=[];this.dom.find(".parallax-container").each(function(){elements.push($(this));return images.push($(this).data("image-parallax"))});preload(images,function(images_loaded){var el,i,_i,_len,_this=this;for(i=_i=0,_len=elements.length;_i<_len;i=++_i){el=elements[i];el.parallax({imageSrc:images_loaded[i].src,bleed:10,parallax:"scroll",naturalWidth:images_loaded[i].width,naturalheight:images_loaded[i].height})}return delay(100,function(){return app.window.obj.trigger("resize")})})}Homepage.prototype.destroy=function(){var p;p=$(".parallax-mirror");p.addClass("hide");return delay(300,function(){return p.remove()})};return Homepage}()},{"app/utils/preload":"src/frontend/scripts/utils/preload"});require.register("src/frontend/scripts/views/loading",function(require,module,exports){var Loading,Opacity,navigation;navigation=require("app/controllers/navigation");Opacity=require("app/utils/opacity");module.exports=Loading=function(){Loading.prototype.first_time=true;function Loading(dom){var _this=this;this.dom=dom;navigation.on("before_destroy",function(){app.body.addClass("loading").removeClass("loaded");return Opacity.show(_this.dom,100)});navigation.on("after_render",function(){if(_this.first_time){app.body.addClass("first_loaded");_this.first_time=false}app.body.removeClass("loading").addClass("loaded");return Opacity.hide(_this.dom)})}return Loading}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation","app/utils/opacity":"src/frontend/scripts/utils/opacity"});require.register("src/frontend/scripts/views/login",function(require,module,exports){var Login,Navigation,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Navigation=require("app/controllers/navigation");module.exports=Login=function(){function Login(dom){this.dom=dom;this._google_login=__bind(this._google_login,this);this._soundcloud_login=__bind(this._soundcloud_login,this);this._facebook_login=__bind(this._facebook_login,this);if(window.opener==null){app.body.removeClass("login_page");Navigation.go("/")}this.username=this.dom.find(".username");this.password=this.dom.find(".password");this.dom.find(".facebook").on("click",this._facebook_login);this.dom.find(".soundcloud").on("click",this._soundcloud_login);this.dom.find(".google").on("click",this._google_login)}Login.prototype._facebook_login=function(){return log("[Login] _facebook_login")};Login.prototype._soundcloud_login=function(){return log("[Login] _soundcloud_login")};Login.prototype._google_login=function(){return log("[Login] _google_login")};return Login}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation"});require.register("src/frontend/scripts/views/room",function(require,module,exports){var Room;module.exports=Room=function(){function Room(dom){this.dom=dom}return Room}()},{});require.register("src/frontend/templates/shared/header_user_logged",function(require,module,exports){module.exports=function anonymous(locals){var buf=[];var locals_=locals||{},avatar=locals_.avatar,username=locals_.username;buf.push('<div data-view="components/click_trigger" data-target=".user_dropdown" class="thumb_wrapper"><img'+jade.attrs({width:"42",src:""+avatar+""},{width:true,src:true})+'/><span class="spritesheet small_arrow_white"></span><ul class="user_dropdown hover_dropdown"><li><a'+jade.attrs({href:"/"+username+"",title:"My Profile"},{href:true,title:true})+'>My Profile</a></li><li><a href="#" title="Feedback">Feedback</a></li><li><a href="#" title="Logout" data-view="components/logout_link" class="logout">Logout</a></li></ul></div><a href="#" title="Messages"><span class="spritesheet messages_icon"></span></a>');return buf.join("")}},{});require.register("src/frontend/vendors/LocalConnection",function(require,module,exports){window.LocalConnection=function LocalConnection(options){this.name="localconnection";this.id=(new Date).getTime();this.useLocalStorage=false;this.debug=false;this._actions=[];this.init=function(options){try{localStorage.setItem(this.id,this.id);localStorage.removeItem(this.id);this.useLocalStorage=true}catch(e){this.useLocalStorage=false}for(var o in options){this[o]=options[o]}this.clear()};this.listen=function(){if(this.useLocalStorage){if(window.addEventListener){window.addEventListener("storage",this.bind(this,this._check),false)}else{window.attachEvent("onstorage",this.bind(this,this._check))}}else{setInterval(this.bind(this,this._check),100)}};this.send=function(event){var args=Array.prototype.slice.call(arguments,1);return this._write(event,args)};this.addCallback=function(event,func,scope){if(scope==undefined){scope=this}if(this._actions[event]==undefined){this._actions[event]=[]}this._actions[event].push({f:func,s:scope})};this.removeCallback=function(event){for(var e in this._actions){if(e==event){delete this._actions[e];break}}};this._check=function(){var data=this._read();if(data.length>0){for(var e in data){this._receive(data[e].event,data[e].args)}}};this._receive=function(event,args){if(this._actions[event]!=undefined){for(var func in this._actions[event]){if(this._actions[event].hasOwnProperty(func)){this.log('Triggering callback "'+event+'"',this._actions[event]);var callback=this._actions[event][func];callback.f.apply(callback.s,args)}}}};this._write=function(event,args){var events=this._getEvents();var evt={id:this.id,event:event,args:args};events.push(evt);this.log("Sending event",evt);if(this.useLocalStorage){localStorage.setItem(this.name,JSON.stringify(events))}else{document.cookie=this.name+"="+JSON.stringify(events)+"; path=/"}return true};this._read=function(){var events=this._getEvents();if(events==""){return false}var ret=[];for(var e in events){if(events[e].id!=this.id){ret.push({event:events[e].event,args:events[e].args});events.splice(e,1)}}if(this.useLocalStorage){localStorage.setItem(this.name,JSON.stringify(events))}else{document.cookie=this.name+"="+JSON.stringify(events)+"; path=/"}return ret};this._getEvents=function(){return this.useLocalStorage?this._getLocalStorage():this._getCookie()};this._getLocalStorage=function(){var events=localStorage.getItem(this.name);if(events==null){return[]}return JSON.parse(events)};this._getCookie=function(){var ca=document.cookie.split(";");var data;for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(this.name+"=")==0){data=c.substring(this.name.length+1,c.length);break}}data=data||"[]";return JSON.parse(data)};this.clear=function(){if(this.useLocalStorage){localStorage.removeItem(this.name)}else{document.cookie=this.name+"=; path=/"}};this.bind=function(scope,fn){return function(){fn.apply(scope,arguments)}};this.log=function(){if(!this.debug){return}if(console){console.log(Array.prototype.slice.call(arguments))}};this.init(options)}},{});require.register("src/frontend/vendors/modernizr.custom",function(require,module,exports){window.Modernizr=function(a,b,c){function A(a){j.cssText=a}function B(a,b){return A(n.join(a+";")+(b||""))}function C(a,b){return typeof a===b}function D(a,b){return!!~(""+a).indexOf(b)}function E(a,b){for(var d in a){var e=a[d];if(!D(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function F(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:C(f,"function")?f.bind(d||b):f}return!1}function G(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return C(b,"string")||C(b,"undefined")?E(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),F(e,b,c))}function H(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)t[c[d]]=c[d]in k;return t.list&&(t.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.8.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},y={}.hasOwnProperty,z;!C(y,"undefined")&&!C(y.call,"undefined")?z=function(a,b){return y.call(a,b)}:z=function(a,b){return b in a&&C(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.backgroundsize=function(){return G("backgroundSize")},r.csstransforms=function(){return!!G("transform")},r.csstransforms3d=function(){var a=!!G("perspective");return a&&"webkitPerspective"in g.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},r.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")
}catch(d){}return c};for(var I in r)z(r,I)&&(w=I.toLowerCase(),e[w]=r[I](),u.push((e[w]?"":"no-")+w));return e.input||H(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)z(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},A(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return typeof a=="string"?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){c||(c=b);if(k)return c.createElement(a);d||(d=n(c));var g;return d.cache[a]?g=d.cache[a].cloneNode():f.test(a)?g=(d.cache[a]=d.createElem(a)).cloneNode():g=d.createElem(a),g.canHaveChildren&&!e.test(a)&&!g.tagUrn?d.frag.appendChild(g):g}function p(a,c){a||(a=b);if(k)return a.createDocumentFragment();c=c||n(a);var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g,h="_html5shiv",i=0,j={},k;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){g=!0,k=!0}})();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.testProp=function(a){return E([a])},e.testAllProps=G,e.testStyles=x,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document)},{});require.register("src/frontend/vendors/parallax.min",function(require,module,exports){!function(t,i,e,s){function o(i,e){var h=this;"object"==typeof e&&(delete e.refresh,delete e.render,t.extend(this,e)),this.$element=t(i),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var n=(this.position+"").toLowerCase().match(/\S+/g)||[];return n.length<1&&n.push("center"),1==n.length&&n.push(n[0]),"top"==n[0]||"bottom"==n[0]||"left"==n[1]||"right"==n[1]?(h.positionX=n[1],h.positionY=n[0]):(h.positionX=n[0],h.positionY=n[1]),this.positionX!=s&&(n[0]=this.positionX.toLowerCase()),this.positionY!=s&&(n[1]=this.positionY.toLowerCase()),"left"!=this.positionX&&"right"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?"center":parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?"center":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?(this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this):navigator.userAgent.match(/(Android)/)?(this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this):(this.$mirror=t("<div />").prependTo("body"),this.$slider=t("<img />").prependTo(this.$mirror),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){h.naturalHeight&&h.naturalWidth||(h.naturalHeight=this.naturalHeight||this.height||1,h.naturalWidth=this.naturalWidth||this.width||1),h.aspectRatio=h.naturalWidth/h.naturalHeight,o.isSetup||o.setup(),o.sliders.push(h),o.isFresh=!1,o.requestRender()}),this.$slider[0].src=this.imageSrc,void((this.naturalHeight&&this.naturalWidth||this.$slider[0].complete)&&this.$slider.trigger("load")))}function h(s){return this.each(function(){var h=t(this),n="object"==typeof s&&s;this==i||this==e||h.is("body")?o.configure(n):h.data("px.parallax")||(n=t.extend({},h.data(),n),h.data("px.parallax",new o(this,n))),"string"==typeof s&&o[s]()})}!function(){for(var t=0,e=["ms","moz","webkit","o"],s=0;s<e.length&&!i.requestAnimationFrame;++s)i.requestAnimationFrame=i[e[s]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[e[s]+"CancelAnimationFrame"]||i[e[s]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),h=i.setTimeout(function(){e(s+o)},o);return t=s+o,h}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t=o.winHeight,i=o.docHeight,e=Math.min(this.boxOffsetTop,i-t),s=Math.max(this.boxOffsetTop+this.boxHeight-t,0),h=this.boxHeight+(e-s)*(1-this.speed)|0,n=(this.boxOffsetTop-e)*(1-this.speed)|0;if(h*this.aspectRatio>=this.boxWidth){this.imageWidth=h*this.aspectRatio|0,this.imageHeight=h,this.offsetBaseTop=n;var r=this.imageWidth-this.boxWidth;this.offsetLeft="left"==this.positionX?0:"right"==this.positionX?-r:isNaN(this.positionX)?-r/2|0:Math.max(this.positionX,-r)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;var r=this.imageHeight-h;this.offsetBaseTop="top"==this.positionY?n:"bottom"==this.positionY?n-r:isNaN(this.positionY)?n-r/2|0:n+Math.max(this.positionY,-r)}},render:function(){var t=o.scrollTop,i=o.scrollLeft,e=t+o.winHeight;this.visibility=this.boxOffsetBottom>t&&this.boxOffsetTop<e?"visible":"hidden",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-i,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed),this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=t(e),h=t(i);h.on("scroll.px.parallax load.px.parallax",function(){var t=o.docHeight-o.winHeight,i=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(t,h.scrollTop())),o.scrollLeft=Math.max(0,Math.min(i,h.scrollLeft())),o.requestRender()}).on("resize.px.parallax load.px.parallax",function(){o.winHeight=h.height(),o.winWidth=h.width(),o.docHeight=s.height(),o.docWidth=s.width(),o.isFresh=!1,o.requestRender()}),this.isReady=!0}},configure:function(i){"object"==typeof i&&(delete i.refresh,delete i.render,t.extend(this.prototype,i))},refresh:function(){t.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,function(){this.render()})},requestRender:function(){var t=this;this.isBusy||(this.isBusy=!0,i.requestAnimationFrame(function(){t.render(),t.isBusy=!1}))}});var n=t.fn.parallax;t.fn.parallax=h,t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=n,this},t(e).on("ready.px.parallax.data-api",function(){t('[data-parallax="scroll"]').parallax()})}(jQuery,window,document)},{});require.register("src/frontend/vendors/reconnecting-websocket",function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof module!=="undefined"&&module.exports){module.exports=factory()}else{global.ReconnectingWebSocket=factory()}})(this,function(){function ReconnectingWebSocket(url,protocols,options){var settings={debug:false,automaticOpen:true,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};if(!options){options={}}for(var key in settings){if(typeof options[key]!=="undefined"){this[key]=options[key]}else{this[key]=settings[key]}}this.url=url;this.reconnectAttempts=0;this.readyState=WebSocket.CONNECTING;this.protocol=null;var self=this;var ws;var forcedClose=false;var timedOut=false;var eventTarget=document.createElement("div");eventTarget.addEventListener("open",function(event){self.onopen(event)});eventTarget.addEventListener("close",function(event){self.onclose(event)});eventTarget.addEventListener("connecting",function(event){self.onconnecting(event)});eventTarget.addEventListener("message",function(event){self.onmessage(event)});eventTarget.addEventListener("error",function(event){self.onerror(event)});this.addEventListener=eventTarget.addEventListener.bind(eventTarget);this.removeEventListener=eventTarget.removeEventListener.bind(eventTarget);this.dispatchEvent=eventTarget.dispatchEvent.bind(eventTarget);function generateEvent(s,args){var evt=document.createEvent("CustomEvent");evt.initCustomEvent(s,false,false,args);return evt}this.open=function(reconnectAttempt){ws=new WebSocket(self.url,protocols||[]);if(!reconnectAttempt){eventTarget.dispatchEvent(generateEvent("connecting"))}if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","attempt-connect",self.url)}var localWs=ws;var timeout=setTimeout(function(){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","connection-timeout",self.url)}timedOut=true;localWs.close();timedOut=false},self.timeoutInterval);ws.onopen=function(event){clearTimeout(timeout);if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onopen",self.url)}self.protocol=ws.protocol;self.readyState=WebSocket.OPEN;self.reconnectAttempts=0;var e=generateEvent("open");e.isReconnect=reconnectAttempt;reconnectAttempt=false;eventTarget.dispatchEvent(e)};ws.onclose=function(event){clearTimeout(timeout);ws=null;if(forcedClose){self.readyState=WebSocket.CLOSED;eventTarget.dispatchEvent(generateEvent("close"))}else{self.readyState=WebSocket.CONNECTING;var e=generateEvent("connecting");e.code=event.code;e.reason=event.reason;e.wasClean=event.wasClean;eventTarget.dispatchEvent(e);if(!reconnectAttempt&&!timedOut){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onclose",self.url)}eventTarget.dispatchEvent(generateEvent("close"))}var timeout=self.reconnectInterval*Math.pow(self.reconnectDecay,self.reconnectAttempts);setTimeout(function(){self.reconnectAttempts++;self.open(true)},timeout>self.maxReconnectInterval?self.maxReconnectInterval:timeout)}};ws.onmessage=function(event){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onmessage",self.url,event.data)}var e=generateEvent("message");e.data=event.data;eventTarget.dispatchEvent(e)};ws.onerror=function(event){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onerror",self.url,event)}eventTarget.dispatchEvent(generateEvent("error"))}};if(this.automaticOpen==true){this.open(false)}this.send=function(data){if(ws){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","send",self.url,data)}return ws.send(data)}else{throw"INVALID_STATE_ERR : Pausing to reconnect websocket"}};this.close=function(code,reason){if(typeof code=="undefined"){code=1e3}forcedClose=true;if(ws){ws.close(code,reason)}};this.refresh=function(){if(ws){ws.close()}}}ReconnectingWebSocket.prototype.onopen=function(event){};ReconnectingWebSocket.prototype.onclose=function(event){};ReconnectingWebSocket.prototype.onconnecting=function(event){};ReconnectingWebSocket.prototype.onmessage=function(event){};ReconnectingWebSocket.prototype.onerror=function(event){};ReconnectingWebSocket.debugAll=false;ReconnectingWebSocket.CONNECTING=WebSocket.CONNECTING;ReconnectingWebSocket.OPEN=WebSocket.OPEN;ReconnectingWebSocket.CLOSING=WebSocket.CLOSING;ReconnectingWebSocket.CLOSED=WebSocket.CLOSED;return ReconnectingWebSocket})},{});require("src/frontend/scripts/app")})();