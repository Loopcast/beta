(function(){(function(e){if("function"==typeof bootstrap)bootstrap("jade",e);else if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeJade=e}else"undefined"!=typeof window?window.jade=e():global.jade=e()})(function(){var define,ses,bootstrap,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){if(!Array.isArray){Array.isArray=function(arr){return"[object Array]"==Object.prototype.toString.call(arr)}}if(!Object.keys){Object.keys=function(obj){var arr=[];for(var key in obj){if(obj.hasOwnProperty(key)){arr.push(key)}}return arr}}exports.merge=function merge(a,b){var ac=a["class"];var bc=b["class"];if(ac||bc){ac=ac||[];bc=bc||[];if(!Array.isArray(ac))ac=[ac];if(!Array.isArray(bc))bc=[bc];a["class"]=ac.concat(bc).filter(nulls)}for(var key in b){if(key!="class"){a[key]=b[key]}}return a};function nulls(val){return val!=null&&val!==""}function joinClasses(val){return Array.isArray(val)?val.map(joinClasses).filter(nulls).join(" "):val}exports.attrs=function attrs(obj,escaped){var buf=[],terse=obj.terse;delete obj.terse;var keys=Object.keys(obj),len=keys.length;if(len){buf.push("");for(var i=0;i<len;++i){var key=keys[i],val=obj[key];if("boolean"==typeof val||null==val){if(val){terse?buf.push(key):buf.push(key+'="'+key+'"')}}else if(0==key.indexOf("data")&&"string"!=typeof val){buf.push(key+"='"+JSON.stringify(val)+"'")}else if("class"==key){if(escaped&&escaped[key]){if(val=exports.escape(joinClasses(val))){buf.push(key+'="'+val+'"')}}else{if(val=joinClasses(val)){buf.push(key+'="'+val+'"')}}}else if(escaped&&escaped[key]){buf.push(key+'="'+exports.escape(val)+'"')}else{buf.push(key+'="'+val+'"')}}}return buf.join(" ")};exports.escape=function escape(html){return String(html).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};exports.rethrow=function rethrow(err,filename,lineno,str){if(!(err instanceof Error))throw err;if((typeof window!="undefined"||!filename)&&!str){err.message+=" on line "+lineno;throw err}try{str=str||require("fs").readFileSync(filename,"utf8")}catch(ex){rethrow(err,null,lineno)}var context=3,lines=str.split("\n"),start=Math.max(lineno-context,0),end=Math.min(lines.length,lineno+context);var context=lines.slice(start,end).map(function(line,i){var curr=i+start+1;return(curr==lineno?"  > ":"    ")+curr+"| "+line}).join("\n");err.path=filename;err.message=(filename||"Jade")+":"+lineno+"\n"+context+"\n\n"+err.message;throw err}},{fs:2}],2:[function(require,module,exports){},{}]},{},[1])(1)});function require(path,parent){var realpath=require.resolve(path,parent),m=require.mods[realpath];if(!m.init){m.factory.call(this,require.local(realpath),m.module,m.module.exports);m.init=true}return m.module.exports}require.mods={};require.local=function(path){var r=function(id){return require(id,path)};r.resolve=function(id){return require.resolve(id,path)};return r};require.register=function(path,mod,aliases){require.mods[path]={factory:mod,aliases:aliases,module:{exports:{}}}};require.aliases={app:"src/frontend/scripts",api:"src/frontend/scripts/api",templates:"src/frontend/templates",vendors:"src/frontend/vendors"};require.alias=function(path){for(var alias in require.aliases)if(path.indexOf(alias)==0)return require.aliases[alias]+path.match(/\/(.+)/)[0];return null};require.resolve=function(path,parent){var realpath;if(parent)if(!(realpath=require.mods[parent].aliases[path]))realpath=require.alias(path);if(!require.mods[realpath||path])throw new Error("Module not found: "+path);return realpath||path};window.require=require;require.register("node_modules/aware/index",function(require,module,exports){var happens=require("happens");module.exports=function(target){target=target||{};for(var prop in Aware)target[prop]=Aware[prop];target.__init();return target};var Aware={__init:function(){this.__store={};this.__handlers={};this.__happens=happens()},on:function(key,fn,bypass){if(!(fn&&fn instanceof Function))throw new Error(fn+" is not a Function");this.__happens.on(key,fn);if(this.__store.hasOwnProperty(key)&&!bypass)fn(this.get(key))},off:function(key,fn){this.__happens.off(key,fn)},get:function(key){return interpolate(this,this.__store[key])},set:function(key,value){if(arguments.length==2){if(this.__store[key]!==value){this.__store[key]=value;emit(this,key);toogle(this,key,value)}return value}else if(key instanceof Object){for(var p in key)this.set(p,key[p]);return key}throw new Error("Cannot set property, it must be a dictionary")}};function interpolate(aw,value){if(value===undefined)return null;var t,token,tokens=tokenize(value);for(t in tokens){token=tokens[t];value=value.replace(token,aw.get(clean(token)))}return value}function toogle(aw,key,value){var parent,t,tokens=tokenize(value);for(t in tokens)bind(aw,key,tokens[t]=clean(tokens[t]));for(parent in aw.__handlers[key])if(tokens.indexOf(parent)===-1)unbind(aw,key,parent)}function bind(aw,key,parent){if(!aw.__handlers[key]||!aw.__handlers[key][parent]){if(!aw.__handlers[key])aw.__handlers[key]={};aw.on(parent,aw.__handlers[key][parent]=function(value){emit(aw,key)},true)}}function unbind(aw,key,parent){aw.off(parent,aw.__handlers[key][parent]);aw.__handlers[key][parent]=null;delete aw.__handlers[key][parent]}function emit(aw,key){aw.__happens.emit(key,aw.get(key))}function tokenize(str){if(typeof str==="string")return str.match(/#\{[^\}]+\}/g)||[];return[]}function clean(str){return str.replace(/#\{([^\}]+)\}/g,"$1")}},{happens:"node_modules/happens/index"});require.register("node_modules/happens/index",function(require,module,exports){module.exports=function(target){target=target||{};for(var prop in Happens)target[prop]=Happens[prop];return target};var Happens={__init:function(event){var tmp=this.__listeners||(this.__listeners=[]);return tmp[event]||(tmp[event]=[])},on:function(event,fn){validate(fn);this.__init(event).push(fn)},off:function(event,fn){var pool=this.__init(event);pool.splice(pool.indexOf(fn),1)},once:function(event,fn){validate(fn);var self=this,wrapper=function(){self.off(event,wrapper);fn.apply(this,arguments)};this.on(event,wrapper)},emit:function(event){var i,pool=this.__init(event).slice(0);for(i in pool)pool[i].apply(this,[].slice.call(arguments,1))}};function validate(fn){if(!(fn&&fn instanceof Function))throw new Error(fn+" is not a Function")}},{});require.register("node_modules/isotope-layout/js/isotope",function(require,module,exports){(function(window){"use strict";var jQuery=window.jQuery;function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}var trim=String.prototype.trim?function(str){return str.trim()}:function(str){return str.replace(/^\s+|\s+$/g,"")};var docElem=document.documentElement;var getText=docElem.textContent?function(elem){return elem.textContent}:function(elem){return elem.innerText};var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==="[object Array]"}var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i}}return-1};function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(obj&&typeof obj.length==="number"){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}return ary}function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1)}}function isotopeDefinition(Outlayer,getSize,matchesSelector,Item,LayoutMode){var Isotope=Outlayer.create("isotope",{layoutMode:"masonry",isJQueryFiltering:true,sortAscending:true});Isotope.Item=Item;Isotope.LayoutMode=LayoutMode;Isotope.prototype._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();Outlayer.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=["original-order"];for(var name in LayoutMode.modes){this._initLayoutMode(name)}};Isotope.prototype.reloadItems=function(){this.itemGUID=0;Outlayer.prototype.reloadItems.call(this)};Isotope.prototype._itemize=function(){var items=Outlayer.prototype._itemize.apply(this,arguments);for(var i=0,len=items.length;i<len;i++){var item=items[i];item.id=this.itemGUID++}this._updateItemsSortData(items);return items};Isotope.prototype._initLayoutMode=function(name){var Mode=LayoutMode.modes[name];var initialOpts=this.options[name]||{};this.options[name]=Mode.options?extend(Mode.options,initialOpts):initialOpts;this.modes[name]=new Mode(this)};Isotope.prototype.layout=function(){if(!this._isLayoutInited&&this.options.isInitLayout){this.arrange();return}this._layout()};Isotope.prototype._layout=function(){var isInstant=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,isInstant);this._isLayoutInited=true};Isotope.prototype.arrange=function(opts){this.option(opts);this._getIsInstant();var filtered=this._filter(this.items);this.filteredItems=filtered.matches;var _this=this;function hideReveal(){_this.reveal(filtered.needReveal);_this.hide(filtered.needHide)}if(this._isInstant){this._noTransition(hideReveal)}else{hideReveal()}this._sort();this._layout()};Isotope.prototype._init=Isotope.prototype.arrange;Isotope.prototype._getIsInstant=function(){var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this._isInstant=isInstant;return isInstant};Isotope.prototype._filter=function(items){var filter=this.options.filter;filter=filter||"*";var matches=[];var hiddenMatched=[];var visibleUnmatched=[];var test=this._getFilterTest(filter);for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item.isIgnored){continue}var isMatched=test(item);if(isMatched){matches.push(item)}if(isMatched&&item.isHidden){hiddenMatched.push(item)}else if(!isMatched&&!item.isHidden){visibleUnmatched.push(item)}}return{matches:matches,needReveal:hiddenMatched,needHide:visibleUnmatched}};Isotope.prototype._getFilterTest=function(filter){if(jQuery&&this.options.isJQueryFiltering){return function(item){return jQuery(item.element).is(filter)}}if(typeof filter==="function"){return function(item){return filter(item.element)}}return function(item){return matchesSelector(item.element,filter)}};Isotope.prototype.updateSortData=function(elems){var items;if(elems){elems=makeArray(elems);items=this.getItems(elems)}else{items=this.items}this._getSorters();this._updateItemsSortData(items)};Isotope.prototype._getSorters=function(){var getSortData=this.options.getSortData;for(var key in getSortData){var sorter=getSortData[key];this._sorters[key]=mungeSorter(sorter)}};Isotope.prototype._updateItemsSortData=function(items){var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.updateSortData()}};var mungeSorter=function(){function mungeSorter(sorter){if(typeof sorter!=="string"){return sorter}var args=trim(sorter).split(" ");var query=args[0];var attrMatch=query.match(/^\[(.+)\]$/);var attr=attrMatch&&attrMatch[1];var getValue=getValueGetter(attr,query);var parser=Isotope.sortDataParsers[args[1]];sorter=parser?function(elem){return elem&&parser(getValue(elem))}:function(elem){return elem&&getValue(elem)};return sorter}function getValueGetter(attr,query){var getValue;if(attr){getValue=function(elem){return elem.getAttribute(attr)}}else{getValue=function(elem){var child=elem.querySelector(query);return child&&getText(child)}}return getValue}return mungeSorter}();Isotope.sortDataParsers={parseInt:function(val){return parseInt(val,10)},parseFloat:function(val){return parseFloat(val)}};Isotope.prototype._sort=function(){var sortByOpt=this.options.sortBy;if(!sortByOpt){return}var sortBys=[].concat.apply(sortByOpt,this.sortHistory);var itemSorter=getItemSorter(sortBys,this.options.sortAscending);this.filteredItems.sort(itemSorter);if(sortByOpt!==this.sortHistory[0]){this.sortHistory.unshift(sortByOpt)}};function getItemSorter(sortBys,sortAsc){return function sorter(itemA,itemB){for(var i=0,len=sortBys.length;i<len;i++){var sortBy=sortBys[i];var a=itemA.sortData[sortBy];var b=itemB.sortData[sortBy];if(a>b||a<b){var isAscending=sortAsc[sortBy]!==undefined?sortAsc[sortBy]:sortAsc;var direction=isAscending?1:-1;return(a>b?1:-1)*direction}}return 0}}Isotope.prototype._mode=function(){var layoutMode=this.options.layoutMode;var mode=this.modes[layoutMode];if(!mode){throw new Error("No layout mode: "+layoutMode)}mode.options=this.options[layoutMode];return mode};Isotope.prototype._resetLayout=function(){Outlayer.prototype._resetLayout.call(this);this._mode()._resetLayout()};Isotope.prototype._getItemLayoutPosition=function(item){return this._mode()._getItemLayoutPosition(item)};Isotope.prototype._manageStamp=function(stamp){this._mode()._manageStamp(stamp)};Isotope.prototype._getContainerSize=function(){return this._mode()._getContainerSize()};Isotope.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()};Isotope.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return}var filteredItems=this._filterRevealAdded(items);this.filteredItems=this.filteredItems.concat(filteredItems)};Isotope.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return}this._resetLayout();this._manageStamps();var filteredItems=this._filterRevealAdded(items);this.layoutItems(this.filteredItems);this.filteredItems=filteredItems.concat(this.filteredItems);this.items=items.concat(this.items)};Isotope.prototype._filterRevealAdded=function(items){var filtered=this._filter(items);this.hide(filtered.needHide);this.reveal(filtered.matches);this.layoutItems(filtered.matches,true);return filtered.matches};Isotope.prototype.insert=function(elems){var items=this.addItems(elems);if(!items.length){return}var i,item;var len=items.length;for(i=0;i<len;i++){item=items[i];this.element.appendChild(item.element)}var filteredInsertItems=this._filter(items).matches;for(i=0;i<len;i++){items[i].isLayoutInstant=true}this.arrange();for(i=0;i<len;i++){delete items[i].isLayoutInstant}this.reveal(filteredInsertItems)};var _remove=Isotope.prototype.remove;Isotope.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);_remove.call(this,elems);if(!removeItems||!removeItems.length){return}for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];removeFrom(item,this.filteredItems)}};Isotope.prototype.shuffle=function(){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.sortData.random=Math.random()}this.options.sortBy="random";this._sort();this._layout()};Isotope.prototype._noTransition=function(fn){var transitionDuration=this.options.transitionDuration;this.options.transitionDuration=0;var returnValue=fn.call(this);this.options.transitionDuration=transitionDuration;return returnValue};Isotope.prototype.getFilteredItemElements=function(){var elems=[];for(var i=0,len=this.filteredItems.length;i<len;i++){elems.push(this.filteredItems[i].element)}return elems};return Isotope}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","./item","./layout-mode","./layout-modes/masonry","./layout-modes/fit-rows","./layout-modes/vertical"],isotopeDefinition)}else if(typeof exports==="object"){module.exports=isotopeDefinition(require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical"))}else{window.Isotope=isotopeDefinition(window.Outlayer,window.getSize,window.matchesSelector,window.Isotope.Item,window.Isotope.LayoutMode)}})(window)},{outlayer:"node_modules/isotope-layout/node_modules/outlayer/outlayer","get-size":"node_modules/isotope-layout/node_modules/get-size/get-size","desandro-matches-selector":"node_modules/isotope-layout/node_modules/desandro-matches-selector/matches-selector","./item":"node_modules/isotope-layout/js/item","./layout-mode":"node_modules/isotope-layout/js/layout-mode","./layout-modes/masonry":"node_modules/isotope-layout/js/layout-modes/masonry","./layout-modes/fit-rows":"node_modules/isotope-layout/js/layout-modes/fit-rows","./layout-modes/vertical":"node_modules/isotope-layout/js/layout-modes/vertical"});require.register("node_modules/isotope-layout/js/item",function(require,module,exports){(function(window){"use strict";function itemDefinition(Outlayer){function Item(){Outlayer.Item.apply(this,arguments)}Item.prototype=new Outlayer.Item;Item.prototype._create=function(){this.id=this.layout.itemGUID++;Outlayer.Item.prototype._create.call(this);this.sortData={}};Item.prototype.updateSortData=function(){if(this.isIgnored){return}this.sortData.id=this.id;this.sortData["original-order"]=this.id;this.sortData.random=Math.random();var getSortData=this.layout.options.getSortData;var sorters=this.layout._sorters;for(var key in getSortData){var sorter=sorters[key];this.sortData[key]=sorter(this.element,this)}};var _destroy=Item.prototype.destroy;Item.prototype.destroy=function(){_destroy.apply(this,arguments);this.css({display:""})};return Item}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer"],itemDefinition)}else if(typeof exports==="object"){module.exports=itemDefinition(require("outlayer"))}else{window.Isotope=window.Isotope||{};window.Isotope.Item=itemDefinition(window.Outlayer)}})(window)},{outlayer:"node_modules/isotope-layout/node_modules/outlayer/outlayer"});require.register("node_modules/isotope-layout/js/layout-mode",function(require,module,exports){(function(window){"use strict";function layoutModeDefinition(getSize,Outlayer){function LayoutMode(isotope){this.isotope=isotope;if(isotope){this.options=isotope.options[this.namespace];this.element=isotope.element;this.items=isotope.filteredItems;this.size=isotope.size}}(function(){var facadeMethods=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"];for(var i=0,len=facadeMethods.length;i<len;i++){var methodName=facadeMethods[i];LayoutMode.prototype[methodName]=getOutlayerMethod(methodName)}function getOutlayerMethod(methodName){return function(){return Outlayer.prototype[methodName].apply(this.isotope,arguments)}}})();LayoutMode.prototype.needsVerticalResizeLayout=function(){var size=getSize(this.isotope.element);var hasSizes=this.isotope.size&&size;return hasSizes&&size.innerHeight!==this.isotope.size.innerHeight};LayoutMode.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)};LayoutMode.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")};LayoutMode.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")};LayoutMode.prototype.getSegmentSize=function(segment,size){var segmentName=segment+size;var outerSize="outer"+size;this._getMeasurement(segmentName,outerSize);if(this[segmentName]){return}var firstItemSize=this.getFirstItemSize();this[segmentName]=firstItemSize&&firstItemSize[outerSize]||this.isotope.size["inner"+size]};LayoutMode.prototype.getFirstItemSize=function(){var firstItem=this.isotope.filteredItems[0];return firstItem&&firstItem.element&&getSize(firstItem.element)};LayoutMode.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)};LayoutMode.prototype.getSize=function(){this.isotope.getSize();this.size=this.isotope.size};LayoutMode.modes={};LayoutMode.create=function(namespace,options){function Mode(){LayoutMode.apply(this,arguments)}Mode.prototype=new LayoutMode;if(options){Mode.options=options}Mode.prototype.namespace=namespace;LayoutMode.modes[namespace]=Mode;return Mode};return LayoutMode}if(typeof define==="function"&&define.amd){define(["get-size/get-size","outlayer/outlayer"],layoutModeDefinition)}else if(typeof exports==="object"){module.exports=layoutModeDefinition(require("get-size"),require("outlayer"))}else{window.Isotope=window.Isotope||{};window.Isotope.LayoutMode=layoutModeDefinition(window.getSize,window.Outlayer)}})(window)},{"get-size":"node_modules/isotope-layout/node_modules/get-size/get-size",outlayer:"node_modules/isotope-layout/node_modules/outlayer/outlayer"});require.register("node_modules/isotope-layout/js/layout-modes/fit-rows",function(require,module,exports){(function(window){"use strict";function fitRowsDefinition(LayoutMode){var FitRows=LayoutMode.create("fitRows");FitRows.prototype._resetLayout=function(){this.x=0;this.y=0;this.maxY=0;this._getMeasurement("gutter","outerWidth")};FitRows.prototype._getItemLayoutPosition=function(item){item.getSize();var itemWidth=item.size.outerWidth+this.gutter;var containerWidth=this.isotope.size.innerWidth+this.gutter;if(this.x!==0&&itemWidth+this.x>containerWidth){this.x=0;this.y=this.maxY}var position={x:this.x,y:this.y};this.maxY=Math.max(this.maxY,this.y+item.size.outerHeight);this.x+=itemWidth;return position};FitRows.prototype._getContainerSize=function(){return{height:this.maxY}};return FitRows}if(typeof define==="function"&&define.amd){define(["../layout-mode"],fitRowsDefinition)}else if(typeof exports==="object"){module.exports=fitRowsDefinition(require("../layout-mode"))}else{fitRowsDefinition(window.Isotope.LayoutMode)}})(window)},{"../layout-mode":"node_modules/isotope-layout/js/layout-mode"});require.register("node_modules/isotope-layout/js/layout-modes/masonry",function(require,module,exports){(function(window){"use strict";function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}function masonryDefinition(LayoutMode,Masonry){var MasonryMode=LayoutMode.create("masonry");var _getElementOffset=MasonryMode.prototype._getElementOffset;var layout=MasonryMode.prototype.layout;var _getMeasurement=MasonryMode.prototype._getMeasurement;extend(MasonryMode.prototype,Masonry.prototype);MasonryMode.prototype._getElementOffset=_getElementOffset;MasonryMode.prototype.layout=layout;MasonryMode.prototype._getMeasurement=_getMeasurement;var measureColumns=MasonryMode.prototype.measureColumns;MasonryMode.prototype.measureColumns=function(){this.items=this.isotope.filteredItems;measureColumns.call(this)};var _manageStamp=MasonryMode.prototype._manageStamp;MasonryMode.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft;this.options.isOriginTop=this.isotope.options.isOriginTop;_manageStamp.apply(this,arguments)};return MasonryMode}if(typeof define==="function"&&define.amd){define(["../layout-mode","masonry/masonry"],masonryDefinition)}else if(typeof exports==="object"){module.exports=masonryDefinition(require("../layout-mode"),require("masonry-layout"))}else{masonryDefinition(window.Isotope.LayoutMode,window.Masonry)}})(window)},{"../layout-mode":"node_modules/isotope-layout/js/layout-mode","masonry-layout":"node_modules/isotope-layout/node_modules/masonry-layout/masonry"});require.register("node_modules/isotope-layout/js/layout-modes/vertical",function(require,module,exports){(function(window){"use strict";function verticalDefinition(LayoutMode){var Vertical=LayoutMode.create("vertical",{horizontalAlignment:0});Vertical.prototype._resetLayout=function(){this.y=0};Vertical.prototype._getItemLayoutPosition=function(item){item.getSize();var x=(this.isotope.size.innerWidth-item.size.outerWidth)*this.options.horizontalAlignment;var y=this.y;this.y+=item.size.outerHeight;return{x:x,y:y}};Vertical.prototype._getContainerSize=function(){return{height:this.y}};return Vertical}if(typeof define==="function"&&define.amd){define(["../layout-mode"],verticalDefinition)}else if(typeof exports==="object"){module.exports=verticalDefinition(require("../layout-mode"))}else{verticalDefinition(window.Isotope.LayoutMode)}})(window)},{"../layout-mode":"node_modules/isotope-layout/js/layout-mode"});require.register("node_modules/isotope-layout/node_modules/desandro-matches-selector/matches-selector",function(require,module,exports){(function(ElemProto){"use strict";var matchesMethod=function(){if(ElemProto.matchesSelector){return"matchesSelector"}var prefixes=["webkit","moz","ms","o"];for(var i=0,len=prefixes.length;i<len;i++){var prefix=prefixes[i];var method=prefix+"MatchesSelector";if(ElemProto[method]){return method}}}();function match(elem,selector){return elem[matchesMethod](selector)}function checkParent(elem){if(elem.parentNode){return}var fragment=document.createDocumentFragment();fragment.appendChild(elem)}function query(elem,selector){checkParent(elem);var elems=elem.parentNode.querySelectorAll(selector);for(var i=0,len=elems.length;i<len;i++){if(elems[i]===elem){return true}}return false}function matchChild(elem,selector){checkParent(elem);return match(elem,selector)}var matchesSelector;if(matchesMethod){var div=document.createElement("div");var supportsOrphans=match(div,"div");matchesSelector=supportsOrphans?match:matchChild}else{matchesSelector=query}if(typeof define==="function"&&define.amd){define(function(){return matchesSelector})}else if(typeof exports==="object"){module.exports=matchesSelector}else{window.matchesSelector=matchesSelector}})(Element.prototype)},{});require.register("node_modules/isotope-layout/node_modules/get-size/get-size",function(require,module,exports){(function(window,undefined){"use strict";function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf("%")===-1&&!isNaN(num);return isValid&&num}function noop(){}var logError=typeof console==="undefined"?noop:function(message){console.error(message)};var measurements=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];size[measurement]=0}return size}function defineGetSize(getStyleProperty){var isSetup=false;var getStyle,boxSizingProp,isBoxSizeOuter;function setup(){if(isSetup){return}isSetup=true;var getComputedStyle=window.getComputedStyle;getStyle=function(){var getStyleFn=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};return function getStyle(elem){var style=getStyleFn(elem);if(!style){logError("Style returned "+style+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1")}return style}}();boxSizingProp=getStyleProperty("boxSizing");if(boxSizingProp){var div=document.createElement("div");div.style.width="200px";div.style.padding="1px 2px 3px 4px";div.style.borderStyle="solid";div.style.borderWidth="1px 2px 3px 4px";div.style[boxSizingProp]="border-box";var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=getStyleSize(style.width)===200;body.removeChild(div)}}function getSize(elem){setup();if(typeof elem==="string"){elem=document.querySelector(elem)}if(!elem||typeof elem!=="object"||!elem.nodeType){return}var style=getStyle(elem);if(style.display==="none"){return getZeroSize()}var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=!!(boxSizingProp&&style[boxSizingProp]&&style[boxSizingProp]==="border-box");for(var i=0,len=measurements.length;i<len;i++){var measurement=measurements[i];var value=style[measurement];value=mungeNonPixel(elem,value);var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0}var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+(isBorderBoxSizeOuter?0:paddingWidth+borderWidth)}var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+(isBorderBoxSizeOuter?0:paddingHeight+borderHeight)}size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size}function mungeNonPixel(elem,value){if(window.getComputedStyle||value.indexOf("%")===-1){return value}var style=elem.style;var left=style.left;var rs=elem.runtimeStyle;var rsLeft=rs&&rs.left;if(rsLeft){rs.left=elem.currentStyle.left}style.left=value;value=style.pixelLeft;style.left=left;if(rsLeft){rs.left=rsLeft}return value}return getSize}if(typeof define==="function"&&define.amd){define(["get-style-property/get-style-property"],defineGetSize)}else if(typeof exports==="object"){module.exports=defineGetSize(require("desandro-get-style-property"))}else{window.getSize=defineGetSize(window.getStyleProperty)}})(window)},{"desandro-get-style-property":"node_modules/isotope-layout/node_modules/get-size/node_modules/desandro-get-style-property/get-style-property"});require.register("node_modules/isotope-layout/node_modules/get-size/node_modules/desandro-get-style-property/get-style-property",function(require,module,exports){(function(window){"use strict";var prefixes="Webkit Moz ms Ms O".split(" ");var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return}if(typeof docElemStyle[propName]==="string"){return propName}propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==="string"){return prefixed}}}if(typeof define==="function"&&define.amd){define(function(){return getStyleProperty})}else if(typeof exports==="object"){module.exports=getStyleProperty}else{window.getStyleProperty=getStyleProperty}})(window)},{});require.register("node_modules/isotope-layout/node_modules/masonry-layout/masonry",function(require,module,exports){(function(window){"use strict";var indexOf=Array.prototype.indexOf?function(items,value){return items.indexOf(value)}:function(items,value){for(var i=0,len=items.length;i<len;i++){var item=items[i];if(item===value){return i}}return-1};function masonryDefinition(Outlayer,getSize){var Masonry=Outlayer.create("masonry");Masonry.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var i=this.cols;this.colYs=[];while(i--){this.colYs.push(0)}this.maxY=0};Masonry.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)};Masonry.prototype.getContainerWidth=function(){var container=this.options.isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth};Masonry.prototype._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?"round":"ceil";var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colGroup=this._getColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);var shortColIndex=indexOf(colGroup,minimumY);
var position={x:this.columnWidth*shortColIndex,y:minimumY};var setHeight=minimumY+item.size.outerHeight;var setSpan=this.cols+1-colGroup.length;for(var i=0;i<setSpan;i++){this.colYs[shortColIndex+i]=setHeight}return position};Masonry.prototype._getColGroup=function(colSpan){if(colSpan<2){return this.colYs}var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){var groupColYs=this.colYs.slice(i,i+colSpan);colGroup[i]=Math.max.apply(Math,groupColYs)}return colGroup};Masonry.prototype._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var firstX=this.options.isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var stampMaxY=(this.options.isOriginTop?offset.top:offset.bottom)+stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i])}};Masonry.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this.options.isFitWidth){size.width=this._getContainerFitWidth()}return size};Masonry.prototype._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break}unusedCols++}return(this.cols-unusedCols)*this.columnWidth-this.gutter};Masonry.prototype.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!==this.containerWidth};return Masonry}if(typeof define==="function"&&define.amd){define(["outlayer/outlayer","get-size/get-size"],masonryDefinition)}else if(typeof exports==="object"){module.exports=masonryDefinition(require("outlayer"),require("get-size"))}else{window.Masonry=masonryDefinition(window.Outlayer,window.getSize)}})(window)},{outlayer:"node_modules/isotope-layout/node_modules/outlayer/outlayer","get-size":"node_modules/isotope-layout/node_modules/get-size/get-size"});require.register("node_modules/isotope-layout/node_modules/outlayer/item",function(require,module,exports){(function(window){"use strict";var getComputedStyle=window.getComputedStyle;var getStyle=getComputedStyle?function(elem){return getComputedStyle(elem,null)}:function(elem){return elem.currentStyle};function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}function isEmptyObj(obj){for(var prop in obj){return false}prop=null;return true}function toDash(str){return str.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function outlayerItemDefinition(EventEmitter,getSize,getStyleProperty){var transitionProperty=getStyleProperty("transition");var transformProperty=getStyleProperty("transform");var supportsCSS3=transitionProperty&&transformProperty;var is3d=!!getStyleProperty("perspective");var transitionEndEvent={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[transitionProperty];var prefixableProperties=["transform","transition","transitionDuration","transitionProperty"];var vendorProperties=function(){var cache={};for(var i=0,len=prefixableProperties.length;i<len;i++){var prop=prefixableProperties[i];var supportedProp=getStyleProperty(prop);if(supportedProp&&supportedProp!==prop){cache[prop]=supportedProp}}return cache}();function Item(element,layout){if(!element){return}this.element=element;this.layout=layout;this.position={x:0,y:0};this._create()}extend(Item.prototype,EventEmitter.prototype);Item.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};Item.prototype.handleEvent=function(event){var method="on"+event.type;if(this[method]){this[method](event)}};Item.prototype.getSize=function(){this.size=getSize(this.element)};Item.prototype.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop]}};Item.prototype.getPosition=function(){var style=getStyle(this.element);var layoutOptions=this.layout.options;var isOriginLeft=layoutOptions.isOriginLeft;var isOriginTop=layoutOptions.isOriginTop;var x=parseInt(style[isOriginLeft?"left":"right"],10);var y=parseInt(style[isOriginTop?"top":"bottom"],10);x=isNaN(x)?0:x;y=isNaN(y)?0:y;var layoutSize=this.layout.size;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y};Item.prototype.layoutPosition=function(){var layoutSize=this.layout.size;var layoutOptions=this.layout.options;var style={};if(layoutOptions.isOriginLeft){style.left=this.position.x+layoutSize.paddingLeft+"px";style.right=""}else{style.right=this.position.x+layoutSize.paddingRight+"px";style.left=""}if(layoutOptions.isOriginTop){style.top=this.position.y+layoutSize.paddingTop+"px";style.bottom=""}else{style.bottom=this.position.y+layoutSize.paddingBottom+"px";style.top=""}this.css(style);this.emitEvent("layout",[this])};var translate=is3d?function(x,y){return"translate3d("+x+"px, "+y+"px, 0)"}:function(x,y){return"translate("+x+"px, "+y+"px)"};Item.prototype._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var compareX=parseInt(x,10);var compareY=parseInt(y,10);var didNotMove=compareX===this.position.x&&compareY===this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return}var transX=x-curX;var transY=y-curY;var transitionStyle={};var layoutOptions=this.layout.options;transX=layoutOptions.isOriginLeft?transX:-transX;transY=layoutOptions.isOriginTop?transY:-transY;transitionStyle.transform=translate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})};Item.prototype.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition()};Item.prototype.moveTo=supportsCSS3?Item.prototype._transitionTo:Item.prototype.goTo;Item.prototype.setPosition=function(x,y){this.position.x=parseInt(x,10);this.position.y=parseInt(y,10)};Item.prototype._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to)}for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this)}};Item.prototype._transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return}var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop]}for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true}}if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null}this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true};var itemTransitionProperties=transformProperty&&toDash(transformProperty)+",opacity";Item.prototype.enableTransition=function(){if(this.isTransitioning){return}this.css({transitionProperty:itemTransitionProperties,transitionDuration:this.layout.options.transitionDuration});this.element.addEventListener(transitionEndEvent,this,false)};Item.prototype.transition=Item.prototype[transitionProperty?"_transition":"_nonTransition"];Item.prototype.onwebkitTransitionEnd=function(event){this.ontransitionend(event)};Item.prototype.onotransitionend=function(event){this.ontransitionend(event)};var dashedVendorProperties={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};Item.prototype.ontransitionend=function(event){if(event.target!==this.element){return}var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition()}if(propertyName in _transition.clean){this.element.style[event.propertyName]="";delete _transition.clean[propertyName]}if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName]}this.emitEvent("transitionEnd",[this])};Item.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false};Item.prototype._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]=""}this.css(cleanStyle)};var cleanTransitionStyle={transitionProperty:"",transitionDuration:""};Item.prototype.removeTransitionStyles=function(){this.css(cleanTransitionStyle)};Item.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])};Item.prototype.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}var _this=this;this.on("transitionEnd",function(){_this.removeElem();return true});this.hide()};Item.prototype.reveal=function(){delete this.isHidden;this.css({display:""});var options=this.layout.options;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true})};Item.prototype.hide=function(){this.isHidden=true;this.css({display:""});var options=this.layout.options;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:"none"})}}}})};Item.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})};return Item}if(typeof define==="function"&&define.amd){define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],outlayerItemDefinition)}else if(typeof exports==="object"){module.exports=outlayerItemDefinition(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"))}else{window.Outlayer={};window.Outlayer.Item=outlayerItemDefinition(window.EventEmitter,window.getSize,window.getStyleProperty)}})(window)},{"wolfy87-eventemitter":"node_modules/isotope-layout/node_modules/outlayer/node_modules/wolfy87-eventemitter/EventEmitter","get-size":"node_modules/isotope-layout/node_modules/get-size/get-size","desandro-get-style-property":"node_modules/isotope-layout/node_modules/outlayer/node_modules/desandro-get-style-property/get-style-property"});require.register("node_modules/isotope-layout/node_modules/outlayer/node_modules/desandro-get-style-property/get-style-property",function(require,module,exports){(function(window){"use strict";var prefixes="Webkit Moz ms Ms O".split(" ");var docElemStyle=document.documentElement.style;function getStyleProperty(propName){if(!propName){return}if(typeof docElemStyle[propName]==="string"){return propName}propName=propName.charAt(0).toUpperCase()+propName.slice(1);var prefixed;for(var i=0,len=prefixes.length;i<len;i++){prefixed=prefixes[i]+propName;if(typeof docElemStyle[prefixed]==="string"){return prefixed}}}if(typeof define==="function"&&define.amd){define(function(){return getStyleProperty})}else if(typeof exports==="object"){module.exports=getStyleProperty}else{window.getStyleProperty=getStyleProperty}})(window)},{});require.register("node_modules/isotope-layout/node_modules/outlayer/node_modules/doc-ready/doc-ready",function(require,module,exports){(function(window){"use strict";var document=window.document;var queue=[];function docReady(fn){if(typeof fn!=="function"){return}if(docReady.isReady){fn()}else{queue.push(fn)}}docReady.isReady=false;function init(event){var isIE8NotReady=event.type==="readystatechange"&&document.readyState!=="complete";if(docReady.isReady||isIE8NotReady){return}docReady.isReady=true;for(var i=0,len=queue.length;i<len;i++){var fn=queue[i];fn()}}function defineDocReady(eventie){eventie.bind(document,"DOMContentLoaded",init);eventie.bind(document,"readystatechange",init);eventie.bind(window,"load",init);return docReady}if(typeof define==="function"&&define.amd){docReady.isReady=typeof requirejs==="function";define(["eventie/eventie"],defineDocReady)}else if(typeof exports==="object"){module.exports=defineDocReady(require("eventie"))}else{window.docReady=defineDocReady(window.eventie)}})(window)},{eventie:"node_modules/isotope-layout/node_modules/outlayer/node_modules/eventie/eventie"});require.register("node_modules/isotope-layout/node_modules/outlayer/node_modules/eventie/eventie",function(require,module,exports){(function(window){"use strict";var docElem=document.documentElement;var bind=function(){};function getIEEvent(obj){var event=window.event;event.target=event.target||event.srcElement||obj;return event}if(docElem.addEventListener){bind=function(obj,type,fn){obj.addEventListener(type,fn,false)}}else if(docElem.attachEvent){bind=function(obj,type,fn){obj[type+fn]=fn.handleEvent?function(){var event=getIEEvent(obj);fn.handleEvent.call(fn,event)}:function(){var event=getIEEvent(obj);fn.call(obj,event)};obj.attachEvent("on"+type,obj[type+fn])}}var unbind=function(){};if(docElem.removeEventListener){unbind=function(obj,type,fn){obj.removeEventListener(type,fn,false)}}else if(docElem.detachEvent){unbind=function(obj,type,fn){obj.detachEvent("on"+type,obj[type+fn]);try{delete obj[type+fn]}catch(err){obj[type+fn]=undefined}}}var eventie={bind:bind,unbind:unbind};if(typeof define==="function"&&define.amd){define(eventie)}else if(typeof exports==="object"){module.exports=eventie}else{window.eventie=eventie}})(window)},{});require.register("node_modules/isotope-layout/node_modules/outlayer/node_modules/wolfy87-eventemitter/EventEmitter",function(require,module,exports){(function(){"use strict";function EventEmitter(){}var proto=EventEmitter.prototype;var exports=this;var originalGlobalValue=exports.EventEmitter;function indexOfListener(listeners,listener){var i=listeners.length;while(i--){if(listeners[i].listener===listener){return i}}return-1}function alias(name){return function aliasClosure(){return this[name].apply(this,arguments)}}proto.getListeners=function getListeners(evt){var events=this._getEvents();var response;var key;if(evt instanceof RegExp){response={};for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){response[key]=events[key]}}}else{response=events[evt]||(events[evt]=[])}return response};proto.flattenListeners=function flattenListeners(listeners){var flatListeners=[];var i;for(i=0;i<listeners.length;i+=1){flatListeners.push(listeners[i].listener)}return flatListeners};proto.getListenersAsObject=function getListenersAsObject(evt){var listeners=this.getListeners(evt);var response;if(listeners instanceof Array){response={};response[evt]=listeners}return response||listeners};proto.addListener=function addListener(evt,listener){var listeners=this.getListenersAsObject(evt);var listenerIsWrapped=typeof listener==="object";var key;for(key in listeners){if(listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1){listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:false})}}return this};proto.on=alias("addListener");proto.addOnceListener=function addOnceListener(evt,listener){return this.addListener(evt,{listener:listener,once:true})};proto.once=alias("addOnceListener");proto.defineEvent=function defineEvent(evt){this.getListeners(evt);return this};proto.defineEvents=function defineEvents(evts){for(var i=0;i<evts.length;i+=1){this.defineEvent(evts[i])}return this};proto.removeListener=function removeListener(evt,listener){var listeners=this.getListenersAsObject(evt);var index;var key;for(key in listeners){if(listeners.hasOwnProperty(key)){index=indexOfListener(listeners[key],listener);if(index!==-1){listeners[key].splice(index,1)}}}return this};proto.off=alias("removeListener");proto.addListeners=function addListeners(evt,listeners){return this.manipulateListeners(false,evt,listeners)};proto.removeListeners=function removeListeners(evt,listeners){return this.manipulateListeners(true,evt,listeners)};proto.manipulateListeners=function manipulateListeners(remove,evt,listeners){var i;var value;var single=remove?this.removeListener:this.addListener;var multiple=remove?this.removeListeners:this.addListeners;if(typeof evt==="object"&&!(evt instanceof RegExp)){for(i in evt){if(evt.hasOwnProperty(i)&&(value=evt[i])){if(typeof value==="function"){single.call(this,i,value)}else{multiple.call(this,i,value)}}}}else{i=listeners.length;while(i--){single.call(this,evt,listeners[i])}}return this};proto.removeEvent=function removeEvent(evt){var type=typeof evt;var events=this._getEvents();var key;if(type==="string"){delete events[evt]}else if(evt instanceof RegExp){for(key in events){if(events.hasOwnProperty(key)&&evt.test(key)){delete events[key]}}}else{delete this._events}return this};proto.removeAllListeners=alias("removeEvent");proto.emitEvent=function emitEvent(evt,args){var listeners=this.getListenersAsObject(evt);var listener;var i;var key;var response;for(key in listeners){if(listeners.hasOwnProperty(key)){i=listeners[key].length;while(i--){listener=listeners[key][i];if(listener.once===true){this.removeListener(evt,listener.listener)}response=listener.listener.apply(this,args||[]);if(response===this._getOnceReturnValue()){this.removeListener(evt,listener.listener)}}}}return this};proto.trigger=alias("emitEvent");proto.emit=function emit(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)};proto.setOnceReturnValue=function setOnceReturnValue(value){this._onceReturnValue=value;return this};proto._getOnceReturnValue=function _getOnceReturnValue(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue}else{return true}};proto._getEvents=function _getEvents(){return this._events||(this._events={})};EventEmitter.noConflict=function noConflict(){exports.EventEmitter=originalGlobalValue;return EventEmitter};if(typeof define==="function"&&define.amd){define(function(){return EventEmitter})}else if(typeof module==="object"&&module.exports){module.exports=EventEmitter}else{exports.EventEmitter=EventEmitter}}).call(this)},{});require.register("node_modules/isotope-layout/node_modules/outlayer/outlayer",function(require,module,exports){(function(window){"use strict";var document=window.document;var console=window.console;var jQuery=window.jQuery;var noop=function(){};function extend(a,b){for(var prop in b){a[prop]=b[prop]}return a}var objToString=Object.prototype.toString;function isArray(obj){return objToString.call(obj)==="[object Array]"}function makeArray(obj){var ary=[];if(isArray(obj)){ary=obj}else if(obj&&typeof obj.length==="number"){for(var i=0,len=obj.length;i<len;i++){ary.push(obj[i])}}else{ary.push(obj)}return ary}var isElement=typeof HTMLElement==="function"||typeof HTMLElement==="object"?function isElementDOM2(obj){return obj instanceof HTMLElement}:function isElementQuirky(obj){return obj&&typeof obj==="object"&&obj.nodeType===1&&typeof obj.nodeName==="string"};var indexOf=Array.prototype.indexOf?function(ary,obj){return ary.indexOf(obj)}:function(ary,obj){for(var i=0,len=ary.length;i<len;i++){if(ary[i]===obj){return i}}return-1};function removeFrom(obj,ary){var index=indexOf(ary,obj);if(index!==-1){ary.splice(index,1)}}function toDashed(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+"-"+$2}).toLowerCase()}function outlayerDefinition(eventie,docReady,EventEmitter,getSize,matchesSelector,Item){var GUID=0;var instances={};function Outlayer(element,options){if(typeof element==="string"){element=document.querySelector(element)}if(!element||!isElement(element)){if(console){console.error("Bad "+this.constructor.namespace+" element: "+element)}return}this.element=element;this.options=extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();if(this.options.isInitLayout){this.layout()}}Outlayer.namespace="outlayer";Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:"relative"},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};extend(Outlayer.prototype,EventEmitter.prototype);Outlayer.prototype.option=function(opts){extend(this.options,opts)};Outlayer.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);extend(this.element.style,this.options.containerStyle);if(this.options.isResizeBound){this.bindResize()}};Outlayer.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)};Outlayer.prototype._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0,len=itemElems.length;i<len;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item)}return items};Outlayer.prototype._filterFindItemElements=function(elems){elems=makeArray(elems);var itemSelector=this.options.itemSelector;var itemElems=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];if(!isElement(elem)){continue}if(itemSelector){if(matchesSelector(elem,itemSelector)){itemElems.push(elem)}var childElems=elem.querySelectorAll(itemSelector);for(var j=0,jLen=childElems.length;j<jLen;j++){itemElems.push(childElems[j])}}else{itemElems.push(elem)}}return itemElems};Outlayer.prototype.getItemElements=function(){var elems=[];for(var i=0,len=this.items.length;i<len;i++){elems.push(this.items[i].element)}return elems};Outlayer.prototype.layout=function(){this._resetLayout();this._manageStamps();var isInstant=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true};Outlayer.prototype._init=Outlayer.prototype.layout;Outlayer.prototype._resetLayout=function(){this.getSize()};Outlayer.prototype.getSize=function(){this.size=getSize(this.element)};Outlayer.prototype._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0}else{if(typeof option==="string"){elem=this.element.querySelector(option)}else if(isElement(option)){elem=option}this[measurement]=elem?getSize(elem)[size]:option}};Outlayer.prototype.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout()};Outlayer.prototype._getItemsForLayout=function(items){var layoutItems=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];if(!item.isIgnored){layoutItems.push(item)}}return layoutItems};Outlayer.prototype._layoutItems=function(items,isInstant){var _this=this;function onItemsLayout(){_this.emitEvent("layoutComplete",[_this,items])}if(!items||!items.length){onItemsLayout();return}this._itemsOn(items,"layout",onItemsLayout);var queue=[];for(var i=0,len=items.length;i<len;i++){var item=items[i];var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position)}this._processLayoutQueue(queue)};Outlayer.prototype._getItemLayoutPosition=function(){return{x:0,y:0}};Outlayer.prototype._processLayoutQueue=function(queue){for(var i=0,len=queue.length;i<len;i++){var obj=queue[i];this._positionItem(obj.item,obj.x,obj.y,obj.isInstant)}};Outlayer.prototype._positionItem=function(item,x,y,isInstant){if(isInstant){item.goTo(x,y)}else{item.moveTo(x,y)}};Outlayer.prototype._postLayout=function(){this.resizeContainer()};Outlayer.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return}var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false)}};Outlayer.prototype._getContainerSize=noop;Outlayer.prototype._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return}var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+elemSize.borderTopWidth+elemSize.borderBottomWidth}measure=Math.max(measure,0);this.element.style[isWidth?"width":"height"]=measure+"px"};Outlayer.prototype._itemsOn=function(items,eventName,callback){var doneCount=0;var count=items.length;var _this=this;function tick(){doneCount++;if(doneCount===count){callback.call(_this)}return true}for(var i=0,len=items.length;i<len;i++){var item=items[i];item.on(eventName,tick)}};Outlayer.prototype.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true}};Outlayer.prototype.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored}};Outlayer.prototype.stamp=function(elems){elems=this._find(elems);if(!elems){return}this.stamps=this.stamps.concat(elems);for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];this.ignore(elem)}};Outlayer.prototype.unstamp=function(elems){elems=this._find(elems);if(!elems){return}for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];removeFrom(elem,this.stamps);this.unignore(elem)}};Outlayer.prototype._find=function(elems){if(!elems){return}if(typeof elems==="string"){elems=this.element.querySelectorAll(elems)}elems=makeArray(elems);return elems};Outlayer.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return}this._getBoundingRect();for(var i=0,len=this.stamps.length;i<len;i++){var stamp=this.stamps[i];this._manageStamp(stamp)}};Outlayer.prototype._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)}};Outlayer.prototype._manageStamp=noop;Outlayer.prototype._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset};Outlayer.prototype.handleEvent=function(event){var method="on"+event.type;if(this[method]){this[method](event)}};Outlayer.prototype.bindResize=function(){if(this.isResizeBound){return}eventie.bind(window,"resize",this);this.isResizeBound=true};Outlayer.prototype.unbindResize=function(){if(this.isResizeBound){eventie.unbind(window,"resize",this)}this.isResizeBound=false};Outlayer.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)}var _this=this;function delayed(){_this.resize();delete _this.resizeTimeout}this.resizeTimeout=setTimeout(delayed,100)};Outlayer.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return}this.layout()};Outlayer.prototype.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth};Outlayer.prototype.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items)}return items};Outlayer.prototype.appended=function(elems){var items=this.addItems(elems);if(!items.length){return}this.layoutItems(items,true);this.reveal(items)};Outlayer.prototype.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return}var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems)};Outlayer.prototype.reveal=function(items){var len=items&&items.length;if(!len){return}for(var i=0;i<len;i++){var item=items[i];item.reveal()}};Outlayer.prototype.hide=function(items){var len=items&&items.length;if(!len){return}for(var i=0;i<len;i++){var item=items[i];item.hide()}};Outlayer.prototype.getItem=function(elem){for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];if(item.element===elem){return item}}};Outlayer.prototype.getItems=function(elems){if(!elems||!elems.length){return}var items=[];for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var item=this.getItem(elem);if(item){items.push(item)}}return items};Outlayer.prototype.remove=function(elems){elems=makeArray(elems);var removeItems=this.getItems(elems);if(!removeItems||!removeItems.length){return}this._itemsOn(removeItems,"remove",function(){this.emitEvent("removeComplete",[this,removeItems])});for(var i=0,len=removeItems.length;i<len;i++){var item=removeItems[i];item.remove();removeFrom(item,this.items)}};Outlayer.prototype.destroy=function(){var style=this.element.style;style.height="";style.position="";style.width="";for(var i=0,len=this.items.length;i<len;i++){var item=this.items[i];item.destroy()}this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace)}};Outlayer.data=function(elem){var id=elem&&elem.outlayerGUID;return id&&instances[id]};Outlayer.create=function(namespace,options){function Layout(){Outlayer.apply(this,arguments)}if(Object.create){Layout.prototype=Object.create(Outlayer.prototype)}else{extend(Layout.prototype,Outlayer.prototype)}Layout.prototype.constructor=Layout;Layout.defaults=extend({},Outlayer.defaults);extend(Layout.defaults,options);Layout.prototype.settings={};Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=function LayoutItem(){Item.apply(this,arguments)};Layout.Item.prototype=new Item;docReady(function(){var dashedNamespace=toDashed(namespace);var elems=document.querySelectorAll(".js-"+dashedNamespace);var dataAttr="data-"+dashedNamespace+"-options";for(var i=0,len=elems.length;i<len;i++){var elem=elems[i];var attr=elem.getAttribute(dataAttr);var options;try{options=attr&&JSON.parse(attr)}catch(error){if(console){console.error("Error parsing "+dataAttr+" on "+elem.nodeName.toLowerCase()+(elem.id?"#"+elem.id:"")+": "+error)}continue}var instance=new Layout(elem,options);if(jQuery){jQuery.data(elem,namespace,instance)}}});if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout)}return Layout};Outlayer.Item=Item;return Outlayer}if(typeof define==="function"&&define.amd){define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],outlayerDefinition)}else if(typeof exports==="object"){module.exports=outlayerDefinition(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item"))}else{window.Outlayer=outlayerDefinition(window.eventie,window.docReady,window.EventEmitter,window.getSize,window.matchesSelector,window.Outlayer.Item)}})(window)},{eventie:"node_modules/isotope-layout/node_modules/outlayer/node_modules/eventie/eventie","doc-ready":"node_modules/isotope-layout/node_modules/outlayer/node_modules/doc-ready/doc-ready","wolfy87-eventemitter":"node_modules/isotope-layout/node_modules/outlayer/node_modules/wolfy87-eventemitter/EventEmitter","get-size":"node_modules/isotope-layout/node_modules/get-size/get-size","desandro-matches-selector":"node_modules/isotope-layout/node_modules/desandro-matches-selector/matches-selector","./item":"node_modules/isotope-layout/node_modules/outlayer/item"});require.register("node_modules/ways-browser/lib/hash",function(require,module,exports){var Event,Hash,PseudoHistory,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");PseudoHistory=function(_super){__extends(PseudoHistory,_super);
function PseudoHistory(){_ref=PseudoHistory.__super__.constructor.apply(this,arguments);return _ref}PseudoHistory.prototype.state=null;return PseudoHistory}(Array);module.exports=Hash=function(_super){__extends(Hash,_super);Hash.prototype.history=null;function Hash(){var hash,pathname,_this=this;this.history=new PseudoHistory;hash=window.location.hash;pathname=window.location.pathname;if(hash===""){if(pathname.length>1){window.location.href="/#"+pathname}else{window.location.href="#/"}}window.attachEvent("onhashchange",function(){return _this.emit("url:change",_this.pathname())},false)}Hash.prototype.pathname=function(){return window.location.hash};Hash.prototype.push=function(url,title,state){this.history.push(this.history.state=state);window.location.hash=url;if(title!=null){document.title=title}return this.emit("url:change",this.pathname())};Hash.prototype.replace=function(url,title,state){this.history[this.history.length-1]=this.history.state=state;if(title!=null){document.title=title}return window.location.hash.replace(url)};return Hash}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens"});require.register("node_modules/ways-browser/lib/history",function(require,module,exports){var Event,History,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");module.exports=History=function(_super){__extends(History,_super);History.prototype.history=window.history;function History(){var _ref,_this=this;if((_ref=window.location.hash)!=null?_ref.length:void 0){this.replace(window.location.hash.substr(1))}window.addEventListener("popstate",function(){var popped;if(initial===_this.pathname()&&!popped){return popped=true}return _this.emit("url:change",window.location.pathname)},false)}History.prototype.pathname=function(){return window.location.pathname};History.prototype.push=function(url,title,state){window.history.pushState(state,title,url);if(title!=null){document.title=title}return this.emit("url:change",window.location.pathname)};History.prototype.replace=function(url,title,state){window.history.replaceState(state,title,url);if(title!=null){return document.title=title}};return History}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens"});require.register("node_modules/ways-browser/lib/index",function(require,module,exports){var Event,Hash,History,Index,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Event=require("happens");History=require("./history");Hash=require("./hash");module.exports=Index=function(_super){__extends(Index,_super);Index.prototype.api=null;function Index(){var _this=this;if(window.history.pushState!=null){this.api=new History}else{this.api=new Hash}this.api.on("url:change",function(pathname){return _this.emit("url:change",pathname)});this.history=this.api.history}Index.prototype.pathname=function(){return this.api.pathname()};Index.prototype.push=function(url,title,state){return this.api.push(url,title,state)};Index.prototype.replace=function(url,title,state){return this.api.replace(url,title,state)};return Index}(Event)},{happens:"node_modules/ways-browser/node_modules/happens/lib/happens","./history":"node_modules/ways-browser/lib/history","./hash":"node_modules/ways-browser/lib/hash"});require.register("node_modules/ways-browser/node_modules/happens/lib/happens",function(require,module,exports){var Happens,__slice=[].slice;module.exports=Happens=function(){function Happens(){}Happens.prototype.on=function(key,callback){var pool;pool=this.__listeners||(this.__listeners=[]);return(pool[key]||(pool[key]=[])).push(callback)};Happens.prototype.off=function(key,callback){var pool,_ref;if((pool=(_ref=this.__listeners)!=null?_ref[key]:void 0)!=null){return pool.splice(pool.indexOf(callback),1)}};Happens.prototype.once=function(key,callback){var wrapper,_this=this;return this.on(key,wrapper=function(){_this.off(key,wrapper);return callback.apply(_this,arguments)})};Happens.prototype.emit=function(){var args,key,listener,pool,_i,_len,_ref,_ref1,_results;key=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if((pool=(_ref=this.__listeners)!=null?_ref[key]:void 0)!=null){_ref1=pool.slice(0);_results=[];for(_i=0,_len=_ref1.length;_i<_len;_i++){listener=_ref1[_i];_results.push(listener.apply(this,args))}return _results}};Happens.mixin=function(target){var prop,_results;_results=[];for(prop in this.prototype){_results.push(target[prop]=this.prototype[prop])}return _results};return Happens}()},{});require.register("node_modules/ways/lib/flow",function(require,module,exports){var happens=require("happens"),fluid=require("./fluid");var find=function(arr,filter){for(var item,i=0,len=arr.length;i<len;i++){if(filter(item=arr[i])){return item}}};var reject=function(arr,filter){for(var item,copy=[],i=0,len=arr.length;i<len;i++){if(!filter(item=arr[i])){copy.push(item)}}return copy};module.exports=function(routes,mode){return new Flow(routes,mode)};function Flow(routes,mode){happens(this);this.routes=routes;this.mode=mode;this.deads=[];this.actives=[];this.pendings=[];this.status="free"}Flow.prototype.run=function(url,route){var flu,self=this;if(this.status=="busy")this.actives.splice(-1,1);this.emit("status:busy");this.deads=[];this.pendings=[];flu=fluid(route,url);this.filter_pendings(flu);this.filter_deads();this.status="busy";if(this.mode==="run+destroy"){this.run_pendings(function(){self.destroy_deads(function(){self.status="free";self.emit("status:free",self.mode)})})}else if(this.mode==="destroy+run"){this.destroy_deads(function(){self.run_pendings(function(){self.status="free";self.emit("status:free",self.mode)})})}};Flow.prototype.find_dependency=function(parent){var route,flu;flu=find(this.actives,function(f){return f.url===parent.dependency});if(flu!=null)return flu;route=find(this.routes,function(r){return r.matcher.test(parent.route.dependency)});if(route!=null)return fluid(route,parent.dependency);return null};Flow.prototype.filter_pendings=function(parent){var err,flu,route,dep;this.pendings.unshift(parent);if(parent.dependency==null)return;if((flu=this.find_dependency(parent))!=null)return this.filter_pendings(flu);route=parent.route.pattern;dep=parent.dependency;err="Dependency '"+dep+"' not found for route '"+route+"'";throw new Error(err)};Flow.prototype.filter_deads=function(){var flu,is_pending,i,len;for(i=0,len=this.actives.length;i<len;i++){flu=this.actives[i];is_pending=find(this.pendings,function(f){return f.url===flu.url});if(!is_pending){this.deads.push(flu)}}};Flow.prototype.run_pendings=function(done){var flu,is_active,self=this;if(this.pendings.length===0)return done();flu=this.pendings.shift();is_active=find(this.actives,function(f){return f.url===flu.url});if(is_active)return this.run_pendings(done);this.actives.push(flu);this.emit("run:pending",flu.url);flu.run(function(){self.run_pendings(done)})};Flow.prototype.destroy_deads=function(done){var flu,self=this;if(this.deads.length===0)return done();flu=this.deads.pop();this.actives=reject(this.actives,function(f){return f.url===flu.url});flu.destroy(function(){self.destroy_deads(done)})}},{happens:"node_modules/ways/node_modules/happens/lib/happens","./fluid":"node_modules/ways/lib/fluid"});require.register("node_modules/ways/lib/fluid",function(require,module,exports){module.exports=function(route,url){return new Fluid(route,url)};function Fluid(route,url){this.route=route;this.url=url;if(route.dependency)this.dependency=route.computed_dependency(url)}Fluid.prototype.run=function(done){this.req=this.route.run(this.url,done)};Fluid.prototype.destroy=function(done){if(this.req)this.route.destroy(this.req,done)}},{});require.register("node_modules/ways/lib/way",function(require,module,exports){var _params_regex={named:/:\w+/g,splat:/\*\w+/g,optional:/\/(?:\:|\*)(\w+)\?/g};module.exports=function(pattern,runner,destroyer,dependency){return new Way(pattern,runner,destroyer,dependency)};function Way(pattern,runner,destroyer,dependency){this.matcher=null;this.pattern=pattern;this.runner=runner;this.destroyer=destroyer;this.dependency=dependency;var _params_regex={named:/:\w+/g,splat:/\*\w+/g,optional:/\/(\:|\*)(\w+)\?/g};if(pattern==="*"){this.matcher=/.*/}else{this.matcher=pattern.replace(_params_regex.optional,"(?:/)?$1$2?");this.matcher=this.matcher.replace(_params_regex.named,"([^/]+)");this.matcher=this.matcher.replace(_params_regex.splat,"(.*?)");this.matcher=new RegExp("^"+this.matcher+"$","m")}}Way.prototype.extract_params=function(url){var name,names,params,vals,i,len;names=this.pattern.match(/(?::|\*)(\w+)/g);if(names==null)return{};vals=url.match(this.matcher);params={};for(i=0,len=names.length;i<len;i++){name=names[i];params[name.substr(1)]=vals[i+1]}return params};Way.prototype.rewrite_pattern=function(pattern,url){var key,value,reg,params;params=this.extract_params(url);for(key in params){value=params[key];reg=new RegExp("[:*]+"+key,"g");pattern=pattern.replace(reg,value)}return pattern};Way.prototype.computed_dependency=function(url){return this.rewrite_pattern(this.dependency,url)};Way.prototype.run=function(url,done){var req={url:url,pattern:this.pattern,params:this.extract_params(url)};this.runner(req,done);return req};Way.prototype.destroy=function(req,done){this.destroyer(req,done)}},{});require.register("node_modules/ways/lib/ways",function(require,module,exports){var way=require("./way"),flow=require("./flow");var mode,flo,middleware,routes=[];dispatch=function(url){var i,route;url="/"+url.replace(/^[\/]+|[\/]+$/gm,"");for(i in routes){route=routes[i];if(routes[i].matcher.test(url))return run(url,routes[i])}throw new Error("Route not found for url '"+url+"'")};run=function(url,route){if(flo){flo.run(url,route)}else{route.run(url)}return route};module.exports=function(pattern,runner,destroyer,dependency){if(flo&&arguments.length<3)throw new Error("In `flow` mode you must to pass at least 3 args.");var route=way(pattern,runner,destroyer,dependency);routes.push(route);return route};exports=module.exports;exports.init=function(){dispatch(this.pathname())};exports.mode=function(m){routes=[];if((mode=m)!=null)flo=flow(routes,mode)};exports.use=function(mid){middleware=new mid;middleware.on("url:change",function(){dispatch(middleware.pathname())})};exports.pathname=function(){if(middleware)return middleware.pathname()};exports.go=function(url,title,state){if(middleware)middleware.push(url,title,state);else dispatch(url)};exports.go.silent=function(url,title,state){if(middleware)middleware.replace(url,title,state)};exports.reset=function(){flo=null;mode=null;routes=[];middleware=null}},{"./way":"node_modules/ways/lib/way","./flow":"node_modules/ways/lib/flow"});require.register("node_modules/ways/node_modules/happens/lib/happens",function(require,module,exports){module.exports=function(target){for(var prop in Happens)target[prop]=Happens[prop];return target};function validate(fn){if(!(fn&&fn instanceof Function))throw new Error(fn+"is not a function")}var Happens={__init:function(event){var tmp=this.__listeners||(this.__listeners=[]);return tmp[event]||(tmp[event]=[])},on:function(event,fn){validate(fn);this.__init(event).push(fn)},off:function(event,fn){var pool=this.__init(event);pool.splice(pool.indexOf(fn),1)},once:function(event,fn){validate(fn);var self=this,wrapper=function(){self.off(event,wrapper);fn.apply(this,arguments)};this.on(event,wrapper)},emit:function(event){var i,pool=this.__init(event).slice(0);for(i in pool)pool[i].apply(this,[].slice.call(arguments,1))}}},{});require.register("src/frontend/scripts/api/loopcast/loopcast",function(require,module,exports){var api_url;api_url="/api/v1/";module.exports={room:{create:function(data,callback){var request;request=$.post(api_url+"room/create",data);request.error(function(error){console.error("error creating calling create/room");console.error(error);return callback(error)});return request.done(function(response){console.info("success creating room");console.info("got response ->",response);return callback(null,response)})}}}},{});require.register("src/frontend/scripts/app",function(require,module,exports){var App,app,cloudinary,navigation,user_controller,views,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};require("./globals");require("./vendors");require("../vendors/parallax.min.js");views=require("./controllers/views");navigation=require("./controllers/navigation");user_controller=require("./controllers/user");cloudinary=require("./controllers/cloudinary");App=function(){App.prototype.window=null;App.prototype.settings=null;App.prototype.local=null;function App(){this.after_render=__bind(this.after_render,this);happens(this);this.on("ready",this.after_render)}App.prototype.start=function(){var _this=this;this.local=require("app/controllers/local_connection");this.window=require("app/controllers/window");this.body=$("body");this.settings=require("app/utils/settings");this.settings.bind(this.body);views.bind();navigation.bind();navigation.on("before_destroy",function(){log("--------- BEFORE DESTROY");return views.unbind("#content")});return navigation.on("after_render",function(){views.bind("#content");navigation.bind("#content");return user_controller.check_user()})};App.prototype.login=function(user){var url;log("--------> login called from outside");if(this.settings.after_login_url.length>0){url=this.settings.after_login_url;this.settings.after_login_url=""}else{url="/"+user.username}navigation.go(url);return user_controller.login(user)};App.prototype.logout=function(){log("[logged out]",user);return user_controller.logout()};App.prototype.after_render=function(){var _this=this;log("after_render");return delay(10,function(){return _this.body.addClass("loaded")})};return App}();app=new App;$(function(){return app.start()});module.exports=window.app=app},{"./globals":"src/frontend/scripts/globals","./vendors":"src/frontend/scripts/vendors","../vendors/parallax.min.js":"src/frontend/vendors/parallax.min","./controllers/views":"src/frontend/scripts/controllers/views","./controllers/navigation":"src/frontend/scripts/controllers/navigation","./controllers/user":"src/frontend/scripts/controllers/user","./controllers/cloudinary":"src/frontend/scripts/controllers/cloudinary","app/controllers/local_connection":"src/frontend/scripts/controllers/local_connection","app/controllers/window":"src/frontend/scripts/controllers/window","app/utils/settings":"src/frontend/scripts/utils/settings"});require.register("src/frontend/scripts/controllers/appcast",function(require,module,exports){var WebSocket,appcast,aware,v;aware=require("aware");v=require("app/vendors");appcast=aware({});WebSocket=window.WebSocket||null;appcast.messages={};appcast.vu={};appcast.set("connected",false);appcast.connect=function(){var messages_socket,vu_socket;if(!WebSocket){return console.info("+ socket controller wont connect")}messages_socket="ws://localhost:51234/loopcast/messages";appcast.messages=new v.ReconnectingWebsocket(messages_socket);appcast.messages.onopen=function(){console.info("- socket controller connection opened");appcast.set("connected",true);return appcast.messages.send(JSON.stringify(["get_input_devices"]))};appcast.messages.onclose=function(){console.info("- AppCast isnt OPEN, will retry to connect");return appcast.set("connected",false)};appcast.messages.onmessage=function(e){var args,error,from_json,json,method;json=e.data;try{from_json=JSON.parse(json)}catch(_error){error=_error;console.error("- socket controller error parsing json");console.error(error);return error}method=from_json[0];args=from_json[1];if("error"===method){return console.log("error",args)}if(typeof appcast.callbacks[method]==="function"){return appcast.callbacks[method](args)}else{return console.log(" + socket controller has no callback for:",method)}};vu_socket="ws://localhost:51234/loopcast/vu";appcast.vu=new v.ReconnectingWebsocket(vu_socket);appcast.vu.onopen=function(){console.info("- socket VU connection opened");return appcast.set("vu:connected",true)};appcast.vu.onclose=function(){console.info("- socket VU connection closed");return appcast.set("vu:connected",false)};return appcast.vu.onmessage=function(e){var reader;reader=new FileReader;reader.onload=function(e){var buffer;buffer=new Float32Array(e.target.result);return appcast.set("stream:vu",buffer)};return reader.readAsArrayBuffer(e.data)}};appcast.start_stream=function(device_name){var mount_point,password,payload;mount_point="hems";password="loopcast2015";payload={device_name:device_name,mount_point:mount_point,password:password};appcast.set("stream:starting",true);return appcast.messages.send(JSON.stringify(["start_stream",payload]))};appcast.stop_stream=function(){appcast.set("stream:stopping",true);return appcast.messages.send(JSON.stringify(["stop_stream"]))};appcast.callbacks={input_devices:function(args){return appcast.set("input_devices",args.devices)},stream_started:function(args){if(args!=null&&args.error!=null){console.error("- stream_started error:",args.error);appcast.set("stream:error",args.error);return}appcast.set("stream:online",true);appcast.set("stream:starting",null);return appcast.set("stream:error",null)},stream_stopped:function(){appcast.set("stream:online",false);return appcast.set("stream:stopping",null)}};appcast.on("input_device",function(){if(appcast.get("stream:online")){console.error("- input device changed while stream:online");return console.error("? what should we do")}});appcast.connect();module.exports=appcast},{aware:"node_modules/aware/index","app/vendors":"src/frontend/scripts/vendors"});require.register("src/frontend/scripts/controllers/cloudinary",function(require,module,exports){var Cloudinary;Cloudinary=function(){var instance;instance=null;Cloudinary.prototype.config={cloud_name:"",api_key:""};function Cloudinary(){if(Cloudinary.instance){console.error("You can't instantiate this Cloudinary twice");return}Cloudinary.instance=this}Cloudinary.prototype.set_config=function(data){if(this.config.cloud_name!==data.cloud_name||this.config.api_key!==data.api_key){this.config=data;return $.cloudinary.config({cloud_name:this.config.cloud_name,api_key:this.config.api_key})}};return Cloudinary}();module.exports=new Cloudinary},{});require.register("src/frontend/scripts/controllers/local_connection",function(require,module,exports){var app,connection;app=require("app/app");connection=new LocalConnection("beta.loopcast.fm");connection.listen();connection.addCallback("login",function(user){console.info(" + location connection, user logged in:",user);return app.login(user)});connection.addCallback("logout",function(){console.info(" + location connection, user logged out");return app.logout()});module.exports=connection},{"app/app":"src/frontend/scripts/app"});require.register("src/frontend/scripts/controllers/navigation",function(require,module,exports){var Navigation,happens,settings,ways,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};settings=require("app/utils/settings");happens=require("happens");ways=require("ways");ways.use(require("ways-browser"));Navigation=function(){var instance;instance=null;Navigation.prototype.first_loading=true;function Navigation(){this.url_changed=__bind(this.url_changed,this);var _this=this;if(Navigation.instance){console.error("You can't instantiate this Navigation twice");return}Navigation.instance=this;this.content_selector="#content .inner_content";this.content_div=$(this.content_selector);happens(this);window.ways=ways;ways("*",this.url_changed);delay(200,function(){if(_this.first_loading){return _this.emit("after_render")}})}Navigation.prototype.url_changed=function(req){var div,_this=this;log("url_changed",req.url);req.url=req.url.replace("/#","");div=$("<div>");this.emit("before_load");return div.load(req.url,function(){_this.emit("on_load");if(app.body.scrollTop()>0){app.body.animate({scrollTop:0})}_this.emit("before_destroy");return delay(400,function(){var new_content;new_content=div.find(_this.content_selector).children();_this.content_div=$(_this.content_selector);_this.content_div.children().remove();_this.content_div.append(new_content);return delay(10,function(){log("[Navigation] after_render",req.url);return _this.emit("after_render")})})})};Navigation.prototype.go=function(url){if(window.opener!=null){return true}this.first_loading=false;ways.go(url);return false};Navigation.prototype.bind=function(scope){if(scope==null){scope="body"}return $(scope).find("a").each(function(index,item){var $item,href;$item=$(item);href=$item.attr("href");if(href==null){return}if(href.indexOf("http")>=0&&href.indexOf(document.domain)<0){return}if(href.indexOf("#")===0){return $item.click(function(){return false})}else if(href.indexOf("javascript")===0||href.indexOf("tel:")===0){return true}else{return $item.click(function(){return Navigation.instance.go($(this).attr("href"))})}})};return Navigation}();module.exports=new Navigation},{"app/utils/settings":"src/frontend/scripts/utils/settings",happens:"node_modules/happens/index",ways:"node_modules/ways/lib/ways","ways-browser":"node_modules/ways-browser/lib/index"});require.register("src/frontend/scripts/controllers/user",function(require,module,exports){var happens;happens=require("happens");module.exports=happens({logout:function(callback){var _this=this;if(callback==null){callback=function(){}}if(!this.is_logged()){return callback({error:{code:"node_logged"}})}log("[User] trying to logout...");return $.post("/api/v1/logout",{},function(data){log("[User] logout ~ success",data);_this.emit("user:unlogged");app.body.removeClass("logged");log("[User Controller] deleting user variable");delete loopcast.user;return typeof callback==="function"?callback():void 0})},login:function(user){loopcast.user=user;app.body.addClass("logged");this.emit("user:logged",this.get_user());return log("[User Controller] login",this.get_user())},check_user:function(){if(this.is_logged()){return this.login(this.get_user())}else{return this.logout()}},is_logged:function(){return this.get_user()!=null},get_user:function(){return loopcast.user},set_user:function(user){return loopcast.user=user}})},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/controllers/views",function(require,module,exports){var View,happens,view,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");View=function(){var UNIQUE_ID;function View(){this.get_by_dom=__bind(this.get_by_dom,this);this.get_by_uid=__bind(this.get_by_uid,this);this.get=__bind(this.get,this)}UNIQUE_ID=0;View.prototype.hash_model={};View.prototype.uid_map={};View.prototype.get=function(id,index){if(index==null){index=0}if(this.hash_model[id]==null){return false}return this.hash_model[id][index]};View.prototype.get_by_uid=function(uid){var index,name;if(this.uid_map[uid]!=null){name=this.uid_map[uid].name;index=this.uid_map[uid].index;return this.get(name,index)}return false};View.prototype.get_by_dom=function(selector){return this.get_by_uid($(selector).data("uid"))};View.prototype.bind=function(scope,tolog){var _this=this;if(scope==null){scope="body"}if(tolog==null){tolog=false}return $(scope).find("[data-view]").each(function(index,item){var $item,name,names,view_name,_i,_len;$item=$(item);view_name=$item.data("view");$item.removeAttr("data-view");if(view_name.substring(0,1)==="["){names=view_name.substring(1,view_name.length-1).split(",")}else{names=[view_name]}for(_i=0,_len=names.length;_i<_len;_i++){name=names[_i];_this._add_view($item,name)}return $item.removeAttr("data-view")}).promise().done(function(){return _this.emit("binded")})};View.prototype.unbind=function(scope){var _this=this;if(scope==null){scope="body"}return $(scope).find("[data-uid]").each(function(index,item){var $item,id,v;$item=$(item);id=$item.data("uid");v=view.get_by_uid(id);if(v){if(typeof v.destroy==="function"){v.destroy()}return view.on_view_destroyed(id)}}).promise().done(function(){return _this.emit("unbinded")})};View.prototype._add_view=function($item,view_name){var e,l,view,_base;try{view=require("app/views/"+view_name)}catch(_error){e=_error;console.warn("e ->",e.message);console.error("app/views/"+view+" not found for ",$item)}view=new view($item);if((_base=this.hash_model)[view_name]==null){_base[view_name]=[]}l=this.hash_model[view_name].length;this.hash_model[view_name][l]=view;view.uid=UNIQUE_ID;view.view_name=view_name;$item.attr("data-uid",UNIQUE_ID);this.uid_map[UNIQUE_ID]={name:view_name,index:this.hash_model[view_name].length-1};return UNIQUE_ID++};View.prototype.on_view_destroyed=function(uid){var i,index,item,name,_i,_len,_ref,_results;if(this.uid_map[uid]!=null){name=this.uid_map[uid].name;index=this.uid_map[uid].index;if(this.hash_model[name][index]!=null){delete this.uid_map[uid];this.hash_model[name].splice(index,1);_ref=this.hash_model[name];_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){item=_ref[i];_results.push(this.uid_map[item.uid].index=i)}return _results}}};return View}();view=new View;happens(view);module.exports=window.view=view;window.View=view},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/controllers/window",function(require,module,exports){var happens,on_resize,win;happens=require("happens");module.exports=happens(win={});win.obj=$(window);win.obj.on("resize",on_resize=function(){win.w=win.obj.width();win.h=win.obj.height();return win.emit("resize")});delay(100,on_resize);$("html,body").on("click",function(){return win.emit("body:clicked")})},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/globals",function(require,module,exports){window.delay=require("./globals/delay");window.interval=require("./globals/interval");window.log=require("./globals/log");window.mover=require("./globals/mover");window.happens=require("happens");module.exports=window},{"./globals/delay":"src/frontend/scripts/globals/delay","./globals/interval":"src/frontend/scripts/globals/interval","./globals/log":"src/frontend/scripts/globals/log","./globals/mover":"src/frontend/scripts/globals/mover",happens:"node_modules/happens/index"});require.register("src/frontend/scripts/globals/delay",function(require,module,exports){module.exports=function(delay,funk){return setTimeout(funk,delay)}},{});require.register("src/frontend/scripts/globals/interval",function(require,module,exports){module.exports=function(interval,funk){return setInterval(funk,interval)}},{});require.register("src/frontend/scripts/globals/log",function(require,module,exports){module.exports=function(){log.history=log.history||[];log.history.push(arguments);if(typeof console!=="undefined"&&console!==null){return console.log(Array.prototype.slice.call(arguments))}}},{});require.register("src/frontend/scripts/globals/mover",function(require,module,exports){module.exports={scroll_to:function(el,with_topbar,speed){var y;if(with_topbar==null){with_topbar=false}if(speed==null){speed=300}y=el.position().top;log("[Mover] scroll_to",y);return this.scroll_to_y(y,with_topbar,speed)},scroll_to_y:function(y,with_topbar,speed){if(with_topbar==null){with_topbar=true}if(speed==null){speed=300}if(with_topbar){y-=app.settings.header_height}log("[mover] scroll_to_y",y);return $("html, body").animate({scrollTop:y},speed)}}},{});require.register("src/frontend/scripts/utils/appcast",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports={start_recording:function(){var done,fail,url;if(!appcast.get("streaming:online")){console.error("- cant start recording if not streaming");return}console.log("+ start recording",appcast.get("input_device"));url="/tape/start/recording";done=function(){console.info("+ recording post done ->",arguments);return appcast.set("recording",true)};fail=function(){return console.error("- failing trying to start recording ->",arguments)};return $.post(url).done(done).fail(fail)},stop_recording:function(){var done,fail,url;if(!appcast.get("stream:recording")){console.error("- cant stop recording if not recording");return}console.log("+ stopping to record with ",appcast.get("input_device"));url="/tape/stop/recording";done=function(){return console.info("+ /tape/stop/recording post done ->",arguments)};fail=function(){return console.error("- /tape/stop/recording post failed ->",arguments)};return $.post(url).done(done).fail(fail)},start_stream:function(){if(!appcast.get("input_device")){console.error("- cant start stream before selecting input device");return}console.log("starting streaming with",appcast.get("input_device"));return appcast.start_stream(appcast.get("input_device"))},stop_stream:function(){if(!appcast.get("streaming:online")){console.error("- cant stop stream if not streaming");return}console.log("+ stoping streaming with",appcast.get("input_device"));return appcast.stop_stream()}}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/utils/browser",function(require,module,exports){var BrowserDetect;BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";return this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(data){var dataProp,dataString,i;i=0;while(i<data.length){dataString=data[i].string;dataProp=data[i].prop;this.versionSearchString=data[i].versionSearch||data[i].identity;if(dataString){if(dataString.indexOf(data[i].subString)!==-1){return data[i].identity}}else{if(dataProp){return data[i].identity}}i++}},searchVersion:function(dataString){var index;index=dataString.indexOf(this.versionSearchString);if(index===-1){return}return parseFloat(dataString.substring(index+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init();module.exports=BrowserDetect},{});require.register("src/frontend/scripts/utils/login_popup",function(require,module,exports){var popup;popup=require("app/utils/popup");module.exports=function(){return popup({url:"/login",title:"Log In ~ Loopcast",w:500,h:400})}},{"app/utils/popup":"src/frontend/scripts/utils/popup"});require.register("src/frontend/scripts/utils/opacity",function(require,module,exports){var Opacity;Opacity={show:function(el,time){if(time==null){time=500}return el.fadeIn(time)},hide:function(el,time){if(time==null){time=500
}return el.fadeOut(time)},get_time:function(time){return time/1e3+"s"}};module.exports=Opacity},{});require.register("src/frontend/scripts/utils/popup",function(require,module,exports){module.exports=function(data){var left,params,top;left=app.window.w/2-data.w/2;top=app.window.h/2-data.h/2;params="toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+data.w+", height="+data.h+", top="+top+", left="+left;return window.open(data.url,data.title,params).focus()}},{});require.register("src/frontend/scripts/utils/preload",function(require,module,exports){module.exports=function(images,callback){var count,images_loaded,item,load,loaded,_i,_len,_results;count=0;images_loaded=[];load=function(src,callback){var img;img=new Image;img.onload=callback;img.src=src;return images_loaded.push(img)};loaded=function(){count++;log("[Preloader] load_multiple - loaded",""+count+" / "+images.length);if(count===images.length){log("[Preloader] load_multiple - loaded ALL");return callback(images_loaded)}};_results=[];for(_i=0,_len=images.length;_i<_len;_i++){item=images[_i];_results.push(load(item,loaded))}return _results}},{});require.register("src/frontend/scripts/utils/settings",function(require,module,exports){var BrowserDetect,has3d,platform,ratio,settings;BrowserDetect=require("app/utils/browser");settings={browser:{id:BrowserDetect.browser,version:BrowserDetect.version,OS:BrowserDetect.OS,chrome:navigator.userAgent.toLowerCase().indexOf("chrome")>-1,firefox:/Firefox/i.test(navigator.userAgent),ie8:false,device_ratio:window.devicePixelRatio,handheld:false,tablet:false,mobile:false,desktop:false,device:false,debug:false,css_cover_supported:Modernizr.backgroundsize,min_size:{w:900,h:400}},webp:false};settings.theme="desktop";settings.threshold_theme=900;settings.browser.retina=settings.browser.device_ratio===2;if(settings.browser.chrome&&settings.browser.version>=30){settings.webp=true}if(settings.browser.id==="Explorer"){settings.browser.ie=true;if(settings.browser.version===8){settings.browser.ie8=true}if(settings.browser.version===9){settings.browser.ie9=true}}settings.video_active=settings.browser.id!=="Explorer";if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){settings.browser.handheld=true;ratio=$(window).width()/$(window).height();settings.browser.orientation=ratio>1?"landscape":"portrait";if($(window).width()<610||settings.browser.orientation==="landscape"&&ratio>2.1){settings.browser.mobile=true;settings.browser.tablet=false}else{settings.browser.mobile=false;settings.browser.tablet=true}}settings.browser.device=settings.browser.tablet||settings.browser.mobile;if(settings.browser.tablet===false&&settings.browser.mobile===false){settings.browser.desktop=true}settings.browser.windows_phone=false;if(settings.browser.mobile&&settings.browser.id==="Explorer"){settings.browser.windows_phone=true}settings.touch_device=settings.browser.handheld;settings.events_map={down:"mousedown",up:"mouseup",move:"mousemove"};if(settings.browser.device){if(settings.browser.windows_phone){settings.events_map={down:"MSPointerDown",up:"MSPointerUp",move:"MSPointerMove"}}else{settings.events_map={down:"touchstart",up:"touchend",move:"touchmove"}}}if(settings.browser.desktop){platform="desktop"}else if(settings.browser.tablet){platform="tablet"}else{platform="mobile"}settings.after_login_url="";settings.browser_class=settings.browser.id+"_"+settings.browser.version;has3d=function(){var el,t,transforms;el=document.createElement("p");has3d=void 0;transforms={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(el,null);for(t in transforms){if(el.style[t]!==undefined){el.style[t]="translate3d(1px,1px,1px)";has3d=window.getComputedStyle(el).getPropertyValue(transforms[t])}}document.body.removeChild(el);return has3d!==undefined&&has3d.length>0&&has3d!=="none"};settings.bind=function(body){var klasses;klasses=[];klasses.push(settings.browser_class);klasses.push(settings.browser.OS.replace("/","_"));klasses.push(settings.browser.id);if(settings.touch_device){klasses.push("touch_device")}else{klasses.push("no_touch_device")}if(settings.browser.css_cover_supported){klasses.push("css_cover_supported")}body.addClass(klasses.join(" ").toLowerCase());return settings.header_height=$("header").height()};module.exports=settings},{"app/utils/browser":"src/frontend/scripts/utils/browser"});require.register("src/frontend/scripts/vendors",function(require,module,exports){var vendors;vendors={Modernizr:require("../vendors/modernizr.custom.js"),LocalConnection:require("../vendors/LocalConnection.js"),ReconnectingWebsocket:require("../vendors/reconnecting-websocket.js"),JqueryUiWidget:require("../vendors/jquery.ui.widget.js"),IframeTransport:require("../vendors/jquery.iframe-transport.js"),FileUpload:require("../vendors/jquery.fileupload.js"),Cloudinary:require("../vendors/jquery.cloudinary.js")};module.exports=vendors},{"../vendors/modernizr.custom.js":"src/frontend/vendors/modernizr.custom","../vendors/LocalConnection.js":"src/frontend/vendors/LocalConnection","../vendors/reconnecting-websocket.js":"src/frontend/vendors/reconnecting-websocket","../vendors/jquery.ui.widget.js":"src/frontend/vendors/jquery.ui.widget","../vendors/jquery.iframe-transport.js":"src/frontend/vendors/jquery.iframe-transport","../vendors/jquery.fileupload.js":"src/frontend/vendors/jquery.fileupload","../vendors/jquery.cloudinary.js":"src/frontend/vendors/jquery.cloudinary"});require.register("src/frontend/scripts/views/buttons/start_stop",function(require,module,exports){var StartStop,happens,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");module.exports=StartStop=function(){StartStop.prototype.started=false;StartStop.prototype.first_click=true;function StartStop(dom){this.dom=dom;this.toggle=__bind(this.toggle,this);happens(this);this.dom.addClass("start_stop");this.dom.on("click",this.toggle);if(this.dom.data("width")==="fixed"){this.lock_width()}}StartStop.prototype.lock_width=function(){var start_button,stop_button,w;start_button=this.dom.find(".start");stop_button=this.dom.find(".stop");w=Math.max(start_button.width(),stop_button.width())+2;start_button.width(w);return stop_button.width(w)};StartStop.prototype.toggle=function(){if(this.started){this.stop()}else{this.start()}return this.first_click=false};StartStop.prototype.stop=function(){if(!this.started){return}this.started=false;this.dom.removeClass("started");return this.emit("change","stop")};StartStop.prototype.start=function(){if(this.started){return}this.started=true;this.dom.addClass("started");return this.emit("change","start")};return StartStop}()},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/click_trigger",function(require,module,exports){var ClickTrigger,HoverTrigger,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};HoverTrigger=require("app/views/components/hover_trigger");module.exports=ClickTrigger=function(_super){__extends(ClickTrigger,_super);function ClickTrigger(){_ref=ClickTrigger.__super__.constructor.apply(this,arguments);return _ref}ClickTrigger.prototype.set_listeners=function(){this.dom.on("click",this.toggle);return app.window.on("body:clicked",this.close)};return ClickTrigger}(HoverTrigger)},{"app/views/components/hover_trigger":"src/frontend/scripts/views/components/hover_trigger"});require.register("src/frontend/scripts/views/components/editables/editable_select",function(require,module,exports){var EditableSelect,EditableText,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};EditableText=require("./editable_text");module.exports=EditableSelect=function(_super){__extends(EditableSelect,_super);function EditableSelect(dom){this.dom=dom;this.on_ready=__bind(this.on_ready,this);EditableSelect.__super__.constructor.call(this,this.dom)}EditableSelect.prototype.on_ready=function(html){var select,text;this.dom.append(html);text=this.dom.find(".text");select=this.dom.find("select");return select.on("change",function(e){var t;t=this.options[e.target.selectedIndex].text;log("text",t);return text.text(t)})};EditableSelect.prototype.get_template=function(callback){return $.get("/api/v1/occupations/all",function(data){var tmpl;tmpl=require("templates/components/editables/editable_select");log("get_template",data);return callback(tmpl({values:data}))})};return EditableSelect}(EditableText)},{"./editable_text":"src/frontend/scripts/views/components/editables/editable_text","templates/components/editables/editable_select":"src/frontend/templates/components/editables/editable_select"});require.register("src/frontend/scripts/views/components/editables/editable_text",function(require,module,exports){var EditableText,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=EditableText=function(){function EditableText(dom){this.dom=dom;this.open_edit_mode=__bind(this.open_edit_mode,this);this.close_read_mode=__bind(this.close_read_mode,this);this.on_ready=__bind(this.on_ready,this);this.dom.addClass("editable_text");this.dom.on("click",function(e){return e.stopPropagation()});this.get_template(this.on_ready)}EditableText.prototype.on_ready=function(html){var style,text;text=this.dom.text();this.dom.append(html);this.input=this.dom.find("input");this.input.val(text);this.text_el=this.dom.find(".text");style={color:this.text_el.css("color")};this.input.css(style);return this.text_el.on("click",this.open_edit_mode)};EditableText.prototype.get_template=function(callback){var tmpl;tmpl=require("templates/components/editables/editable_text");return callback(tmpl())};EditableText.prototype.close_read_mode=function(){log("close_edit_mode");this.text_el.text(this.input.val());this.dom.removeClass("edit_mode");return this.input.off("keyup")};EditableText.prototype.open_edit_mode=function(e){var _this=this;if(e!=null){e.stopPropagation()}log("open_edit_mode");this.dom.addClass("edit_mode");this.input.focus().select();this.input.on("keyup",function(e){if(e.keyCode===13){return _this.close_read_mode()}});return app.window.once("body:clicked",this.close_read_mode)};return EditableText}()},{"templates/components/editables/editable_text":"src/frontend/templates/components/editables/editable_text"});require.register("src/frontend/scripts/views/components/fullscreen",function(require,module,exports){var Fullscreen,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=Fullscreen=function(){Fullscreen.prototype.factor=1;function Fullscreen(dom){this.dom=dom;this.on_resize=__bind(this.on_resize,this);this.dom.addClass("fullscreen");if(this.dom.data("factor")){this.factor=this.dom.data("factor")}app.window.on("resize",this.on_resize);this.on_resize()}Fullscreen.prototype.on_resize=function(){return this.dom.css({width:"100%",height:(app.window.h-app.settings.header_height)*this.factor})};return Fullscreen}()},{});require.register("src/frontend/scripts/views/components/hover",function(require,module,exports){var Hover,happens,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");module.exports=Hover=function(){function Hover(dom){this.dom=dom;this.on_mouse_leave=__bind(this.on_mouse_leave,this);this.on_mouse_over=__bind(this.on_mouse_over,this);if(app.settings.touch_device){return}happens(this);this.dom.on("mouseover",this.on_mouse_over);this.dom.on("mouseleave",this.on_mouse_leave);this.dom.addClass("hover_object")}Hover.prototype.on_mouse_over=function(){return this.dom.addClass("hovered")};Hover.prototype.on_mouse_leave=function(){return this.dom.removeClass("hovered")};return Hover}()},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/hover_trigger",function(require,module,exports){var HoverTrigger,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=HoverTrigger=function(){HoverTrigger.prototype.opened=false;HoverTrigger.prototype.klass="hovered";function HoverTrigger(dom){this.dom=dom;this.on_dropdown_closed=__bind(this.on_dropdown_closed,this);this.on_dropdown_opened=__bind(this.on_dropdown_opened,this);this.close=__bind(this.close,this);this.open=__bind(this.open,this);this.toggle=__bind(this.toggle,this);this.target=$(this.dom.data("target"));if(this.target.length<=0){log("[HoverTrigger] error. target not found",this.dom.data("target"));return}this.dom.addClass("hover_dropdown_trigger");this.set_listeners();app.on("dropdown:opened",this.on_dropdown_opened);app.on("dropdown:closed",this.on_dropdown_closed)}HoverTrigger.prototype.set_listeners=function(){if(app.settings.touch_device){this.dom.on("click",this.toggle)}else{this.dom.on("mouseover",this.open);this.target.on("mouseleave",this.close)}return app.window.on("body:clicked",this.close)};HoverTrigger.prototype.toggle=function(e){if(this.opened){this.close()}else{this.open()}return e.stopPropagation()};HoverTrigger.prototype.open=function(){if(this.opened){return}this.opened=true;log("[Trigger] open");this.dom.addClass(this.klass);this.target.addClass(this.klass);return app.emit("dropdown:opened",this.uid)};HoverTrigger.prototype.close=function(){if(!this.opened){return}this.opened=false;log("[Trigger] close");this.dom.removeClass(this.klass);this.target.removeClass(this.klass);return app.emit("dropdown:closed",this.uid)};HoverTrigger.prototype.on_dropdown_opened=function(data){if(data!==this.uid){return this.close()}};HoverTrigger.prototype.on_dropdown_closed=function(data){};return HoverTrigger}()},{});require.register("src/frontend/scripts/views/components/image_uploader",function(require,module,exports){var Cloudinary,ImageUploader;require("happens");Cloudinary=require("app/controllers/cloudinary");module.exports=ImageUploader=function(){function ImageUploader(dom){var api_key,cloud_name,form,is_own_event,kill,on_upload_complete,on_upload_fail,on_upload_progress,on_upload_start,progress,ref,unsigned_id;happens(this);api_key=dom.find(".api_key").val();cloud_name=dom.find(".cloud_name").val();unsigned_id=dom.find(".unsigned_id").val();Cloudinary.set_config({cloud_name:cloud_name,api_key:api_key});progress=dom.find(".progress");ref=this;kill=function(e){e.preventDefault();return e.stopPropagation()};dom.on({dragover:kill,drop:kill,dragenter:kill,dragleave:kill});on_upload_start=function(e,data){log("[Cloudinary] on_upload_start",e,data);progress.removeClass("hide");return ref.emit("started",data)};on_upload_progress=function(e,data){var percent;percent=data.loaded/data.total*100;log("[Cloudinary] on_upload_progress",percent+"%");progress.css("width",""+percent+"%");return ref.emit("progress",progress)};on_upload_complete=function(e,data){log("[ImageUploader] on_upload_complete",e,data);progress.addClass("hide");return ref.emit("completed",data)};on_upload_fail=function(e,data){log("[Cloudinary] on_upload_fail",e);return ref.emit("error",e)};is_own_event=function(e){return e.currentTarget};form=dom.find("form");form.append($.cloudinary.unsigned_upload_tag(unsigned_id,{cloud_name:cloud_name},{cloudinary_field:unsigned_id}).on("cloudinarydone",on_upload_complete).on("fileuploadstart",on_upload_start).on("fileuploadprogress",on_upload_progress).on("fileuploadfail",on_upload_fail))}return ImageUploader}()},{happens:"node_modules/happens/index","app/controllers/cloudinary":"src/frontend/scripts/controllers/cloudinary"});require.register("src/frontend/scripts/views/components/input_devices",function(require,module,exports){var appcast,happens;appcast=require("app/controllers/appcast");happens=require("happens");module.exports=function(dom){happens(this);dom.on("change",function(){return appcast.set("input_device",dom.val())});return appcast.on("input_devices",function(devices){var device,_i,_len,_results;dom.html(" ");_results=[];for(_i=0,_len=devices.length;_i<_len;_i++){device=devices[_i];_results.push(dom.append("<option value='"+device+"'>"+device+"</option>"))}return _results})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast",happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/logged_link",function(require,module,exports){var login_popup,user_controller;user_controller=require("app/controllers/user");login_popup=require("app/utils/login_popup");module.exports=function(dom){var on_click,on_user_logged,on_user_unlogged,original_url;original_url=dom.attr("href");on_click=function(){app.settings.after_login_url=original_url;login_popup();return false};on_user_logged=function(data){log("[Logged Link] on_user_logged",data);dom.attr("href",original_url);return dom.off("click",on_click)};on_user_unlogged=function(data){log("[Logged Link] on_user_unlogged",data);dom.attr("href","#");return dom.on("click",on_click)};user_controller.on("user:logged",on_user_logged);user_controller.on("user:unlogged",on_user_unlogged);if(user_controller.is_logged()){return on_user_logged()}else{return on_user_unlogged()}}},{"app/controllers/user":"src/frontend/scripts/controllers/user","app/utils/login_popup":"src/frontend/scripts/utils/login_popup"});require.register("src/frontend/scripts/views/components/login_popup_handler",function(require,module,exports){var login_popup;login_popup=require("app/utils/login_popup");module.exports=function(dom){return dom.on("click",function(){return login_popup()})}},{"app/utils/login_popup":"src/frontend/scripts/utils/login_popup"});require.register("src/frontend/scripts/views/components/logout_link",function(require,module,exports){var user_controller;user_controller=require("app/controllers/user");module.exports=function(dom){return dom.on("click",function(e){e.preventDefault();e.stopPropagation();user_controller.logout(function(error){if(error){return console.error(error)}});return log("[LogoutLink] logout succedeed.")})}},{"app/controllers/user":"src/frontend/scripts/controllers/user"});require.register("src/frontend/scripts/views/components/modal",function(require,module,exports){var Modal,happens,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};happens=require("happens");module.exports=Modal=function(){Modal.prototype.opened=false;function Modal(dom){this.dom=dom;this.close=__bind(this.close,this);happens(this);this.overlay=$(".md_overlay")}Modal.prototype.open=function(){if(this.opened){return}this.opened=true;this.dom.addClass("md_show");log("modal-close",this.dom.data("modal-close"));if(this.dom.data("modal-close")!=null&&this.dom.data("modal-close")!==false){this.overlay.off("click").on("click",this.close)}return this.emit("opened")};Modal.prototype.close=function(){if(!this.opened){return}this.opened=false;this.dom.removeClass("md_show");return this.emit("closed")};return Modal}()},{happens:"node_modules/happens/index"});require.register("src/frontend/scripts/views/components/modal_handler",function(require,module,exports){var ModalHandler,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};module.exports=ModalHandler=function(){function ModalHandler(dom){this.dom=dom;this.on_ready=__bind(this.on_ready,this);view.once("binded",this.on_ready)}ModalHandler.prototype.on_ready=function(){var modal_target;modal_target=view.get_by_dom(this.dom.data("modal"));return this.dom.on("click",function(){return modal_target.open()})};return ModalHandler}()},{});require.register("src/frontend/scripts/views/components/player",function(require,module,exports){var appcast;appcast=require("app/controllers/appcast");module.exports=function(dom){var audio,check_stream,start_audio,stop_audio,stream,vu;audio=dom.find("audio");vu=dom.find(".vu");stream=audio.data("src");audio.hide();appcast.on("connected",function(status){if(status){return dom.find(".status").html("... waiting stream to start ...")}else{return dom.find(".status").html("... waiting AppCast to start ...")}});appcast.on("stream:error",function(error){if(!error){return}return dom.find(".status").html("... "+error+" ...")});check_stream=function(){return $.get(stream,function(error,response){if(error){delay(100,check_stream);return console.error("- error loading streaming")}return console.warn("+ all good!")})};start_audio=function(){audio.attr("src",audio.data("src"));return audio.show()};stop_audio=function(){audio.stop();return audio.hide()};appcast.on("stream:online",function(status){if(status){return start_audio()}else{return stop_audio()}});return appcast.on("stream:vu",function(meter){vu.find(".meter_left").width(meter[0]*1e3);return vu.find(".meter_right").width(meter[1]*1e3)})}},{"app/controllers/appcast":"src/frontend/scripts/controllers/appcast"});require.register("src/frontend/scripts/views/components/scroll_handler",function(require,module,exports){var ScrollHandler;module.exports=ScrollHandler=function(){function ScrollHandler(dom){var target;this.dom=dom;target=$(this.dom.data("target"));if(target.length<=0){return}this.dom.addClass("scroll_handler");this.dom.on("click",function(){return mover.scroll_to(target)})}return ScrollHandler}()},{});require.register("src/frontend/scripts/views/components/stream_controls",function(require,module,exports){var user_controller;user_controller=require("app/controllers/user");module.exports=function(dom){user_controller.on("user:logged",function(user){console.log("user logged ->",user.username);if("/"+user.username===ways.pathname()){return $(".controls").show()}});return user_controller.on("user:unlogged",function(){return $(".controls").hide()})}},{"app/controllers/user":"src/frontend/scripts/controllers/user"});require.register("src/frontend/scripts/views/explore",function(require,module,exports){var Explore;module.exports=Explore=function(){function Explore(dom){this.dom=dom}return Explore}()},{});require.register("src/frontend/scripts/views/header",function(require,module,exports){var Header,navigation,user_controller,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};navigation=require("app/controllers/navigation");user_controller=require("app/controllers/user");module.exports=Header=function(){Header.prototype.current_page="";Header.prototype.user_logged=false;function Header(dom){this.dom=dom;this.on_user_unlogged=__bind(this.on_user_unlogged,this);this.on_user_logged=__bind(this.on_user_logged,this);this.check_menu=__bind(this.check_menu,this);user_controller.on("user:logged",this.on_user_logged);user_controller.on("user:unlogged",this.on_user_unlogged);navigation.on("after_render",this.check_menu)}Header.prototype.check_menu=function(){var obj,page;obj=$("[data-menu]");if(obj.length>0){page=obj.data("menu");log("[Header] check_menu",page);if(this.current_page.length>0){this.dom.find("."+this.current_page+"_item").removeClass("selected");app.body.removeClass(""+this.current_page+"_page")}this.dom.find("."+page+"_item").addClass("selected");app.body.addClass(""+page+"_page");return this.current_page=page}};Header.prototype.on_user_logged=function(data){var html,tmpl,wrapper;if(this.user_logged){return}this.user_logged=true;wrapper=this.dom.find(".user_logged");tmpl=require("templates/shared/header_user_logged");html=tmpl(data);log("[Header] on_user_logged",data,html);log("wrapper",wrapper.length,wrapper);wrapper.empty().append(html);return view.bind(wrapper)};Header.prototype.on_user_unlogged=function(data){if(!this.user_logged){return}this.user_logged=false;return log("[Header] on_user_unlogged",data)};return Header}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation","app/controllers/user":"src/frontend/scripts/controllers/user","templates/shared/header_user_logged":"src/frontend/templates/shared/header_user_logged"});require.register("src/frontend/scripts/views/homepage",function(require,module,exports){var Homepage,preload;preload=require("app/utils/preload");module.exports=Homepage=function(){function Homepage(dom){var elements,images;this.dom=dom;elements=[];images=[];this.dom.find(".parallax-container").each(function(){elements.push($(this));return images.push($(this).data("image-parallax"))});preload(images,function(images_loaded){var el,i,_i,_len,_this=this;for(i=_i=0,_len=elements.length;_i<_len;i=++_i){el=elements[i];el.parallax({imageSrc:images_loaded[i].src,bleed:10,parallax:"scroll",naturalWidth:images_loaded[i].width,naturalheight:images_loaded[i].height})}return delay(100,function(){return app.window.obj.trigger("resize")})})}Homepage.prototype.destroy=function(){var p;p=$(".parallax-mirror");p.addClass("hide");return delay(300,function(){return p.remove()})};return Homepage}()},{"app/utils/preload":"src/frontend/scripts/utils/preload"});require.register("src/frontend/scripts/views/loading",function(require,module,exports){var Loading,Opacity,navigation;navigation=require("app/controllers/navigation");Opacity=require("app/utils/opacity");module.exports=Loading=function(){Loading.prototype.first_time=true;function Loading(dom){var _this=this;this.dom=dom;navigation.on("before_destroy",function(){app.body.addClass("loading").removeClass("loaded");return Opacity.show(_this.dom,100)});navigation.on("after_render",function(){if(_this.first_time){app.body.addClass("first_loaded");_this.first_time=false}app.body.removeClass("loading").addClass("loaded");return Opacity.hide(_this.dom)})}return Loading}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation","app/utils/opacity":"src/frontend/scripts/utils/opacity"});require.register("src/frontend/scripts/views/login",function(require,module,exports){var Login,Navigation,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Navigation=require("app/controllers/navigation");module.exports=Login=function(){function Login(dom){this.dom=dom;this._google_login=__bind(this._google_login,this);this._soundcloud_login=__bind(this._soundcloud_login,this);this._facebook_login=__bind(this._facebook_login,this);if(window.opener==null){app.body.removeClass("login_page");Navigation.go("/")}this.username=this.dom.find(".username");this.password=this.dom.find(".password");this.dom.find(".facebook").on("click",this._facebook_login);this.dom.find(".soundcloud").on("click",this._soundcloud_login);this.dom.find(".google").on("click",this._google_login)}Login.prototype._facebook_login=function(){return log("[Login] _facebook_login")};Login.prototype._soundcloud_login=function(){return log("[Login] _soundcloud_login")};Login.prototype._google_login=function(){return log("[Login] _google_login")};return Login}()},{"app/controllers/navigation":"src/frontend/scripts/controllers/navigation"});require.register("src/frontend/scripts/views/profile",function(require,module,exports){var Cloudinary,Profile,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}};Cloudinary=require("app/controllers/cloudinary");module.exports=Profile=function(){Profile.prototype.elements=null;Profile.prototype.form_bio=null;Profile.prototype.user_data={profile_picture:"/images/profile_big.png",cover_picture:"/images/homepage_2.jpg",location:"London - UK",bio:"Thomas Amundsen from Oslo, now based in London has from an early age lots of musical influences, experimenting from acoustic instruments to electronic music production and DJing.<br/><br/>He released his debut EP “I Feel” on Fusion recordings, sub-label of Dj Center Records, and has since released frequently on labels such as; Dobara, Susurrous Music, Incognitus Recordings, Koolwaters and gained support from the likes of Amine Edge, Stacey Pullen, Detlef, Slam, Marc Vedo, Loverdose, Ashley Wild, Jobe and many more",links:[{type:"spotify",url:"http://spotify.com"},{type:"soundcloud",url:"http://soundcloud.com"},{type:"facebook",url:"http://facebook.com"}]};function Profile(dom){var ref,_this=this;this.dom=dom;this.on_views_binded=__bind(this.on_views_binded,this);this.elements={profile_picture:this.dom.find(".profile_image img"),cover_picture:this.dom.find(".cover_image"),location:this.dom.find(".location"),location_input:this.dom.find(".location_input"),bio:this.dom.find(".bio"),bio_input:this.dom.find(".bio_input"),links:[{type:"spotify",el:this.dom.find(".spotify_link")},{type:"soundcloud",el:this.dom.find(".soundcloud_link")},{type:"facebook",el:this.dom.find(".facebook_link")}],links_input:[{type:"spotify",el:this.dom.find(".spotify_input")},{type:"soundcloud",el:this.dom.find(".soundcloud_input")},{type:"facebook",el:this.dom.find(".facebook_input")}]};this.form_bio=this.dom.find(".profile_form");this.form_bio.on("submit",function(e){return e.preventDefault()});this.form_bio.find("input").keyup(function(e){if(e.keyCode===13){return _this.read_mode()}});ref=this;this.dom.find("[data-profile]").on("click",function(){var value;value=$(this).data("profile");switch(value){case"set-write-mode":return ref.write_mode();case"set-read-mode":return ref.read_mode()}});this.update_dom_from_user_data();view.once("binded",this.on_views_binded)}Profile.prototype.on_views_binded=function(){var change_cover_uploader,change_picture_uploader,_this=this;log("[Profile] on_views_binded");change_cover_uploader=view.get_by_dom(this.dom.find(".change_cover"));if(!change_cover_uploader){log("[Profile] views not binded yet!!!");return}change_cover_uploader.on("completed",function(data){_this.user_data.cover_picture=data.result.url;return _this.dom.find(".cover_image").css({"background-image":"url("+data.result.url+")"})});change_picture_uploader=view.get_by_dom(this.dom.find(".profile_image"));return change_picture_uploader.on("completed",function(data){_this.user_data.profile_picture=data.result.url;return _this.dom.find("img").attr("src",data.result.url)})};Profile.prototype.write_mode=function(){return app.body.addClass("write_mode")};Profile.prototype.read_mode=function(){this.update_user_data_from_dom();this.update_dom_from_user_data();this.send_to_server();return app.body.removeClass("write_mode")};Profile.prototype.update_user_data_from_dom=function(){var i,l,_i,_len,_ref,_results;this.user_data.location=this.elements.location_input.val();this.user_data.bio=this.elements.bio_input.val();this.user_data.links=[];_ref=this.elements.links_input;_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){l=_ref[i];_results.push(this.user_data.links.push({type:l.type,url:l.el.val()}))}return _results};Profile.prototype.update_dom_from_user_data=function(){var d,e,i,link,_i,_len,_ref,_results;e=this.elements;d=this.user_data;e.profile_picture.css("background-image",d.profile_picture);e.cover_picture.css("background-image",d.cover_picture);e.location.html(d.location);e.location_input.val(d.location);e.bio.html(d.bio);e.bio_input.val(this.html_to_textarea(d.bio));_ref=d.links;_results=[];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){link=_ref[i];e.links[i].el.attr("href",link.url);_results.push(e.links_input[i].el.val(link.url))}return _results};Profile.prototype.html_to_textarea=function(str){var re,to_find,to_replace;to_find="<br/>";to_replace="\n";re=new RegExp(to_find,"g");return str.replace(re,to_replace)};Profile.prototype.send_to_server=function(){var _this=this;log("[Profile] save",this.user_data);return;return $.post("/api/v1/user/save",this.user_data,function(data){return log("[Profile] server response",data)})};return Profile}()},{"app/controllers/cloudinary":"src/frontend/scripts/controllers/cloudinary"});require.register("src/frontend/scripts/views/room",function(require,module,exports){var Room,__bind=function(fn,me){return function(){return fn.apply(me,arguments)
}};module.exports=Room=function(){function Room(dom){this.dom=dom;this.on_input_changed=__bind(this.on_input_changed,this);this.on_view_binded=__bind(this.on_view_binded,this);view.once("binded",this.on_view_binded);this.elements={title:this.dom.find(".cover .name"),genre:this.dom.find(".cover .genres"),location:this.dom.find(".cover .location"),cover:this.dom.find(".cover .cover_image")};if(this.elements.title.html().length<=0){this.elements.title.addClass("hidden")}if(this.elements.genre.html().length<=0){this.elements.genre.addClass("hidden")}if(this.elements.location.html().length<=0){this.elements.location.addClass("hidden")}}Room.prototype.on_view_binded=function(){this.modal=view.get_by_dom("#createroom_modal");this.modal.on("input:changed",this.on_input_changed);return this.open_modal()};Room.prototype.on_input_changed=function(data){switch(data.name){case"title":case"genre":case"location":this.elements[data.name].html(data.value);if(data.value.length>0){return this.elements[data.name].removeClass("hidden")}else{return this.elements[data.name].addClass("hidden")}break;case"cover":return this.elements[data.name].css({"background-image":"url("+data.value.url+")"})}};Room.prototype.open_modal=function(){return this.modal.open()};return Room}()},{});require.register("src/frontend/scripts/views/room/create_room_modal",function(require,module,exports){var CreateRoomModal,L,Modal,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Modal=require("../components/modal");L=require("api/loopcast/loopcast");module.exports=CreateRoomModal=function(_super){__extends(CreateRoomModal,_super);CreateRoomModal.prototype.cover_uploaded="";function CreateRoomModal(dom){this.dom=dom;this._submit=__bind(this._submit,this);this._on_description_changed=__bind(this._on_description_changed,this);this._on_location_changed=__bind(this._on_location_changed,this);this._on_genre_changed=__bind(this._on_genre_changed,this);this._on_title_changed=__bind(this._on_title_changed,this);this._on_cover_changed=__bind(this._on_cover_changed,this);this.on_views_binded=__bind(this.on_views_binded,this);CreateRoomModal.__super__.constructor.call(this,this.dom);this.title=this.dom.find(".roomname");this.genre=this.dom.find(".genre");this.location=this.dom.find(".location");this.description=this.dom.find(".description");this.submit=this.dom.find(".submit_button");this.title.on("keyup",this._on_title_changed);this.genre.on("keyup",this._on_genre_changed);this.location.on("keyup",this._on_location_changed);this.description.on("keyup",this._on_description_changed);this.submit.on("click",this._submit);view.once("binded",this.on_views_binded)}CreateRoomModal.prototype.on_views_binded=function(){var room_image_uploader;room_image_uploader=view.get_by_dom(this.dom.find(".room_image"));if(!room_image_uploader){log("[CreateRoomModal] views not binded yet!!!");return}return room_image_uploader.on("completed",this._on_cover_changed)};CreateRoomModal.prototype._on_cover_changed=function(data){this.cover_uploaded=data.result.url;return this.emit("input:changed",{name:"cover",value:data.result})};CreateRoomModal.prototype._on_title_changed=function(){return this.emit("input:changed",{name:"title",value:this.title.val()})};CreateRoomModal.prototype._on_genre_changed=function(){return this.emit("input:changed",{name:"genre",value:this.genre.val()})};CreateRoomModal.prototype._on_location_changed=function(){return this.emit("input:changed",{name:"location",value:this.location.val()})};CreateRoomModal.prototype._on_description_changed=function(){return this.emit("input:changed",{name:"description",value:this.description.val()})};CreateRoomModal.prototype._submit=function(){var data;if(!this.title.val()){return this.title.addClass("invalid")}data={title:this.title.val(),genre:this.genre.val(),location:this.location.val(),description:this.description.val(),cover:this.cover_uploaded};log("[Create Room Modal] submit",data);L.room.create(data,function(error,response){if(error){return console.error(error)}return console.warn("NICE!")});return this.close()};return CreateRoomModal}(Modal)},{"../components/modal":"src/frontend/scripts/views/components/modal","api/loopcast/loopcast":"src/frontend/scripts/api/loopcast/loopcast"});require.register("src/frontend/scripts/views/room/dashboard",function(require,module,exports){var appcast;appcast=require("app/utils/appcast");module.exports=function(dom){var init,on_broadcast_click,on_ready,on_recording_click;init=function(){return view.once("binded",on_ready)};on_ready=function(){var broadcast_trigger,recording_trigger;broadcast_trigger=view.get_by_dom(dom.find(".broadcast_controls"));recording_trigger=view.get_by_dom(dom.find(".recording_controls"));return broadcast_trigger.on("change",on_broadcast_click)};on_broadcast_click=function(data){log("on_broadcast_click",data);if(data==="start"){}else{}};on_recording_click=function(data){log("on_recording_click",data);if(data==="start"){}else{}};return init()}},{"app/utils/appcast":"src/frontend/scripts/utils/appcast"});require.register("src/frontend/scripts/views/rooms",function(require,module,exports){var Isotope;Isotope=require("isotope-layout");module.exports=function(dom){var container_isotope,filters,isotope;container_isotope=dom.find(".rooms_grid")[0];isotope=new Isotope(container_isotope,{itemSelector:".item",gutter:30,layoutMode:"masonry",masonry:{columnWidth:210,gutter:30}});filters=dom.find(".genres_list a");return dom.find("[data-genre-id]").on("click",function(e){var genre_id;genre_id=$(e.currentTarget).data("genre-id");log("click",genre_id);filters.removeClass("selected");dom.find('.genres_list a[data-genre-id="'+genre_id+'"]').addClass("selected");return isotope.arrange({filter:".item-"+genre_id})})}},{"isotope-layout":"node_modules/isotope-layout/js/isotope"});require.register("src/frontend/templates/components/editables/editable_select",function(require,module,exports){module.exports=function anonymous(locals){var buf=[];var locals_=locals||{},values=locals_.values;buf.push('<span class="spritesheet edit_icon"></span><select class="editable_input">');(function(){var $$obj=values;if("number"==typeof $$obj.length){for(var $index=0,$$l=$$obj.length;$index<$$l;$index++){var val=$$obj[$index];buf.push("<option"+jade.attrs({value:""+val+""},{value:true})+">"+jade.escape((jade.interp=val)==null?"":jade.interp)+"</option>")}}else{var $$l=0;for(var $index in $$obj){$$l++;var val=$$obj[$index];buf.push("<option"+jade.attrs({value:""+val+""},{value:true})+">"+jade.escape((jade.interp=val)==null?"":jade.interp)+"</option>")}}}).call(this);buf.push("</select>");return buf.join("")}},{});require.register("src/frontend/templates/components/editables/editable_text",function(require,module,exports){module.exports=function anonymous(locals){var buf=[];buf.push('<span class="spritesheet edit_icon"></span><input type="text" class="editable_input"/>');return buf.join("")}},{});require.register("src/frontend/templates/shared/header_user_logged",function(require,module,exports){module.exports=function anonymous(locals){var buf=[];var locals_=locals||{},avatar=locals_.avatar,username=locals_.username;buf.push('<div data-view="components/click_trigger" data-target=".user_dropdown" class="thumb_wrapper"><img'+jade.attrs({width:"42",src:""+avatar+""},{width:true,src:true})+'/><span class="spritesheet small_arrow_white"></span><ul class="user_dropdown hover_dropdown"><li><a'+jade.attrs({href:"/"+username+"",title:"My Profile"},{href:true,title:true})+'>My Profile</a></li><li><a href="#" title="Feedback">Feedback</a></li><li><a href="#" title="Logout" data-view="components/logout_link" class="logout">Logout</a></li></ul></div><a href="#" title="Messages"><span class="spritesheet messages_icon"></span></a>');return buf.join("")}},{});require.register("src/frontend/vendors/LocalConnection",function(require,module,exports){window.LocalConnection=function LocalConnection(options){this.name="localconnection";this.id=(new Date).getTime();this.useLocalStorage=false;this.debug=false;this._actions=[];this.init=function(options){try{localStorage.setItem(this.id,this.id);localStorage.removeItem(this.id);this.useLocalStorage=true}catch(e){this.useLocalStorage=false}for(var o in options){this[o]=options[o]}this.clear()};this.listen=function(){if(this.useLocalStorage){if(window.addEventListener){window.addEventListener("storage",this.bind(this,this._check),false)}else{window.attachEvent("onstorage",this.bind(this,this._check))}}else{setInterval(this.bind(this,this._check),100)}};this.send=function(event){var args=Array.prototype.slice.call(arguments,1);return this._write(event,args)};this.addCallback=function(event,func,scope){if(scope==undefined){scope=this}if(this._actions[event]==undefined){this._actions[event]=[]}this._actions[event].push({f:func,s:scope})};this.removeCallback=function(event){for(var e in this._actions){if(e==event){delete this._actions[e];break}}};this._check=function(){var data=this._read();if(data.length>0){for(var e in data){this._receive(data[e].event,data[e].args)}}};this._receive=function(event,args){if(this._actions[event]!=undefined){for(var func in this._actions[event]){if(this._actions[event].hasOwnProperty(func)){this.log('Triggering callback "'+event+'"',this._actions[event]);var callback=this._actions[event][func];callback.f.apply(callback.s,args)}}}};this._write=function(event,args){var events=this._getEvents();var evt={id:this.id,event:event,args:args};events.push(evt);this.log("Sending event",evt);if(this.useLocalStorage){localStorage.setItem(this.name,JSON.stringify(events))}else{document.cookie=this.name+"="+JSON.stringify(events)+"; path=/"}return true};this._read=function(){var events=this._getEvents();if(events==""){return false}var ret=[];for(var e in events){if(events[e].id!=this.id){ret.push({event:events[e].event,args:events[e].args});events.splice(e,1)}}if(this.useLocalStorage){localStorage.setItem(this.name,JSON.stringify(events))}else{document.cookie=this.name+"="+JSON.stringify(events)+"; path=/"}return ret};this._getEvents=function(){return this.useLocalStorage?this._getLocalStorage():this._getCookie()};this._getLocalStorage=function(){var events=localStorage.getItem(this.name);if(events==null){return[]}return JSON.parse(events)};this._getCookie=function(){var ca=document.cookie.split(";");var data;for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(this.name+"=")==0){data=c.substring(this.name.length+1,c.length);break}}data=data||"[]";return JSON.parse(data)};this.clear=function(){if(this.useLocalStorage){localStorage.removeItem(this.name)}else{document.cookie=this.name+"=; path=/"}};this.bind=function(scope,fn){return function(){fn.apply(scope,arguments)}};this.log=function(){if(!this.debug){return}if(console){console.log(Array.prototype.slice.call(arguments))}};this.init(options)}},{});require.register("src/frontend/vendors/jquery.cloudinary",function(require,module,exports){(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget","jquery.iframe-transport","jquery.fileupload"],factory)}else{var $=window.jQuery;factory($);$(function(){if($.fn.cloudinary_fileupload!==undefined){$("input.cloudinary-fileupload[type=file]").cloudinary_fileupload()}})}})(function($){"use strict";var CF_SHARED_CDN="d3jpl91pxevbkh.cloudfront.net";var OLD_AKAMAI_SHARED_CDN="cloudinary-a.akamaihd.net";var AKAMAI_SHARED_CDN="res.cloudinary.com";var SHARED_CDN=AKAMAI_SHARED_CDN;function utf8_encode(argString){if(argString===null||typeof argString==="undefined"){return""}var string=argString+"";var utftext="",start,end,stringl=0;start=end=0;stringl=string.length;for(var n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++}else if(c1>127&&c1<2048){enc=String.fromCharCode(c1>>6|192,c1&63|128)}else{enc=String.fromCharCode(c1>>12|224,c1>>6&63|128,c1&63|128)}if(enc!==null){if(end>start){utftext+=string.slice(start,end)}utftext+=enc;start=end=n+1}}if(end>start){utftext+=string.slice(start,stringl)}return utftext}function crc32(str){str=utf8_encode(str);var table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";var crc=0;var x=0;var y=0;crc=crc^-1;for(var i=0,iTop=str.length;i<iTop;i++){y=(crc^str.charCodeAt(i))&255;x="0x"+table.substr(y*9,8);crc=crc>>>8^x}crc=crc^-1;if(crc<0){crc+=4294967296}return crc}function option_consume(options,option_name,default_value){var result=options[option_name];delete options[option_name];return typeof result=="undefined"?default_value:result}function build_array(arg){if(arg===null||typeof arg=="undefined"){return[]}else if($.isArray(arg)){return arg}else{return[arg]}}function present(value){return typeof value!="undefined"&&(""+value).length>0}function process_base_transformations(options){var transformations=build_array(options.transformation);var all_named=true;for(var i=0;i<transformations.length;i++){all_named=all_named&&typeof transformations[i]=="string"}if(all_named){return[]}delete options.transformation;var base_transformations=[];for(var i=0;i<transformations.length;i++){var transformation=transformations[i];if(typeof transformation=="string"){base_transformations.push("t_"+transformation)}else{base_transformations.push(generate_transformation_string($.extend({},transformation)))}}return base_transformations}function process_size(options){var size=option_consume(options,"size");if(size){var split_size=size.split("x");options.width=split_size[0];options.height=split_size[1]}}function process_html_dimensions(options){var width=options.width,height=options.height;var has_layer=options.overlay||options.underlay;var crop=options.crop;var use_as_html_dimensions=!has_layer&&!options.angle&&crop!="fit"&&crop!="limit"&&crop!="lfill";if(use_as_html_dimensions){if(width&&!options.html_width&&width!=="auto"&&parseFloat(width)>=1)options.html_width=width;if(height&&!options.html_height&&parseFloat(height)>=1)options.html_height=height}if(!crop&&!has_layer){delete options.width;delete options.height}}var TRANSFORMATION_PARAM_NAME_MAPPING={angle:"a",background:"b",border:"bo",color:"co",color_space:"cs",crop:"c",default_image:"d",delay:"dl",density:"dn",dpr:"dpr",effect:"e",fetch_format:"f",flags:"fl",gravity:"g",height:"h",opacity:"o",overlay:"l",page:"pg",prefix:"p",quality:"q",radius:"r",transformation:"t",underlay:"u",width:"w",x:"x",y:"y"};var TRANSFORMATION_PARAM_VALUE_MAPPING={angle:function(angle){return build_array(angle).join(".")},background:function(background){return background.replace(/^#/,"rgb:")},border:function(border){if($.isPlainObject(border)){var border_width=""+(border.width||2);var border_color=(border.color||"black").replace(/^#/,"rgb:");border=border_width+"px_solid_"+border_color}return border},color:function(color){return color.replace(/^#/,"rgb:")},dpr:function(dpr){dpr=dpr.toString();if(dpr==="auto"){return"1.0"}else if(dpr.match(/^\d+$/)){return dpr+".0"}else{return dpr}},effect:function(effect){return build_array(effect).join(":")},flags:function(flags){return build_array(flags).join(".")},transformation:function(transformation){return build_array(transformation).join(".")}};function generate_transformation_string(options){var base_transformations=process_base_transformations(options);process_size(options);process_html_dimensions(options);var params=[];for(var param in TRANSFORMATION_PARAM_NAME_MAPPING){var value=option_consume(options,param);if(!present(value))continue;if(TRANSFORMATION_PARAM_VALUE_MAPPING[param]){value=TRANSFORMATION_PARAM_VALUE_MAPPING[param](value)}if(!present(value))continue;params.push(TRANSFORMATION_PARAM_NAME_MAPPING[param]+"_"+value)}params.sort();var raw_transformation=option_consume(options,"raw_transformation");if(present(raw_transformation))params.push(raw_transformation);var transformation=params.join(",");if(present(transformation))base_transformations.push(transformation);return base_transformations.join("/")}function absolutize(url){if(!url.match(/^https?:\//)){var prefix=document.location.protocol+"//"+document.location.host;if(url[0]=="?"){prefix+=document.location.pathname}else if(url[0]!="/"){prefix+=document.location.pathname.replace(/\/[^\/]*$/,"/")}url=prefix+url}return url}function cloudinary_url_prefix(public_id,cloud_name,private_cdn,cdn_subdomain,secure_cdn_subdomain,cname,secure,secure_distribution,protocol){if(cloud_name.match(/^\//)&&!secure){return"/res"+cloud_name}var prefix=secure?"https://":window.location.protocol==="file:"?"file://":"http://";prefix=protocol?protocol+"//":prefix;var shared_domain=!private_cdn;if(secure){if(!secure_distribution||secure_distribution==OLD_AKAMAI_SHARED_CDN){secure_distribution=private_cdn?cloud_name+"-res.cloudinary.com":SHARED_CDN}shared_domain=shared_domain||secure_distribution==SHARED_CDN;if(secure_cdn_subdomain==null&&shared_domain){secure_cdn_subdomain=cdn_subdomain}if(secure_cdn_subdomain){secure_distribution=secure_distribution.replace("res.cloudinary.com","res-"+(crc32(public_id)%5+1)+".cloudinary.com")}prefix+=secure_distribution}else if(cname){var subdomain=cdn_subdomain?"a"+(crc32(public_id)%5+1)+".":"";prefix+=subdomain+cname}else{prefix+=private_cdn?cloud_name+"-res":"res";prefix+=cdn_subdomain?"-"+(crc32(public_id)%5+1):"";prefix+=".cloudinary.com"}if(shared_domain)prefix+="/"+cloud_name;return prefix}function finalize_resource_type(resource_type,type,url_suffix,use_root_path,shorten){var resource_type_and_type=resource_type+"/"+type;if(url_suffix){if(resource_type_and_type=="image/upload"){resource_type_and_type="images"}else if(resource_type_and_type=="raw/upload"){resource_type_and_type="files"}else{throw"URL Suffix only supported for image/upload and raw/upload"}}if(use_root_path){if(resource_type_and_type=="image/upload"||resource_type_and_type=="images"){resource_type_and_type=""}else{throw"Root path only supported for image/upload"}}if(shorten&&resource_type_and_type=="image/upload"){resource_type_and_type="iu"}return resource_type_and_type}function cloudinary_url(public_id,options){options=options||{};var type=option_consume(options,"type","upload");if(type=="fetch"){options.fetch_format=options.fetch_format||option_consume(options,"format")}var transformation=generate_transformation_string(options);var resource_type=option_consume(options,"resource_type","image");var version=option_consume(options,"version");var format=option_consume(options,"format");var cloud_name=option_consume(options,"cloud_name",$.cloudinary.config().cloud_name);if(!cloud_name)throw"Unknown cloud_name";var private_cdn=option_consume(options,"private_cdn",$.cloudinary.config().private_cdn);var secure_distribution=option_consume(options,"secure_distribution",$.cloudinary.config().secure_distribution);var cname=option_consume(options,"cname",$.cloudinary.config().cname);var cdn_subdomain=option_consume(options,"cdn_subdomain",$.cloudinary.config().cdn_subdomain);var secure_cdn_subdomain=option_consume(options,"secure_cdn_subdomain",$.cloudinary.config().secure_cdn_subdomain);var shorten=option_consume(options,"shorten",$.cloudinary.config().shorten);var secure=option_consume(options,"secure",window.location.protocol=="https:");var protocol=option_consume(options,"protocol",$.cloudinary.config().protocol);var trust_public_id=option_consume(options,"trust_public_id");var url_suffix=option_consume(options,"url_suffix");var use_root_path=option_consume(options,"use_root_path",$.cloudinary.config().use_root_path);if(url_suffix&&!private_cdn){throw"URL Suffix only supported in private CDN"}if(type=="fetch"){public_id=absolutize(public_id)}if(public_id.search("/")>=0&&!public_id.match(/^v[0-9]+/)&&!public_id.match(/^https?:\//)&&!present(version)){version=1}if(public_id.match(/^https?:/)){if(type=="upload"||type=="asset")return public_id;public_id=encodeURIComponent(public_id).replace(/%3A/g,":").replace(/%2F/g,"/")}else{public_id=encodeURIComponent(decodeURIComponent(public_id)).replace(/%3A/g,":").replace(/%2F/g,"/");if(url_suffix){if(url_suffix.match(/[\.\/]/))throw"url_suffix should not include . or /";public_id=public_id+"/"+url_suffix}if(format){if(!trust_public_id)public_id=public_id.replace(/\.(jpg|png|gif|webp)$/,"");public_id=public_id+"."+format}}var resource_type_and_type=finalize_resource_type(resource_type,type,url_suffix,use_root_path,shorten);var prefix=cloudinary_url_prefix(public_id,cloud_name,private_cdn,cdn_subdomain,secure_cdn_subdomain,cname,secure,secure_distribution,protocol);var url=[prefix,resource_type_and_type,transformation,version?"v"+version:"",public_id].join("/").replace(/([^:])\/+/g,"$1/");return url}function default_stoppoints(width){return 10*Math.ceil(width/10)}function prepare_html_url(public_id,options){if($.cloudinary.config("dpr")&&!options.dpr){options.dpr=$.cloudinary.config("dpr")}var url=cloudinary_url(public_id,options);var width=option_consume(options,"html_width");var height=option_consume(options,"html_height");if(width)options.width=width;if(height)options.height=height;return url}function get_config(name,options,default_value){var value=options[name]||$.cloudinary.config(name);if(typeof value=="undefined")value=default_value;return value}function closest_above(list,value){var i=list.length-2;while(i>=0&&list[i]>=value){i--}return list[i+1]}var cloudinary_config=null;var responsive_config=null;var responsive_resize_initialized=false;var device_pixel_ratio_cache={};$.cloudinary={CF_SHARED_CDN:CF_SHARED_CDN,OLD_AKAMAI_SHARED_CDN:OLD_AKAMAI_SHARED_CDN,AKAMAI_SHARED_CDN:AKAMAI_SHARED_CDN,SHARED_CDN:SHARED_CDN,config:function(new_config,new_value){if(!cloudinary_config){cloudinary_config={};$('meta[name^="cloudinary_"]').each(function(){cloudinary_config[$(this).attr("name").replace("cloudinary_","")]=$(this).attr("content")})}if(typeof new_value!="undefined"){cloudinary_config[new_config]=new_value}else if(typeof new_config=="string"){return cloudinary_config[new_config]}else if(new_config){cloudinary_config=new_config}return cloudinary_config},url:function(public_id,options){options=$.extend({},options);return cloudinary_url(public_id,options)},url_internal:cloudinary_url,transformation_string:function(options){options=$.extend({},options);return generate_transformation_string(options)},image:function(public_id,options){options=$.extend({},options);var url=prepare_html_url(public_id,options);var img=$("<img/>").data("src-cache",url).attr(options).cloudinary_update(options);return img},facebook_profile_image:function(public_id,options){return $.cloudinary.image(public_id,$.extend({type:"facebook"},options))},twitter_profile_image:function(public_id,options){return $.cloudinary.image(public_id,$.extend({type:"twitter"},options))},twitter_name_profile_image:function(public_id,options){return $.cloudinary.image(public_id,$.extend({type:"twitter_name"},options))},gravatar_image:function(public_id,options){return $.cloudinary.image(public_id,$.extend({type:"gravatar"},options))},fetch_image:function(public_id,options){return $.cloudinary.image(public_id,$.extend({type:"fetch"},options))},sprite_css:function(public_id,options){options=$.extend({type:"sprite"},options);if(!public_id.match(/.css$/))options.format="css";return $.cloudinary.url(public_id,options)},responsive:function(options){responsive_config=$.extend(responsive_config||{},options);$("img.cld-responsive, img.cld-hidpi").cloudinary_update(responsive_config);var responsive_resize=get_config("responsive_resize",responsive_config,true);if(responsive_resize&&!responsive_resize_initialized){responsive_config.resizing=responsive_resize_initialized=true;var timeout=null;$(window).on("resize",function(){var debounce=get_config("responsive_debounce",responsive_config,100);function reset(){if(timeout){clearTimeout(timeout);timeout=null}}function run(){$("img.cld-responsive").cloudinary_update(responsive_config)}function wait(){reset();setTimeout(function(){reset();run()},debounce)}if(debounce){wait()}else{run()}})}},calc_stoppoint:function(element,width){var stoppoints=$(element).data("stoppoints")||$.cloudinary.config().stoppoints||default_stoppoints;if(typeof stoppoints==="function"){return stoppoints(width)}if(typeof stoppoints==="string"){stoppoints=$.map(stoppoints.split(","),function(val){return parseInt(val)})}return closest_above(stoppoints,width)},device_pixel_ratio:function(){var dpr=window.devicePixelRatio||1;var dpr_string=device_pixel_ratio_cache[dpr];if(!dpr_string){var dpr_used=closest_above($.cloudinary.supported_dpr_values,dpr);dpr_string=dpr_used.toString();if(dpr_string.match(/^\d+$/))dpr_string+=".0";device_pixel_ratio_cache[dpr]=dpr_string}return dpr_string},supported_dpr_values:[.75,1,1.3,1.5,2,3]};$.fn.cloudinary=function(options){this.filter("img").each(function(){var img_options=$.extend({width:$(this).attr("width"),height:$(this).attr("height"),src:$(this).attr("src")},$(this).data(),options);var public_id=option_consume(img_options,"source",option_consume(img_options,"src"));var url=prepare_html_url(public_id,img_options);$(this).data("src-cache",url).attr({width:img_options.width,height:img_options.height})}).cloudinary_update(options);return this};$.fn.cloudinary_update=function(options){options=options||{};var responsive_use_stoppoints=get_config("responsive_use_stoppoints",options,"resize");var exact=responsive_use_stoppoints===false||responsive_use_stoppoints=="resize"&&!options.resizing;this.filter("img").each(function(){if(options.responsive){$(this).addClass("cld-responsive")}var attrs={};var src=$(this).data("src-cache")||$(this).data("src");if(!src)return;var responsive=$(this).hasClass("cld-responsive")&&src.match(/\bw_auto\b/);if(responsive){var parents=$(this).parents(),parentsLength=parents.length,container,containerWidth=0,nthParent;for(nthParent=0;nthParent<parentsLength;nthParent+=1){container=parents[nthParent];if(container&&container.clientWidth){containerWidth=container.clientWidth;break}}if(containerWidth==0){return}var requestedWidth=exact?containerWidth:$.cloudinary.calc_stoppoint(this,containerWidth);var currentWidth=$(this).data("width")||0;if(requestedWidth>currentWidth){$(this).data("width",requestedWidth)}else{requestedWidth=currentWidth}src=src.replace(/\bw_auto\b/g,"w_"+requestedWidth);attrs.width=null;attrs.height=null}attrs.src=src.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+$.cloudinary.device_pixel_ratio());$(this).attr(attrs)});return this};var webp=null;$.fn.webpify=function(options,webp_options){var that=this;options=options||{};webp_options=webp_options||options;if(!webp){webp=$.Deferred();var webp_canary=new Image;webp_canary.onerror=webp.reject;webp_canary.onload=webp.resolve;webp_canary.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA"}$(function(){webp.done(function(){$(that).cloudinary($.extend({},webp_options,{format:"webp"}))}).fail(function(){$(that).cloudinary(options)})});return this};$.fn.fetchify=function(options){return this.cloudinary($.extend(options,{type:"fetch"}))};if(!$.fn.fileupload){return}$.cloudinary.delete_by_token=function(delete_token,options){options=options||{};var url=options.url;if(!url){var cloud_name=options.cloud_name||$.cloudinary.config().cloud_name;url="https://api.cloudinary.com/v1_1/"+cloud_name+"/delete_by_token"}var dataType=$.support.xhrFileUpload?"json":"iframe json";return $.ajax({url:url,method:"POST",data:{token:delete_token},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:dataType})};$.fn.cloudinary_fileupload=function(options){var initializing=!this.data("blueimpFileupload");if(initializing){options=$.extend({maxFileSize:2e7,dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"}},options)}this.fileupload(options);if(initializing){this.bind("fileuploaddone",function(e,data){if(data.result.error)return;data.result.path=["v",data.result.version,"/",data.result.public_id,data.result.format?"."+data.result.format:""].join("");if(data.cloudinaryField&&data.form.length>0){var upload_info=[data.result.resource_type,data.result.type,data.result.path].join("/")+"#"+data.result.signature;var multiple=$(e.target).prop("multiple");var add_field=function(){$("<input></input>").attr({type:"hidden",name:data.cloudinaryField}).val(upload_info).appendTo(data.form)};if(multiple){add_field()}else{var field=$(data.form).find('input[name="'+data.cloudinaryField+'"]');if(field.length>0){field.val(upload_info)}else{add_field()}}}$(e.target).trigger("cloudinarydone",data)});this.bind("fileuploadstart",function(e){$(e.target).trigger("cloudinarystart")});this.bind("fileuploadstop",function(e){$(e.target).trigger("cloudinarystop")});this.bind("fileuploadprogress",function(e,data){$(e.target).trigger("cloudinaryprogress",data)});this.bind("fileuploadprogressall",function(e,data){$(e.target).trigger("cloudinaryprogressall",data)});this.bind("fileuploadfail",function(e,data){$(e.target).trigger("cloudinaryfail",data)});this.bind("fileuploadalways",function(e,data){$(e.target).trigger("cloudinaryalways",data)});if(!this.fileupload("option").url){var cloud_name=options.cloud_name||$.cloudinary.config().cloud_name;var upload_url="https://api.cloudinary.com/v1_1/"+cloud_name+"/upload";this.fileupload("option","url",upload_url)}}return this};$.fn.cloudinary_upload_url=function(remote_url){this.fileupload("option","formData").file=remote_url;this.fileupload("add",{files:[remote_url]});delete this.fileupload("option","formData").file};$.fn.unsigned_cloudinary_upload=function(upload_preset,upload_params,options){options=options||{};
upload_params=$.extend({},upload_params)||{};if(upload_params.cloud_name){options.cloud_name=upload_params.cloud_name;delete upload_params.cloud_name}for(var key in upload_params){var value=upload_params[key];if($.isPlainObject(value)){upload_params[key]=$.map(value,function(v,k){return k+"="+v}).join("|")}else if($.isArray(value)){if(value.length>0&&$.isArray(value[0])){upload_params[key]=$.map(value,function(array_value){return array_value.join(",")}).join("|")}else{upload_params[key]=value.join(",")}}}if(!upload_params.callback){upload_params.callback="/cloudinary_cors.html"}upload_params.upload_preset=upload_preset;options.formData=upload_params;if(options.cloudinary_field){options.cloudinaryField=options.cloudinary_field;delete options.cloudinary_field}var html_options=options.html||{};html_options["class"]="cloudinary_fileupload "+(html_options["class"]||"");if(options.multiple)html_options.multiple=true;this.attr(html_options).cloudinary_fileupload(options);return this};$.cloudinary.unsigned_upload_tag=function(upload_preset,upload_params,options){return $("<input/>").attr({type:"file",name:"file"}).unsigned_cloudinary_upload(upload_preset,upload_params,options)}})},{});require.register("src/frontend/vendors/jquery.fileupload",function(require,module,exports){(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],factory)}else{factory(window.jQuery)}})(function($){"use strict";$.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))"+"|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)"+"|(w(eb)?OSBrowser)|(webOS)"+"|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||$('<input type="file">').prop("disabled"));$.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);$.support.xhrFormDataFileUpload=!!window.FormData;$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function getDragHandler(type){var isDragOver=type==="dragover";return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;if(dataTransfer&&$.inArray("Files",dataTransfer.types)!==-1&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==false){e.preventDefault();if(isDragOver){dataTransfer.dropEffect="copy"}}}}$.widget("blueimp.fileupload",{options:{dropZone:$(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(message,context){message=this.messages[message]||message.toString();if(context){$.each(context,function(key,value){message=message.replace("{"+key+"}",value)})}return message},formData:function(form){return form.serializeArray()},add:function(e,data){if(e.isDefaultPrevented()){return false}if(data.autoUpload||data.autoUpload!==false&&$(this).fileupload("option","autoUpload")){data.process().done(function(){data.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime();this.loaded=0;this.bitrate=0;this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;if(!this.bitrate||!interval||timeDiff>interval){this.bitrate=(loaded-this.loaded)*(1e3/timeDiff)*8;this.loaded=loaded;this.timestamp=now}return this.bitrate}},_isXHRUpload:function(options){return!options.forceIframeTransport&&(!options.multipart&&$.support.xhrFileUpload||$.support.xhrFormDataFileUpload)},_getFormData:function(options){var formData;if($.type(options.formData)==="function"){return options.formData(options.form)}if($.isArray(options.formData)){return options.formData}if($.type(options.formData)==="object"){formData=[];$.each(options.formData,function(name,value){formData.push({name:name,value:value})});return formData}return[]},_getTotal:function(files){var total=0;$.each(files,function(index,file){total+=file.size||1});return total},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};if(obj._progress){$.extend(obj._progress,progress)}else{obj._progress=progress}},_initResponseObject:function(obj){var prop;if(obj._response){for(prop in obj._response){if(obj._response.hasOwnProperty(prop)){delete obj._response[prop]}}}else{obj._response={}}},_onProgress:function(e,data){if(e.lengthComputable){var now=Date.now?Date.now():(new Date).getTime(),loaded;if(data._time&&data.progressInterval&&now-data._time<data.progressInterval&&e.loaded!==e.total){return}data._time=now;loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0);this._progress.loaded+=loaded-data._progress.loaded;this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval);data._progress.loaded=data.loaded=loaded;data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval);this._trigger("progress",$.Event("progress",{delegatedEvent:e}),data);this._trigger("progressall",$.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();if(xhr.upload){$(xhr.upload).bind("progress",function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable;e.loaded=oe.loaded;e.total=oe.total;that._onProgress(e,options)});options.xhr=function(){return xhr}}},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==="[object "+type+"]"},_initXHRData:function(options){var that=this,formData,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName=$.type(options.paramName)==="array"?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers);if(options.contentRange){options.headers["Content-Range"]=options.contentRange}if(!multipart||options.blob||!this._isInstanceOf("File",file)){options.headers["Content-Disposition"]='attachment; filename="'+encodeURI(file.name)+'"'}if(!multipart){options.contentType=file.type||"application/octet-stream";options.data=options.blob||file}else if($.support.xhrFormDataFileUpload){if(options.postMessage){formData=this._getFormData(options);if(options.blob){formData.push({name:paramName,value:options.blob})}else{$.each(options.files,function(index,file){formData.push({name:$.type(options.paramName)==="array"&&options.paramName[index]||paramName,value:file})})}}else{if(that._isInstanceOf("FormData",options.formData)){formData=options.formData}else{formData=new FormData;$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value)})}if(options.blob){formData.append(paramName,options.blob,file.name)}else{$.each(options.files,function(index,file){if(that._isInstanceOf("File",file)||that._isInstanceOf("Blob",file)){formData.append($.type(options.paramName)==="array"&&options.paramName[index]||paramName,file,file.uploadName||file.name)}})}}options.data=formData}options.blob=null},_initIframeSettings:function(options){var targetHost=$("<a></a>").prop("href",options.url).prop("host");options.dataType="iframe "+(options.dataType||"");options.formData=this._getFormData(options);if(options.redirect&&targetHost&&targetHost!==location.host){options.formData.push({name:options.redirectParamName||"redirect",value:options.redirect})}},_initDataSettings:function(options){if(this._isXHRUpload(options)){if(!this._chunkedUpload(options,true)){if(!options.data){this._initXHRData(options)}this._initProgressListener(options)}if(options.postMessage){options.dataType="postmessage "+(options.dataType||"")}}else{this._initIframeSettings(options)}},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;if(!paramName){paramName=[];fileInput.each(function(){var input=$(this),name=input.prop("name")||"files[]",i=(input.prop("files")||[1]).length;while(i){paramName.push(name);i-=1}});if(!paramName.length){paramName=[fileInput.prop("name")||"files[]"]}}else if(!$.isArray(paramName)){paramName=[paramName]}return paramName},_initFormSettings:function(options){if(!options.form||!options.form.length){options.form=$(options.fileInput.prop("form"));if(!options.form.length){options.form=$(this.options.fileInput.prop("form"))}}options.paramName=this._getParamName(options);if(!options.url){options.url=options.form.prop("action")||location.href}options.type=(options.type||$.type(options.form.prop("method"))==="string"&&options.form.prop("method")||"").toUpperCase();if(options.type!=="POST"&&options.type!=="PUT"&&options.type!=="PATCH"){options.type="POST"}if(!options.formAcceptCharset){options.formAcceptCharset=options.form.attr("accept-charset")}},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);this._initFormSettings(options);this._initDataSettings(options);return options},_getDeferredState:function(deferred){if(deferred.state){return deferred.state()}if(deferred.isResolved()){return"resolved"}if(deferred.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(promise){promise.success=promise.done;promise.error=promise.fail;promise.complete=promise.always;return promise},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();context=context||this.options.context||promise;if(resolveOrReject===true){dfd.resolveWith(context,args)}else if(resolveOrReject===false){dfd.rejectWith(context,args)}promise.abort=dfd.promise;return this._enhancePromise(promise)},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise()};data.process=function(resolveFunc,rejectFunc){if(resolveFunc||rejectFunc){data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){if(data.errorThrown){return $.Deferred().rejectWith(that,[data]).promise()}return getPromise(arguments)}).pipe(resolveFunc,rejectFunc)}return this._processQueue||getPromise([this])};data.submit=function(){if(this.state()!=="pending"){data.jqXHR=this.jqXHR=that._trigger("submit",$.Event("submit",{delegatedEvent:e}),this)!==false&&that._onSend(e,this)}return this.jqXHR||that._getXHRPromise()};data.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";that._trigger("fail",null,this);return that._getXHRPromise(false)};data.state=function(){if(this.jqXHR){return that._getDeferredState(this.jqXHR)}if(this._processQueue){return that._getDeferredState(this._processQueue)}};data.processing=function(){return!this.jqXHR&&this._processQueue&&that._getDeferredState(this._processQueue)==="pending"};data.progress=function(){return this._progress};data.response=function(){return this._response}},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader("Range"),parts=range&&range.split("-"),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,upload;if(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data){return false}if(testOnly){return true}if(ub>=fs){file.error=options.i18n("uploadedBytes");return this._getXHRPromise(false,options.context,[null,"error",file.error])}upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type);o.chunkSize=o.blob.size;o.contentRange="bytes "+ub+"-"+(ub+o.chunkSize-1)+"/"+fs;that._initXHRData(o);that._initProgressListener(o);jqXHR=(that._trigger("chunksend",null,o)!==false&&$.ajax(o)||that._getXHRPromise(false,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||ub+o.chunkSize;if(currentLoaded+o.chunkSize-o._progress.loaded){that._onProgress($.Event("progress",{lengthComputable:true,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o)}options.uploadedBytes=o.uploadedBytes=ub;o.result=result;o.textStatus=textStatus;o.jqXHR=jqXHR;that._trigger("chunkdone",null,o);that._trigger("chunkalways",null,o);if(ub<fs){upload()}else{dfd.resolveWith(o.context,[result,textStatus,jqXHR])}}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR;o.textStatus=textStatus;o.errorThrown=errorThrown;that._trigger("chunkfail",null,o);that._trigger("chunkalways",null,o);dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown])})};this._enhancePromise(promise);promise.abort=function(){return jqXHR.abort()};upload();return promise},_beforeSend:function(e,data){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer;this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(data);this._initProgressObject(data);data._progress.loaded=data.loaded=data.uploadedBytes||0;data._progress.total=data.total=this._getTotal(data.files)||1;data._progress.bitrate=data.bitrate=0;this._active+=1;this._progress.loaded+=data.loaded;this._progress.total+=data.total},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;if(options._progress.loaded<total){this._onProgress($.Event("progress",{lengthComputable:true,loaded:total,total:total}),options)}response.result=options.result=result;response.textStatus=options.textStatus=textStatus;response.jqXHR=options.jqXHR=jqXHR;this._trigger("done",null,options)},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;if(options.recalculateProgress){this._progress.loaded-=options._progress.loaded;this._progress.total-=options._progress.total}response.jqXHR=options.jqXHR=jqXHR;response.textStatus=options.textStatus=textStatus;response.errorThrown=options.errorThrown=errorThrown;this._trigger("fail",null,options)},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger("always",null,options)},_onSend:function(e,data){if(!data.submit){this._addConvenienceMethods(e,data)}var that=this,jqXHR,aborted,slot,pipe,options=that._getAJAXSettings(data),send=function(){that._sending+=1;options._bitrateTimer=new that._BitrateTimer;jqXHR=jqXHR||((aborted||that._trigger("send",$.Event("send",{delegatedEvent:e}),options)===false)&&that._getXHRPromise(false,options.context,aborted)||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options)}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options)}).always(function(jqXHRorResult,textStatus,jqXHRorError){that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options);that._sending-=1;that._active-=1;if(options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending){var nextSlot=that._slots.shift();while(nextSlot){if(that._getDeferredState(nextSlot)==="pending"){nextSlot.resolve();break}nextSlot=that._slots.shift()}}if(that._active===0){that._trigger("stop")}});return jqXHR};this._beforeSend(e,options);if(this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending){if(this.options.limitConcurrentUploads>1){slot=$.Deferred();this._slots.push(slot);pipe=slot.pipe(send)}else{this._sequence=this._sequence.pipe(send,send);pipe=this._sequence}pipe.abort=function(){aborted=[undefined,"abort","abort"];if(!jqXHR){if(slot){slot.rejectWith(options.context,aborted)}return send()}return jqXHR.abort()};return this._enhancePromise(pipe)}return send()},_onAdd:function(e,data){var that=this,result=true,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),paramNameSet,paramNameSlice,fileSet,i,j=0;if(limitSize&&(!filesLength||files[0].size===undefined)){limitSize=undefined}if(!(options.singleFileUploads||limit||limitSize)||!this._isXHRUpload(options)){fileSet=[files];paramNameSet=[paramName]}else if(!(options.singleFileUploads||limitSize)&&limit){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i+=limit){fileSet.push(files.slice(i,i+limit));paramNameSlice=paramName.slice(i,i+limit);if(!paramNameSlice.length){paramNameSlice=paramName}paramNameSet.push(paramNameSlice)}}else if(!options.singleFileUploads&&limitSize){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i=i+1){batchSize+=files[i].size+overhead;if(i+1===filesLength||batchSize+files[i+1].size+overhead>limitSize||limit&&i+1-j>=limit){fileSet.push(files.slice(j,i+1));paramNameSlice=paramName.slice(j,i+1);if(!paramNameSlice.length){paramNameSlice=paramName}paramNameSet.push(paramNameSlice);j=i+1;batchSize=0}}}else{paramNameSet=paramName}data.originalFiles=files;$.each(fileSet||files,function(index,element){var newData=$.extend({},data);newData.files=fileSet?element:[element];newData.paramName=paramNameSet[index];that._initResponseObject(newData);that._initProgressObject(newData);that._addConvenienceMethods(e,newData);result=that._trigger("add",$.Event("add",{delegatedEvent:e}),newData);return result});return result},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(true);data.fileInputClone=inputClone;$("<form></form>").append(inputClone)[0].reset();input.after(inputClone).detach();$.cleanData(input.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(i,el){if(el===input[0]){return inputClone[0]}return el});if(input[0]===this.element[0]){this.element=inputClone}},_handleFileTreeEntry:function(entry,path){var that=this,dfd=$.Deferred(),errorHandler=function(e){if(e&&!e.entry){e.entry=entry}dfd.resolve([e])},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+"/").done(function(files){dfd.resolve(files)}).fail(errorHandler)},readEntries=function(){dirReader.readEntries(function(results){if(!results.length){successHandler(entries)}else{entries=entries.concat(results);readEntries()}},errorHandler)},dirReader,entries=[];path=path||"";if(entry.isFile){if(entry._file){entry._file.relativePath=path;dfd.resolve(entry._file)}else{entry.file(function(file){file.relativePath=path;dfd.resolve(file)},errorHandler)}}else if(entry.isDirectory){dirReader=entry.createReader();readEntries()}else{dfd.resolve([])}return dfd.promise()},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)){return this._handleFileTreeEntries($.map(items,function(item){var entry;if(item.webkitGetAsEntry){entry=item.webkitGetAsEntry();if(entry){entry._file=item.getAsFile()}return entry}return item.getAsEntry()}))}return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise()},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var entries=fileInput.prop("webkitEntries")||fileInput.prop("entries"),files,value;if(entries&&entries.length){return this._handleFileTreeEntries(entries)}files=$.makeArray(fileInput.prop("files"));if(!files.length){value=fileInput.prop("value");if(!value){return $.Deferred().resolve([]).promise()}files=[{name:value.replace(/^.*\\/,"")}]}else if(files[0].name===undefined&&files[0].fileName){$.each(files,function(index,file){file.name=file.fileName;file.size=file.fileSize})}return $.Deferred().resolve(files).promise()},_getFileInputFiles:function(fileInput){if(!(fileInput instanceof $)||fileInput.length===1){return this._getSingleFileInputFiles(fileInput)}return $.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;if(that.options.replaceFileInput){that._replaceFileInput(data)}if(that._trigger("change",$.Event("change",{delegatedEvent:e}),data)!==false){that._onAdd(e,data)}})},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};if(items&&items.length){$.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();if(file){data.files.push(file)}});if(this._trigger("paste",$.Event("paste",{delegatedEvent:e}),data)!==false){this._onAdd(e,data)}}},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();this._getDroppedFiles(dataTransfer).always(function(files){data.files=files;if(that._trigger("drop",$.Event("drop",{delegatedEvent:e}),data)!==false){that._onAdd(e,data)}})}},_onDragOver:getDragHandler("dragover"),_onDragEnter:getDragHandler("dragenter"),_onDragLeave:getDragHandler("dragleave"),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste})}if($.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(key,value){var reinit=$.inArray(key,this._specialOptions)!==-1;if(reinit){this._destroyEventHandlers()}this._super(key,value);if(reinit){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var options=this.options;if(options.fileInput===undefined){options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else if(!(options.fileInput instanceof $)){options.fileInput=$(options.fileInput)}if(!(options.dropZone instanceof $)){options.dropZone=$(options.dropZone)}if(!(options.pasteZone instanceof $)){options.pasteZone=$(options.pasteZone)}},_getRegExp:function(str){var parts=str.split("/"),modifiers=parts.pop();parts.shift();return new RegExp(parts.join("/"),modifiers)},_isRegExpOption:function(key,value){return key!=="url"&&$.type(value)==="string"&&/^\/.*\/[igm]{0,3}$/.test(value)},_initDataAttributes:function(){var that=this,options=this.options,clone=$(this.element[0].cloneNode(false)),data=clone.data();clone.remove();$.each(data,function(key,value){var dataAttributeName="data-"+key.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(clone.attr(dataAttributeName)){if(that._isRegExpOption(key,value)){value=that._getRegExp(value)}options[key]=value}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(data){var that=this;if(!data||this.options.disabled){return}if(data.fileInput&&!data.files){this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;that._onAdd(null,data)})}else{data.files=$.makeArray(data.files);this._onAdd(null,data)}},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var that=this,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,aborted;promise.abort=function(){aborted=true;if(jqXHR){return jqXHR.abort()}dfd.reject(null,"abort","abort");return promise};this._getFileInputFiles(data.fileInput).always(function(files){if(aborted){return}if(!files.length){dfd.reject();return}data.files=files;jqXHR=that._onSend(null,data);jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR)},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown)})});return this._enhancePromise(promise)}data.files=$.makeArray(data.files);if(data.files.length){return this._onSend(null,data)}}return this._getXHRPromise(false,data&&data.context)}})})},{});require.register("src/frontend/vendors/jquery.iframe-transport",function(require,module,exports){(function(factory){"use strict";if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(window.jQuery)}})(function($){"use strict";var counter=0;$.ajaxTransport("iframe",function(options){if(options.async){var initialIframeSrc=options.initialIframeSrc||"javascript:false;",form,iframe,addParamChar;return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>');form.attr("accept-charset",options.formAcceptCharset);addParamChar=/\?/.test(options.url)?"&":"?";if(options.type==="DELETE"){options.url=options.url+addParamChar+"_method=DELETE";options.type="POST"}else if(options.type==="PUT"){options.url=options.url+addParamChar+"_method=PUT";options.type="POST"}else if(options.type==="PATCH"){options.url=options.url+addParamChar+"_method=PATCH";options.type="POST"}counter+=1;iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind("load",function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind("load").bind("load",function(){var response;try{response=iframe.contents();if(!response.length||!response[0].firstChild){throw new Error}}catch(e){response=undefined}completeCallback(200,"success",{iframe:response});$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form);window.setTimeout(function(){form.remove()},0)});form.prop("target",iframe.prop("name")).prop("action",options.url).prop("method",options.type);if(options.formData){$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop("name",field.name).val(field.value).appendTo(form)})}if(options.fileInput&&options.fileInput.length&&options.type==="POST"){fileInputClones=options.fileInput.clone();options.fileInput.after(function(index){return fileInputClones[index]});if(options.paramName){options.fileInput.each(function(index){$(this).prop("name",paramNames[index]||options.paramName)})}form.append(options.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");options.fileInput.removeAttr("form")}form.submit();if(fileInputClones&&fileInputClones.length){options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop("name",clone.prop("name")).attr("form",clone.attr("form"));clone.replaceWith(input)})}});form.append(iframe).appendTo(document.body)},abort:function(){if(iframe){iframe.unbind("load").prop("src",initialIframeSrc)}if(form){form.remove()}}}}});$.ajaxSetup({converters:{"iframe text":function(iframe){return iframe&&$(iframe[0].body).text()},"iframe json":function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text())},"iframe html":function(iframe){return iframe&&$(iframe[0].body).html()},"iframe xml":function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML(xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml||$(xmlDoc.body).html())},"iframe script":function(iframe){return iframe&&$.globalEval($(iframe[0].body).text())}}})})},{});require.register("src/frontend/vendors/jquery.ui.widget",function(require,module,exports){(function(factory){if(typeof define==="function"&&define.amd){define(["jquery"],factory)}else{factory(jQuery)}})(function($){var widget_uuid=0,widget_slice=Array.prototype.slice;$.cleanData=function(orig){return function(elems){var events,elem,i;for(i=0;(elem=elems[i])!=null;i++){try{events=$._data(elem,"events");if(events&&events.remove){$(elem).triggerHandler("remove")}}catch(e){}}orig(elems)}}($.cleanData);$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget){return new constructor(options,element)}if(arguments.length){this._createWidget(options,element)}};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?basePrototype.widgetEventPrefix||name:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else{base._childConstructors.push(constructor)}$.widget.bridge(name,constructor);return constructor};$.widget.extend=function(target){var input=widget_slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++){for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined){if($.isPlainObject(value)){target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value)}else{target[key]=value}}}}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=widget_slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall){this.each(function(){var methodValue,instance=$.data(this,fullName);if(options==="instance"){returnValue=instance;return false}if(!instance){return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'")}if(!$.isFunction(instance[options])||options.charAt(0)==="_"){return $.error("no such method '"+options+"' for "+name+" widget instance")}methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}})}else{this.each(function(){var instance=$.data(this,fullName);if(instance){instance.option(options||{});
if(instance._init){instance._init()}}else{$.data(this,fullName,new object(options,this))}})}return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=widget_uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,{remove:function(event){if(event.target===element){this.destroy()}}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0){return $.widget.extend({},this.options)}if(typeof key==="string"){options={};parts=key.split(".");key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(arguments.length===1){return curOption[key]===undefined?null:curOption[key]}curOption[key]=value}else{if(arguments.length===1){return this.options[key]===undefined?null:this.options[key]}options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options){this._setOption(key,options[key])}return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled",!!value);if(value){this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}}return this},enable:function(){return this._setOptions({disabled:false})},disable:function(){return this._setOptions({disabled:true})},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled"))){return}return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string"){handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++}var match=event.match(/^([\w:-]*)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector){delegateElement.delegate(selector,eventName,handlerProxy)}else{element.bind(eventName,handlerProxy)}})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName)},_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig){for(prop in orig){if(!(prop in event)){event[prop]=orig[prop]}}}this.element.trigger(event,data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string"){options={effect:options}}var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number"){options={duration:options}}hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay){element.delay(options.delay)}if(hasOptions&&$.effects&&$.effects.effect[effectName]){element[method](options)}else if(effectName!==method&&element[effectName]){element[effectName](options.duration,options.easing,callback)}else{element.queue(function(next){$(this)[method]();if(callback){callback.call(element[0])}next()})}}});var widget=$.widget})},{});require.register("src/frontend/vendors/modernizr.custom",function(require,module,exports){window.Modernizr=function(a,b,c){function A(a){j.cssText=a}function B(a,b){return A(n.join(a+";")+(b||""))}function C(a,b){return typeof a===b}function D(a,b){return!!~(""+a).indexOf(b)}function E(a,b){for(var d in a){var e=a[d];if(!D(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function F(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:C(f,"function")?f.bind(d||b):f}return!1}function G(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return C(b,"string")||C(b,"undefined")?E(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),F(e,b,c))}function H(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)t[c[d]]=c[d]in k;return t.list&&(t.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),t}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),s[a[d]]=!!e;return s}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.8.3",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={},s={},t={},u=[],v=u.slice,w,x=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},y={}.hasOwnProperty,z;!C(y,"undefined")&&!C(y.call,"undefined")?z=function(a,b){return y.call(a,b)}:z=function(a,b){return b in a&&C(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=v.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(v.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(v.call(arguments)))};return e}),r.backgroundsize=function(){return G("backgroundSize")},r.csstransforms=function(){return!!G("transform")},r.csstransforms3d=function(){var a=!!G("perspective");return a&&"webkitPerspective"in g.style&&x("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},r.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c};for(var I in r)z(r,I)&&(w=I.toLowerCase(),e[w]=r[I](),u.push((e[w]?"":"no-")+w));return e.input||H(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)z(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},A(""),i=k=null,function(a,b){function l(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function m(){var a=s.elements;return typeof a=="string"?a.split(" "):a}function n(a){var b=j[a[h]];return b||(b={},i++,a[h]=i,j[i]=b),b}function o(a,c,d){c||(c=b);if(k)return c.createElement(a);d||(d=n(c));var g;return d.cache[a]?g=d.cache[a].cloneNode():f.test(a)?g=(d.cache[a]=d.createElem(a)).cloneNode():g=d.createElem(a),g.canHaveChildren&&!e.test(a)&&!g.tagUrn?d.frag.appendChild(g):g}function p(a,c){a||(a=b);if(k)return a.createDocumentFragment();c=c||n(a);var d=c.frag.cloneNode(),e=0,f=m(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function q(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?o(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+m().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function r(a){a||(a=b);var c=n(a);return s.shivCSS&&!g&&!c.hasCSS&&(c.hasCSS=!!l(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||q(a,c),a}var c="3.7.0",d=a.html5||{},e=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g,h="_html5shiv",i=0,j={},k;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",g="hidden"in a,k=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){g=!0,k=!0}})();var s={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:d.shivCSS!==!1,supportsUnknownElements:k,shivMethods:d.shivMethods!==!1,type:"default",shivDocument:r,createElement:o,createDocumentFragment:p};a.html5=s,r(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.testProp=function(a){return E([a])},e.testAllProps=G,e.testStyles=x,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+u.join(" "):""),e}(this,this.document)},{});require.register("src/frontend/vendors/parallax.min",function(require,module,exports){!function(t,i,e,s){function o(i,e){var h=this;"object"==typeof e&&(delete e.refresh,delete e.render,t.extend(this,e)),this.$element=t(i),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var n=(this.position+"").toLowerCase().match(/\S+/g)||[];return n.length<1&&n.push("center"),1==n.length&&n.push(n[0]),"top"==n[0]||"bottom"==n[0]||"left"==n[1]||"right"==n[1]?(h.positionX=n[1],h.positionY=n[0]):(h.positionX=n[0],h.positionY=n[1]),this.positionX!=s&&(n[0]=this.positionX.toLowerCase()),this.positionY!=s&&(n[1]=this.positionY.toLowerCase()),"left"!=this.positionX&&"right"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?"center":parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?"center":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?(this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this):navigator.userAgent.match(/(Android)/)?(this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this):(this.$mirror=t("<div />").prependTo("body"),this.$slider=t("<img />").prependTo(this.$mirror),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){h.naturalHeight&&h.naturalWidth||(h.naturalHeight=this.naturalHeight||this.height||1,h.naturalWidth=this.naturalWidth||this.width||1),h.aspectRatio=h.naturalWidth/h.naturalHeight,o.isSetup||o.setup(),o.sliders.push(h),o.isFresh=!1,o.requestRender()}),this.$slider[0].src=this.imageSrc,void((this.naturalHeight&&this.naturalWidth||this.$slider[0].complete)&&this.$slider.trigger("load")))}function h(s){return this.each(function(){var h=t(this),n="object"==typeof s&&s;this==i||this==e||h.is("body")?o.configure(n):h.data("px.parallax")||(n=t.extend({},h.data(),n),h.data("px.parallax",new o(this,n))),"string"==typeof s&&o[s]()})}!function(){for(var t=0,e=["ms","moz","webkit","o"],s=0;s<e.length&&!i.requestAnimationFrame;++s)i.requestAnimationFrame=i[e[s]+"RequestAnimationFrame"],i.cancelAnimationFrame=i[e[s]+"CancelAnimationFrame"]||i[e[s]+"CancelRequestAnimationFrame"];i.requestAnimationFrame||(i.requestAnimationFrame=function(e){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),h=i.setTimeout(function(){e(s+o)},o);return t=s+o,h}),i.cancelAnimationFrame||(i.cancelAnimationFrame=function(t){clearTimeout(t)})}(),t.extend(o.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var t=o.winHeight,i=o.docHeight,e=Math.min(this.boxOffsetTop,i-t),s=Math.max(this.boxOffsetTop+this.boxHeight-t,0),h=this.boxHeight+(e-s)*(1-this.speed)|0,n=(this.boxOffsetTop-e)*(1-this.speed)|0;if(h*this.aspectRatio>=this.boxWidth){this.imageWidth=h*this.aspectRatio|0,this.imageHeight=h,this.offsetBaseTop=n;var r=this.imageWidth-this.boxWidth;this.offsetLeft="left"==this.positionX?0:"right"==this.positionX?-r:isNaN(this.positionX)?-r/2|0:Math.max(this.positionX,-r)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;var r=this.imageHeight-h;this.offsetBaseTop="top"==this.positionY?n:"bottom"==this.positionY?n-r:isNaN(this.positionY)?n-r/2|0:n+Math.max(this.positionY,-r)}},render:function(){var t=o.scrollTop,i=o.scrollLeft,e=t+o.winHeight;this.visibility=this.boxOffsetBottom>t&&this.boxOffsetTop<e?"visible":"hidden",this.mirrorTop=this.boxOffsetTop-t,this.mirrorLeft=this.boxOffsetLeft-i,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed),this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth})}}),t.extend(o,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var s=t(e),h=t(i);h.on("scroll.px.parallax load.px.parallax",function(){var t=o.docHeight-o.winHeight,i=o.docWidth-o.winWidth;o.scrollTop=Math.max(0,Math.min(t,h.scrollTop())),o.scrollLeft=Math.max(0,Math.min(i,h.scrollLeft())),o.requestRender()}).on("resize.px.parallax load.px.parallax",function(){o.winHeight=h.height(),o.winWidth=h.width(),o.docHeight=s.height(),o.docWidth=s.width(),o.isFresh=!1,o.requestRender()}),this.isReady=!0}},configure:function(i){"object"==typeof i&&(delete i.refresh,delete i.render,t.extend(this.prototype,i))},refresh:function(){t.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),t.each(this.sliders,function(){this.render()})},requestRender:function(){var t=this;this.isBusy||(this.isBusy=!0,i.requestAnimationFrame(function(){t.render(),t.isBusy=!1}))}});var n=t.fn.parallax;t.fn.parallax=h,t.fn.parallax.Constructor=o,t.fn.parallax.noConflict=function(){return t.fn.parallax=n,this},t(e).on("ready.px.parallax.data-api",function(){t('[data-parallax="scroll"]').parallax()})}(jQuery,window,document)},{});require.register("src/frontend/vendors/reconnecting-websocket",function(require,module,exports){(function(global,factory){if(typeof define==="function"&&define.amd){define([],factory)}else if(typeof module!=="undefined"&&module.exports){module.exports=factory()}else{global.ReconnectingWebSocket=factory()}})(this,function(){function ReconnectingWebSocket(url,protocols,options){var settings={debug:false,automaticOpen:true,reconnectInterval:1e3,maxReconnectInterval:3e4,reconnectDecay:1.5,timeoutInterval:2e3};if(!options){options={}}for(var key in settings){if(typeof options[key]!=="undefined"){this[key]=options[key]}else{this[key]=settings[key]}}this.url=url;this.reconnectAttempts=0;this.readyState=WebSocket.CONNECTING;this.protocol=null;var self=this;var ws;var forcedClose=false;var timedOut=false;var eventTarget=document.createElement("div");eventTarget.addEventListener("open",function(event){self.onopen(event)});eventTarget.addEventListener("close",function(event){self.onclose(event)});eventTarget.addEventListener("connecting",function(event){self.onconnecting(event)});eventTarget.addEventListener("message",function(event){self.onmessage(event)});eventTarget.addEventListener("error",function(event){self.onerror(event)});this.addEventListener=eventTarget.addEventListener.bind(eventTarget);this.removeEventListener=eventTarget.removeEventListener.bind(eventTarget);this.dispatchEvent=eventTarget.dispatchEvent.bind(eventTarget);function generateEvent(s,args){var evt=document.createEvent("CustomEvent");evt.initCustomEvent(s,false,false,args);return evt}this.open=function(reconnectAttempt){ws=new WebSocket(self.url,protocols||[]);if(!reconnectAttempt){eventTarget.dispatchEvent(generateEvent("connecting"))}if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","attempt-connect",self.url)}var localWs=ws;var timeout=setTimeout(function(){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","connection-timeout",self.url)}timedOut=true;localWs.close();timedOut=false},self.timeoutInterval);ws.onopen=function(event){clearTimeout(timeout);if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onopen",self.url)}self.protocol=ws.protocol;self.readyState=WebSocket.OPEN;self.reconnectAttempts=0;var e=generateEvent("open");e.isReconnect=reconnectAttempt;reconnectAttempt=false;eventTarget.dispatchEvent(e)};ws.onclose=function(event){clearTimeout(timeout);ws=null;if(forcedClose){self.readyState=WebSocket.CLOSED;eventTarget.dispatchEvent(generateEvent("close"))}else{self.readyState=WebSocket.CONNECTING;var e=generateEvent("connecting");e.code=event.code;e.reason=event.reason;e.wasClean=event.wasClean;eventTarget.dispatchEvent(e);if(!reconnectAttempt&&!timedOut){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onclose",self.url)}eventTarget.dispatchEvent(generateEvent("close"))}var timeout=self.reconnectInterval*Math.pow(self.reconnectDecay,self.reconnectAttempts);setTimeout(function(){self.reconnectAttempts++;self.open(true)},timeout>self.maxReconnectInterval?self.maxReconnectInterval:timeout)}};ws.onmessage=function(event){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onmessage",self.url,event.data)}var e=generateEvent("message");e.data=event.data;eventTarget.dispatchEvent(e)};ws.onerror=function(event){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onerror",self.url,event)}eventTarget.dispatchEvent(generateEvent("error"))}};if(this.automaticOpen==true){this.open(false)}this.send=function(data){if(ws){if(self.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","send",self.url,data)}return ws.send(data)}else{throw"INVALID_STATE_ERR : Pausing to reconnect websocket"}};this.close=function(code,reason){if(typeof code=="undefined"){code=1e3}forcedClose=true;if(ws){ws.close(code,reason)}};this.refresh=function(){if(ws){ws.close()}}}ReconnectingWebSocket.prototype.onopen=function(event){};ReconnectingWebSocket.prototype.onclose=function(event){};ReconnectingWebSocket.prototype.onconnecting=function(event){};ReconnectingWebSocket.prototype.onmessage=function(event){};ReconnectingWebSocket.prototype.onerror=function(event){};ReconnectingWebSocket.debugAll=false;ReconnectingWebSocket.CONNECTING=WebSocket.CONNECTING;ReconnectingWebSocket.OPEN=WebSocket.OPEN;ReconnectingWebSocket.CLOSING=WebSocket.CLOSING;ReconnectingWebSocket.CLOSED=WebSocket.CLOSED;return ReconnectingWebSocket})},{});require("src/frontend/scripts/app")})();