Socket messages are broadcasted and listened via http://pusher.com

NOTE: staging and beta have their own pusher accounts


Channels / messages

  The web server works on the following channels

  - #{user._id}
    - followed_by
      user:
        username
        name

  - #{room_id}

    This channel broadcast the following message

      - message

        Which sends
          data = 
            name   : user.name
            avatar : user.avatar
            time   : now().format()
            message: message

        # Happens when a message is sent in this room

      - status

        Which can send any of this
          is_live ( Boolean )
          is_recording ( Boolean )
          live
            started_at ( UTC time )
            stopped_at ( UTC time )
          recording
            started_at ( UTC time )
            stopped_at ( UTC time )

        # Happens when a room goes live / offline


  The tape server works on the following channels

  - tape.#{mount_point}

    This channel broadcast the following message

      - upload:finished

        Which sends
          file

      - upload:error

        Which sends
          error

      - upload:failed

        Which sends
          error
